{"ast":null,"code":"import { createAction, createSlice } from '@reduxjs/toolkit';\nimport { a as authStoreName, F as FRONTEGG_AFTER_AUTH_REDIRECT_URL, H as HOSTED_LOGIN_VERIFIER_KEY } from '../constants-4d9682b2.js';\nexport { a as authStoreName } from '../constants-4d9682b2.js';\nimport { __awaiter, __rest } from 'tslib';\nimport { takeLeading, put, select, call, takeEvery, delay as delay$1, all, retry, takeLatest } from 'redux-saga/effects';\nimport { AuthStrategyEnum, api, ContextHolder, fetch } from '@frontegg/rest-api';\nexport { AuthStrategyEnum } from '@frontegg/rest-api';\nimport { l as loadVendorPublicInfo } from '../saga-b6529ffb.js';\nimport { v4 } from 'uuid';\n\nconst resetStateByKey = (key, initialState) => state => Object.assign(Object.assign({}, state), {\n  [key]: initialState[key]\n});\n\nconst typeReducer = key => (state, {\n  payload\n}) => Object.assign(Object.assign({}, state), {\n  [key]: payload\n});\n\nconst typeReducerForKey = key => ({\n  prepare: payload => ({\n    payload\n  }),\n  reducer: (state, {\n    payload\n  }) => {\n    return Object.assign(Object.assign({}, state), {\n      [key]: Object.assign(Object.assign({}, state[key]), payload)\n    });\n  }\n});\n\nconst typeReducerNestedKey = (key, nestedKey) => ({\n  prepare: payload => ({\n    payload\n  }),\n  reducer: (state, {\n    payload\n  }) => {\n    var _a;\n\n    return Object.assign(Object.assign({}, state), {\n      [key]: Object.assign(Object.assign({}, state[key]), {\n        [nestedKey]: Object.assign(Object.assign({}, (_a = state === null || state === void 0 ? void 0 : state[key]) === null || _a === void 0 ? void 0 : _a[nestedKey]), payload)\n      })\n    });\n  }\n});\n\nconst loadersReducerForKey = key => ({\n  prepare: payload => ({\n    payload\n  }),\n  reducer: (state, {\n    payload\n  }) => {\n    var _a;\n\n    return Object.assign(Object.assign({}, state), {\n      [key]: Object.assign(Object.assign({}, state[key]), {\n        loaders: Object.assign(Object.assign({}, state[key].loaders), {\n          [payload.key]: (_a = payload.value) !== null && _a !== void 0 ? _a : true\n        })\n      })\n    });\n  }\n});\n\nconst errorsReducerForKey = key => ({\n  prepare: payload => ({\n    payload\n  }),\n  reducer: (state, {\n    payload\n  }) => {\n    var _a;\n\n    return Object.assign(Object.assign({}, state), {\n      [key]: Object.assign(Object.assign({}, state[key]), {\n        errors: Object.assign(Object.assign({}, state[key].errors), {\n          [payload.key]: (_a = payload.value) !== null && _a !== void 0 ? _a : true\n        })\n      })\n    });\n  }\n});\n\nconst delay = (delayTime = 500) => new Promise(resolve => setTimeout(resolve, delayTime));\n\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';\nconst lookup = new Uint8Array(256);\n\nfor (let i = 0; i < chars.length; i++) {\n  lookup[chars.charCodeAt(i)] = i;\n}\n\nconst base64urlEncode = arraybuffer => {\n  const bytes = new Uint8Array(arraybuffer);\n  const len = bytes.length;\n  let i;\n  let base64url = '';\n\n  for (i = 0; i < len; i += 3) {\n    base64url += chars[bytes[i] >> 2];\n    base64url += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n    base64url += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n    base64url += chars[bytes[i + 2] & 63];\n  }\n\n  if (len % 3 === 2) {\n    base64url = base64url.substring(0, base64url.length - 1);\n  } else if (len % 3 === 1) {\n    base64url = base64url.substring(0, base64url.length - 2);\n  }\n\n  return base64url;\n};\n\nconst base64urlDecode = base64string => {\n  const bufferLength = base64string.length * 0.75;\n  let len = base64string.length,\n      i,\n      p = 0,\n      encoded1,\n      encoded2,\n      encoded3,\n      encoded4;\n  const bytes = new Uint8Array(bufferLength);\n\n  for (i = 0; i < len; i += 4) {\n    encoded1 = lookup[base64string.charCodeAt(i)];\n    encoded2 = lookup[base64string.charCodeAt(i + 1)];\n    encoded3 = lookup[base64string.charCodeAt(i + 2)];\n    encoded4 = lookup[base64string.charCodeAt(i + 3)];\n    bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n    bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n    bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n  }\n\n  return bytes.buffer;\n};\n\nconst publicKeyCredentialToJSON = pubKeyCred => {\n  if (pubKeyCred instanceof Array) {\n    const arr = [];\n\n    for (const i of pubKeyCred) {\n      arr.push(publicKeyCredentialToJSON(i));\n    }\n\n    return arr;\n  } else if (pubKeyCred instanceof ArrayBuffer) {\n    return base64urlEncode(pubKeyCred);\n  } else if (pubKeyCred instanceof Object) {\n    const obj = {};\n\n    for (const key in pubKeyCred) {\n      obj[key] = publicKeyCredentialToJSON(pubKeyCred[key]);\n    }\n\n    return obj;\n  }\n\n  return pubKeyCred;\n};\n\nvar LoginStep;\n\n(function (LoginStep) {\n  LoginStep[\"preLogin\"] = \"preLogin\";\n  LoginStep[\"magicLinkPreLoginSuccess\"] = \"magicLinkPreLoginSuccess\";\n  LoginStep[\"loginWithSmsOtc\"] = \"loginWithSmsOtc\";\n  LoginStep[\"loginWithQuickSmsOtc\"] = \"loginWithQuickSmsOtc\";\n  LoginStep[\"loginWithOtc\"] = \"loginWithOtc\";\n  LoginStep[\"loginWithPassword\"] = \"loginWithPassword\";\n  LoginStep[\"loginWithTwoFactor\"] = \"loginWithTwoFactor\";\n  LoginStep[\"redirectToSSO\"] = \"redirectToSSO\";\n  LoginStep[\"loginWithSSOFailed\"] = \"loginWithSSOFailed\";\n  LoginStep[\"success\"] = \"success\";\n  LoginStep[\"forceTwoFactor\"] = \"forceTwoFactor\";\n  LoginStep[\"recoverTwoFactor\"] = \"recoverTwoFactor\";\n})(LoginStep || (LoginStep = {}));\n\nvar LoginFlow;\n\n(function (LoginFlow) {\n  LoginFlow[\"Login\"] = \"login\";\n  LoginFlow[\"RegisterQuickLogin\"] = \"registerQuickLogin\";\n})(LoginFlow || (LoginFlow = {}));\n\nvar QuickLoginStrategy;\n\n(function (QuickLoginStrategy) {\n  QuickLoginStrategy[\"Internal\"] = \"internal\";\n  QuickLoginStrategy[\"UsbKey\"] = \"usb-key\";\n  QuickLoginStrategy[\"Android\"] = \"android\";\n  QuickLoginStrategy[\"Sms\"] = \"sms\";\n})(QuickLoginStrategy || (QuickLoginStrategy = {}));\n\nconst loginState = {\n  flow: LoginFlow.Login,\n  step: LoginStep.preLogin,\n  loading: false,\n  email: '',\n  tenants: []\n};\nconst reducers$h = {\n  setLoginState: typeReducerForKey('loginState'),\n  resetLoginState: resetStateByKey('loginState', {\n    loginState\n  })\n};\nconst actions$i = {\n  requestAuthorize: createAction(`${authStoreName}/requestAuthorize`, (payload = false) => ({\n    payload\n  })),\n  requestAuthorizeSSR: createAction(`${authStoreName}/requestAuthorizeSSR`, payload => ({\n    payload\n  })),\n  requestHostedLoginAuthorize: createAction(`${authStoreName}/requestHostedLoginAuthorize`),\n  handleHostedLoginCallback: createAction(`${authStoreName}/handleHostedLoginCallback`, payload => ({\n    payload\n  })),\n  afterAuthNavigation: createAction(`${authStoreName}/afterAuthNavigation`),\n  preLogin: createAction(`${authStoreName}/preLogin`, payload => ({\n    payload\n  })),\n  postLogin: createAction(`${authStoreName}/postLogin`, payload => ({\n    payload\n  })),\n  login: createAction(`${authStoreName}/login`, payload => ({\n    payload\n  })),\n  loginWithMfa: createAction(`${authStoreName}/loginWithMfa`, payload => ({\n    payload\n  })),\n  recoverMfa: createAction(`${authStoreName}/recoverMfa`, payload => ({\n    payload\n  })),\n  logout: createAction(`${authStoreName}/logout`, payload => ({\n    payload\n  })),\n  silentLogout: createAction(`${authStoreName}/silentLogout`, payload => ({\n    payload\n  })),\n  checkIfAllowToRememberMfaDevice: createAction(`${authStoreName}/checkIfAllowToRememberMfaDevice`, payload => ({\n    payload\n  })),\n  changePhoneNumberWithVerification: createAction(`${authStoreName}/changePhoneNumberWithVerification`, payload => ({\n    payload\n  })),\n  verifyChangePhoneNumber: createAction(`${authStoreName}/verifyChangePhoneNumber`, payload => ({\n    payload\n  })),\n  quickSmsPasswordlessPreLogin: createAction(`${authStoreName}/quickSmsPasswordlessPreLogin`, payload => ({\n    payload\n  })),\n  passwordlessPreLogin: createAction(`${authStoreName}/passwordlessPreLogin`, payload => ({\n    payload\n  })),\n  passwordlessPostLogin: createAction(`${authStoreName}/passwordlessPostLogin`, payload => ({\n    payload\n  })),\n  verifyInviteToken: createAction(`${authStoreName}/verifyInviteToken`, payload => ({\n    payload\n  })),\n  webAuthnPrelogin: createAction(`${authStoreName}/webAuthnPrelogin`, payload => ({\n    payload\n  })),\n  webAuthnPostLogin: createAction(`${authStoreName}/webAuthnPostLogin`, payload => ({\n    payload\n  })),\n  webAuthnCreateNewDeviceSession: createAction(`${authStoreName}/webAuthnCreateNewDeviceSession`, payload => ({\n    payload\n  })),\n  webAuthnVerifyNewDeviceSession: createAction(`${authStoreName}/webAuthnVerifyNewDeviceSession`, payload => ({\n    payload\n  }))\n};\nvar ActivateAccountStep;\n\n(function (ActivateAccountStep) {\n  ActivateAccountStep[\"activating\"] = \"activating\";\n  ActivateAccountStep[\"success\"] = \"success\";\n  ActivateAccountStep[\"resend\"] = \"resend\";\n  ActivateAccountStep[\"activatingForm\"] = \"activatingForm\";\n})(ActivateAccountStep || (ActivateAccountStep = {}));\n\nconst activateState = {\n  step: ActivateAccountStep.activating,\n  loading: false,\n  resentEmail: false,\n  activationStrategy: {\n    loading: false\n  }\n};\nconst reducers$g = {\n  setActivateState: typeReducerForKey('activateState'),\n  resetActivateState: resetStateByKey('activateState', {\n    activateState\n  }),\n  setActivateStrategyState: typeReducerNestedKey('activateState', 'activationStrategy')\n};\nconst actions$h = {\n  activateAccount: createAction(`${authStoreName}/activateAccount`, payload => ({\n    payload\n  })),\n  preActivateAccount: createAction(`${authStoreName}/preActivateAccount`, payload => ({\n    payload\n  })),\n  getActivateAccountStrategy: createAction(`${authStoreName}/getActivateAccountStrategy`, payload => ({\n    payload\n  })),\n  resendActivationEmail: createAction(`${authStoreName}/resendActivationEmail`, payload => ({\n    payload\n  }))\n};\nvar AcceptInvitationStep;\n\n(function (AcceptInvitationStep) {\n  AcceptInvitationStep[\"validate\"] = \"validate\";\n  AcceptInvitationStep[\"invalid\"] = \"invalid\";\n  AcceptInvitationStep[\"pending\"] = \"pending\";\n  AcceptInvitationStep[\"success\"] = \"success\";\n  AcceptInvitationStep[\"failed\"] = \"failed\";\n})(AcceptInvitationStep || (AcceptInvitationStep = {}));\n\nconst acceptInvitationState = {\n  step: AcceptInvitationStep.validate\n};\nconst reducers$f = {\n  setAcceptInvitationState: typeReducerForKey('acceptInvitationState'),\n  resetAcceptInvitationState: resetStateByKey('acceptInvitationState', {\n    acceptInvitationState\n  })\n};\nconst actions$g = {\n  acceptInvitation: createAction(`${authStoreName}/acceptInvitation`, payload => ({\n    payload\n  }))\n};\nvar ForgotPasswordStep;\n\n(function (ForgotPasswordStep) {\n  ForgotPasswordStep[\"forgotPassword\"] = \"forgotPassword\";\n  ForgotPasswordStep[\"success\"] = \"success\";\n})(ForgotPasswordStep || (ForgotPasswordStep = {}));\n\nconst forgotPasswordState = {\n  step: ForgotPasswordStep.forgotPassword,\n  loading: false,\n  email: '',\n  passwordConfig: null\n};\nconst reducers$e = {\n  setForgotPasswordState: typeReducerForKey('forgotPasswordState'),\n  resetForgotPasswordState: resetStateByKey('forgotPasswordState', {\n    forgotPasswordState\n  })\n};\nconst actions$f = {\n  forgotPassword: createAction(`${authStoreName}/forgotPassword`, payload => ({\n    payload\n  })),\n  resetPassword: createAction(`${authStoreName}/resetPassword`, payload => ({\n    payload\n  })),\n  loadPasswordConfig: createAction(`${authStoreName}/loadPasswordConfig`, payload => ({\n    payload\n  }))\n};\nvar ResetPhoneNumberStep;\n\n(function (ResetPhoneNumberStep) {\n  ResetPhoneNumberStep[\"ResetPhoneNumber\"] = \"ResetPhoneNumber\";\n  ResetPhoneNumberStep[\"VerifyResetPhoneNumber\"] = \"VerifyResetPhoneNumber\";\n  ResetPhoneNumberStep[\"ChangePhoneNumber\"] = \"ChangePhoneNumber\";\n})(ResetPhoneNumberStep || (ResetPhoneNumberStep = {}));\n\nconst resetPhoneNumberState = {\n  step: ResetPhoneNumberStep.ResetPhoneNumber,\n  loading: false\n};\nconst reducers$d = {\n  setResetPhoneNumberState: typeReducerForKey('resetPhoneNumberState'),\n  resetResetPhoneNumberState: resetStateByKey('resetPhoneNumberState', {\n    resetPhoneNumberState\n  })\n};\nconst actions$e = {\n  resetPhoneNumber: createAction(`${authStoreName}/resetPhoneNumber`, payload => ({\n    payload\n  })),\n  verifyResetPhoneNumber: createAction(`${authStoreName}/verifyResetPhoneNumber`, payload => ({\n    payload\n  })),\n  changePhoneNumber: createAction(`${authStoreName}/changePhoneNumber`, payload => ({\n    payload\n  }))\n};\nconst ssoState = {\n  firstLoad: true,\n  loading: true,\n  saving: false,\n  errors: {},\n  loaders: {},\n  ssoConfigurations: []\n};\nconst reducers$c = {\n  setSSOLoader: loadersReducerForKey('ssoState'),\n  setSSOError: errorsReducerForKey('ssoState'),\n  setSSOState: typeReducerForKey('ssoState'),\n  resetSSOState: resetStateByKey('ssoState', {\n    ssoState\n  })\n};\nconst actions$d = {\n  loadSSOConfigurationsV2: createAction(`${authStoreName}/loadSSOConfigurationsV2`),\n  saveSSOConfigurationV2: createAction(`${authStoreName}/saveSSOConfigurationV2`, payload => ({\n    payload\n  })),\n  updateSSOConfiguration: createAction(`${authStoreName}/updateSSOConfiguration`, payload => ({\n    payload\n  })),\n  deleteSSOConfiguration: createAction(`${authStoreName}/deleteSSOConfiguration`, payload => ({\n    payload\n  })),\n  saveSSODomain: createAction(`${authStoreName}/saveSSODomain`, payload => ({\n    payload\n  })),\n  deleteSSODomain: createAction(`${authStoreName}/deleteSSODomain`, payload => ({\n    payload\n  })),\n  validateSSODomainV2: createAction(`${authStoreName}/validateSSODomainV2`, payload => ({\n    payload\n  })),\n  setSSODefaultRoles: createAction(`${authStoreName}/setSSODefaultRoles`, payload => ({\n    payload\n  })),\n  setSSOGroups: createAction(`${authStoreName}/setSSOGroups`, payload => ({\n    payload\n  })),\n  updateSSOGroups: createAction(`${authStoreName}/updateSSOGroups`, payload => ({\n    payload\n  })),\n  saveSSOConfigurationByMetadata: createAction(`${authStoreName}/saveSSOConfigurationByMetadata`, payload => ({\n    payload\n  })),\n  updateSSOConfigurationByMetadata: createAction(`${authStoreName}/updateSSOConfigurationByMetadata`, payload => ({\n    payload\n  })),\n  loadSSOConfigurations: createAction(`${authStoreName}/loadSSOConfigurations`),\n  loadSSOAuthorizationRoles: createAction(`${authStoreName}/loadSSOAuthorizationRoles`),\n  saveSSOConfigurations: createAction(`${authStoreName}/saveSSOConfigurations`, payload => ({\n    payload\n  })),\n  // NOTE: use withCallback in case of promise response\n  saveSSOConfigurationsFile: createAction(`${authStoreName}/saveSSOConfigurationsFile`, payload => ({\n    payload\n  })),\n  saveSSOConfigurationsFileWithCallback: createAction(`${authStoreName}/saveSSOConfigurationsFileWithCallback`, payload => ({\n    payload\n  })),\n  validateSSODomain: createAction(`${authStoreName}/validateSSODomain`, payload => ({\n    payload\n  })),\n  updateSSOAuthorizationRoles: createAction(`${authStoreName}/updateSSOAuthorizationRoles`, payload => ({\n    payload\n  })),\n  deleteSamlGroup: createAction(`${authStoreName}/deleteSamlGroup`, payload => ({\n    payload\n  })),\n  createSamlGroup: createAction(`${authStoreName}/createSamlGroup`, payload => ({\n    payload\n  })),\n  oidcPostlogin: createAction(`${authStoreName}/oidcPostlogin`, payload => ({\n    payload\n  }))\n};\nconst profileState = {\n  loading: false,\n  error: null\n};\nconst reducers$b = {\n  setProfileState: typeReducerForKey('profileState'),\n  resetProfileState: resetStateByKey('profileState', {\n    profileState\n  })\n};\nconst actions$c = {\n  loadProfile: createAction(`${authStoreName}/loadProfile`),\n  saveProfile: createAction(`${authStoreName}/saveProfile`, payload => ({\n    payload\n  })),\n  changePassword: createAction(`${authStoreName}/changePassword`, payload => ({\n    payload\n  }))\n};\nvar MFAStep;\n\n(function (MFAStep) {\n  MFAStep[\"verify\"] = \"verify\";\n  MFAStep[\"recoveryCode\"] = \"recoveryCode\";\n})(MFAStep || (MFAStep = {}));\n\nconst mfaState = {\n  step: MFAStep.verify,\n  loading: false\n};\nconst reducers$a = {\n  setMfaState: typeReducerForKey('mfaState'),\n  resetMfaState: resetStateByKey('mfaState', {\n    mfaState\n  })\n};\nconst actions$b = {\n  enrollMfa: createAction(`${authStoreName}/enrollMfa`),\n  verifyMfa: createAction(`${authStoreName}/verifyMfa`, payload => ({\n    payload\n  })),\n  verifyMfaAfterForce: createAction(`${authStoreName}/verifyMfaAfterForce`, payload => ({\n    payload\n  })),\n  disableMfa: createAction(`${authStoreName}/disableMfa`, payload => ({\n    payload\n  }))\n};\nconst teamState = {\n  loaders: {},\n  pageOffset: 0,\n  pageSize: 20,\n  errors: {},\n  users: [],\n  allUsers: [],\n  roles: [],\n  permissions: [],\n  totalPages: 0,\n  filter: [],\n  sort: [],\n  allUsersQueryParams: {\n    _filter: null,\n    _offset: 0,\n    _limit: 20,\n    _order: 'DESC',\n    _sortBy: 'name'\n  },\n  addUserDialogState: {\n    loading: false,\n    open: false\n  },\n  deleteUserDialogState: {\n    loading: false,\n    open: false\n  },\n  lockUserDialogState: {\n    loading: false,\n    open: false\n  }\n};\nconst reducers$9 = {\n  setTeamLoader: loadersReducerForKey('teamState'),\n  setTeamError: errorsReducerForKey('teamState'),\n  setTeamState: typeReducerForKey('teamState'),\n  resetTeamState: resetStateByKey('teamState', {\n    teamState\n  })\n};\nconst actions$a = {\n  loadUsers: createAction(`${authStoreName}/loadUsers`, payload => ({\n    payload\n  })),\n  loadAllSubTenantsUsers: createAction(`${authStoreName}/loadAllSubTenantsUsers`, payload => ({\n    payload\n  })),\n  loadRoles: createAction(`${authStoreName}/loadRoles`, payload => ({\n    payload\n  })),\n  addUser: createAction(`${authStoreName}/addUser`, payload => ({\n    payload\n  })),\n  addUserToSubTenants: createAction(`${authStoreName}/addUserToSubTenants`, payload => ({\n    payload\n  })),\n  updateUser: createAction(`${authStoreName}/updateUser`, payload => ({\n    payload\n  })),\n  deleteUser: createAction(`${authStoreName}/deleteUser`, payload => ({\n    payload\n  })),\n  setUserRolesForSubTenants: createAction(`${authStoreName}/setUserRolesForSubTenants`, payload => ({\n    payload\n  })),\n  deleteUserFromSubTenants: createAction(`${authStoreName}/deleteUserFromSubTenants`, payload => ({\n    payload\n  })),\n  lockUser: createAction(`${authStoreName}/lockUser`, payload => ({\n    payload\n  })),\n  resendActivationLink: createAction(`${authStoreName}/resendActivationLink`, payload => ({\n    payload\n  })),\n  resendInvitationLink: createAction(`${authStoreName}/resendInvitationLink`, payload => ({\n    payload\n  })),\n  resendInvitationLinkToAllSubTenants: createAction(`${authStoreName}/resendInvitationLinkToAllSubTenants`, payload => ({\n    payload\n  })),\n  getInvitationLink: createAction(`${authStoreName}/getInvitationLink`),\n  createInvitationLink: createAction(`${authStoreName}/createInvitationLink`, payload => ({\n    payload\n  })),\n  updateInvitationLink: createAction(`${authStoreName}/updateInvitationLink`, payload => ({\n    payload\n  })),\n  deleteInvitationLink: createAction(`${authStoreName}/deleteInvitationLink`, payload => ({\n    payload\n  })),\n  openAddUserDialog: createAction(`${authStoreName}/openAddUserDialog`, payload => ({\n    payload\n  })),\n  closeAddUserDialog: createAction(`${authStoreName}/closeAddUserDialog`, payload => ({\n    payload\n  })),\n  openDeleteUserDialog: createAction(`${authStoreName}/openDeleteUserDialog`, payload => ({\n    payload\n  })),\n  closeDeleteUserDialog: createAction(`${authStoreName}/closeDeleteUserDialog`, payload => ({\n    payload\n  })),\n  openLockUserDialog: createAction(`${authStoreName}/openLockUserDialog`, payload => ({\n    payload\n  })),\n  closeLockUserDialog: createAction(`${authStoreName}/closeLockUserDialog`, payload => ({\n    payload\n  }))\n};\nconst socialLoginState = {\n  firstLoad: true,\n  loading: false,\n  error: ''\n};\nconst reducers$8 = {\n  setSocialLoginsState: typeReducerForKey('socialLoginState'),\n  resetSocialLoginsState: resetStateByKey('socialLoginState', {\n    socialLoginState\n  })\n};\nconst actions$9 = {\n  loadSocialLoginsConfiguration: createAction(`${authStoreName}/loadSocialLoginsConfiguration`),\n  loadSocialLoginsConfigurationV2: createAction(`${authStoreName}/loadSocialLoginsConfigurationV2`),\n  loginViaSocialLogin: createAction(`${authStoreName}/loginViaSocialLogin`, payload => ({\n    payload\n  })),\n  setSocialLoginError: createAction(`${authStoreName}/setSocialLoginError`, payload => ({\n    payload\n  }))\n};\nvar SignUpStage;\n\n(function (SignUpStage) {\n  SignUpStage[\"SignUp\"] = \"SignUp\";\n  SignUpStage[\"SignUpSuccess\"] = \"SignUpSuccess\";\n})(SignUpStage || (SignUpStage = {}));\n\nconst signUpState = {\n  loading: false,\n  allowSignUps: false,\n  allowNotVerifiedUsersLogin: false,\n  firstLoad: true,\n  stage: SignUpStage.SignUp\n};\nconst reducers$7 = {\n  setSignUpState: typeReducerForKey('signUpState'),\n  resetSignUpState: resetStateByKey('signUpState', {\n    signUpState\n  })\n};\nconst actions$8 = {\n  signUpUser: createAction(`${authStoreName}/signUpUser`, payload => ({\n    payload\n  })),\n  resetSignUpStateSoft: createAction(`${authStoreName}/resetSignUpStateSoft`)\n};\nconst apiTokensState = {\n  apiTokenType: null,\n  searchValue: '',\n  showAddTokenDialog: false,\n  createdByUserIdColumn: 'show',\n  deleteTokenDialog: {\n    open: false,\n    clientId: ''\n  },\n  successDialog: {\n    open: false,\n    secret: '',\n    clientId: ''\n  },\n  loaders: {},\n  apiTokensDataTenant: [],\n  apiTokensDataUser: [],\n  roles: [],\n  permissions: [],\n  errors: {}\n};\nconst reducers$6 = {\n  setApiTokensLoader: loadersReducerForKey('apiTokensState'),\n  setApiTokensError: errorsReducerForKey('apiTokensState'),\n  setApiTokensState: typeReducerForKey('apiTokensState'),\n  resetApiTokensState: resetStateByKey('apiTokensState', {\n    apiTokensState\n  })\n};\nconst actions$7 = {\n  loadApiTokens: createAction(`${authStoreName}/loadApiTokens`, payload => ({\n    payload\n  })),\n  initApiTokensData: createAction(`${authStoreName}/initApiTokensData`, payload => ({\n    payload\n  })),\n  addTenantApiToken: createAction(`${authStoreName}/addTenantApiToken`, payload => ({\n    payload\n  })),\n  addUserApiToken: createAction(`${authStoreName}/addUserApiToken`, payload => ({\n    payload\n  })),\n  deleteUserApiToken: createAction(`${authStoreName}/deleteUserApiToken`, payload => ({\n    payload\n  })),\n  deleteTenantApiToken: createAction(`${authStoreName}/deleteTenantApiToken`, payload => ({\n    payload\n  }))\n};\nconst securityPolicyState = {\n  globalPolicy: {\n    loading: true\n  },\n  publicPolicy: {\n    loading: false\n  },\n  vendorMfaPolicy: {\n    loading: true\n  },\n  mfaPolicy: {\n    loading: true\n  },\n  lockoutPolicy: {\n    loading: true\n  },\n  captchaPolicy: {\n    loading: true\n  },\n  passwordHistoryPolicy: {\n    loading: true\n  },\n  passwordPolicy: {\n    loading: true\n  },\n  publicAuthStrategyPolicy: {\n    loading: true\n  }\n};\nconst reducers$5 = {\n  setSecurityPolicyState: typeReducerForKey('securityPolicyState'),\n  setSecurityPolicyGlobalState: typeReducerNestedKey('securityPolicyState', 'globalPolicy'),\n  setSecurityPolicyPublicState: typeReducerNestedKey('securityPolicyState', 'publicPolicy'),\n  setSecurityPolicyAuthStrategyPublicState: typeReducerNestedKey('securityPolicyState', 'publicAuthStrategyPolicy'),\n  setSecurityPolicyMfaState: typeReducerNestedKey('securityPolicyState', 'mfaPolicy'),\n  setSecurityPolicyVendorMfaState: typeReducerNestedKey('securityPolicyState', 'vendorMfaPolicy'),\n  setSecurityPolicyLockoutState: typeReducerNestedKey('securityPolicyState', 'lockoutPolicy'),\n  setSecurityPolicyCaptchaState: typeReducerNestedKey('securityPolicyState', 'captchaPolicy'),\n  setSecurityPolicyPasswordHistoryState: typeReducerNestedKey('securityPolicyState', 'passwordHistoryPolicy'),\n  setSecurityPolicyPasswordState: typeReducerNestedKey('securityPolicyState', 'passwordPolicy'),\n  resetSecurityPolicyState: resetStateByKey('securityPolicyState', {\n    securityPolicyState\n  })\n};\nconst actions$6 = {\n  loadSecurityPolicy: createAction(`${authStoreName}/loadSecurityPolicy`),\n  loadPublicSecurityPolicy: createAction(`${authStoreName}/loadPublicSecurityPolicy`),\n  loadSecurityPolicyMfa: createAction(`${authStoreName}/loadSecurityPolicyMfa`),\n  loadSecurityPolicyVendorMfa: createAction(`${authStoreName}/loadSecurityPolicyVendorMfa`),\n  saveSecurityPolicyMfa: createAction(`${authStoreName}/saveSecurityPolicyMfa`, payload => ({\n    payload\n  })),\n  loadSecurityPolicyLockout: createAction(`${authStoreName}/loadSecurityPolicyLockout`),\n  saveSecurityPolicyLockout: createAction(`${authStoreName}/saveSecurityPolicyLockout`, payload => ({\n    payload\n  })),\n  loadSecurityPolicyCaptcha: createAction(`${authStoreName}/loadSecurityPolicyCaptcha`),\n  loadSecurityPolicyPasswordHistory: createAction(`${authStoreName}/loadSecurityPolicyPasswordHistory`),\n  saveSecurityPolicyPasswordHistory: createAction(`${authStoreName}/saveSecurityPolicyPasswordHistory`, payload => ({\n    payload\n  })),\n  loadVendorPasswordConfig: createAction(`${authStoreName}/loadVendorPasswordConfig`),\n  loadPublicAuthStrategiesPolicy: createAction(`${authStoreName}/loadPublicAuthStrategiesPolicy`)\n};\nconst accountSettingsState = {\n  loading: false\n};\nconst reducers$4 = {\n  setAccountSettingsState: typeReducerForKey('accountSettingsState'),\n  resetAccountSettingsState: resetStateByKey('accountSettingsState', {\n    accountSettingsState\n  })\n};\nconst actions$5 = {\n  loadAccountSettings: createAction(`${authStoreName}/loadAccountSettings`, payload => ({\n    payload\n  })),\n  saveAccountSettings: createAction(`${authStoreName}/saveAccountSettings`, payload => ({\n    payload\n  }))\n};\nconst tenantsState = {\n  tenants: [],\n  subTenants: [],\n  loading: true,\n  tenantTree: null\n};\nconst reducers$3 = {\n  setTenantsState: typeReducerForKey('tenantsState'),\n  resetTenantsState: resetStateByKey('tenantsState', {\n    tenantsState\n  })\n};\nconst actions$4 = {\n  switchTenant: createAction(`${authStoreName}/switchTenant`, payload => ({\n    payload\n  })),\n  loadTenants: createAction(`${authStoreName}/loadTenants`, payload => ({\n    payload\n  })),\n  loadSubTenants: createAction(`${authStoreName}/loadSubTenants`, payload => ({\n    payload\n  })),\n  loadSubTenantsTree: createAction(`${authStoreName}/loadSubTenantsTree`, payload => ({\n    payload\n  }))\n};\nconst rolesState = {\n  loading: false,\n  roles: [],\n  permissions: [],\n  permissionCategories: []\n};\nconst reducers$2 = {\n  setRolesState: typeReducerForKey('rolesState'),\n  resetRolesState: resetStateByKey('rolesState', {\n    rolesState\n  })\n};\nconst actions$3 = {\n  loadRolesAndPermissions: createAction(`${authStoreName}/loadRoles`, payload => ({\n    payload\n  })),\n  addRole: createAction(`${authStoreName}/addRole`, payload => ({\n    payload\n  })),\n  updateRole: createAction(`${authStoreName}/updateRole`, payload => ({\n    payload\n  })),\n  deleteRole: createAction(`${authStoreName}/deleteRole`, payload => ({\n    payload\n  })),\n  attachPermissionsToRole: createAction(`${authStoreName}/attachPermissionsToRole`, payload => ({\n    payload\n  })),\n  attachPermissionToRoles: createAction(`${authStoreName}/attachPermissionToRoles`, payload => ({\n    payload\n  }))\n};\nconst sessionsState = {\n  loading: false,\n  sessions: []\n};\nconst reducers$1 = {\n  setSessionsState: typeReducerForKey('sessionsState'),\n  resetSessionsState: resetStateByKey('sessionsState', {\n    sessionsState\n  })\n};\nconst actions$2 = {\n  loadUserSessions: createAction(`${authStoreName}/loadUserSessions`),\n  loadCurrentUserSession: createAction(`${authStoreName}/loadCurrentUserSession`),\n  deleteUserSession: createAction(`${authStoreName}/deleteUserSession`, payload => ({\n    payload\n  })),\n  deleteAllUserSessions: createAction(`${authStoreName}/deleteAllUserSessions`),\n  revokeUserSessions: createAction(`${authStoreName}/revokeUserSessions`, payload => ({\n    payload\n  }))\n};\nconst sessionsPolicyState = {\n  loading: false,\n  configurations: {}\n};\nconst reducers = {\n  setSessionsPolicyState: typeReducerForKey('sessionsPolicyState'),\n  resetSessionsPolicyState: resetStateByKey('sessionsPolicyState', {\n    sessionsPolicyState\n  })\n};\nconst actions$1 = {\n  loadSessionsPolicy: createAction(`${authStoreName}/loadSessionsPolicy`),\n  createOrUpdateSessionsPolicy: createAction(`${authStoreName}/createOrUpdateSessionsPolicy`, payload => ({\n    payload\n  }))\n};\nconst reinitializeState = {\n  isAuthenticated: false,\n  isLoading: true,\n  isSSOAuth: false,\n  user: null,\n  signUpState,\n  loginState,\n  activateState,\n  acceptInvitationState,\n  forgotPasswordState,\n  ssoState,\n  profileState,\n  mfaState,\n  teamState,\n  socialLoginState,\n  apiTokensState,\n  securityPolicyState,\n  accountSettingsState,\n  tenantsState,\n  rolesState,\n  resetPhoneNumberState,\n  sessionsState,\n  sessionsPolicyState\n};\nconst initialState = Object.assign({\n  routes: {\n    authenticatedUrl: '/',\n    loginUrl: '/account/login',\n    logoutUrl: '/account/logout',\n    activateUrl: '/account/activate',\n    acceptInvitationUrl: '/account/invitation/accept',\n    forgetPasswordUrl: '/account/forget-password',\n    resetPhoneNumberUrl: '/account/reset-phone-number',\n    resetPasswordUrl: '/account/reset-password',\n    socialLoginCallbackUrl: '/account/social/success',\n    signUpUrl: '/account/sign-up',\n    oidcRedirectUrl: '/account/oidc/callback',\n    samlCallbackUrl: '/account/saml/callback',\n    magicLinkCallbackUrl: '/account/login/magic-link',\n    hostedLoginRedirectUrl: '/oauth/callback'\n  },\n  onRedirectTo: () => {}\n}, reinitializeState);\nconst {\n  reducer,\n  actions: sliceActions\n} = createSlice({\n  name: authStoreName,\n  initialState,\n  reducers: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({\n    resetState: state => Object.assign(Object.assign({}, state), reinitializeState),\n    setState: (state, {\n      payload\n    }) => Object.assign(Object.assign({}, state), payload),\n    setUser: typeReducer('user')\n  }, reducers$h), reducers$8), reducers$g), reducers$f), reducers$e), reducers$d), reducers$7), reducers$b), reducers$c), reducers$a), reducers$9), reducers$6), reducers$5), reducers$4), reducers$3), reducers$2), reducers$1), reducers)\n});\nconst actions = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, sliceActions), actions$i), actions$9), actions$h), actions$g), actions$f), actions$e), actions$8), actions$c), actions$d), actions$b), actions$a), actions$7), actions$6), actions$5), actions$4), actions$3), actions$2), actions$1);\nvar SSOStateKeys;\n\n(function (SSOStateKeys) {\n  SSOStateKeys[\"LOAD_SSO_CONFIGURATIONS\"] = \"LOAD_SSO_CONFIGURATIONS\";\n  SSOStateKeys[\"SAVE_SSO_CONFIGURATION\"] = \"SAVE_SSO_CONFIGURATION\";\n  SSOStateKeys[\"UPDATE_SSO_CONFIGURATION\"] = \"UPDATE_SSO_CONFIGURATION\";\n  SSOStateKeys[\"SAVE_SSO_CONFIGURATION_BY_METADATA\"] = \"SAVE_SSO_CONFIGURATION_BY_METADATA\";\n  SSOStateKeys[\"UPDATE_SSO_CONFIGURATION_BY_METADATA\"] = \"UPDATE_SSO_CONFIGURATION\";\n  SSOStateKeys[\"DELETE_SSO_CONFIGURATION\"] = \"DELETE_SSO_CONFIGURATION\";\n  SSOStateKeys[\"SAVE_SSO_DOMAIN\"] = \"SAVE_SSO_DOMAIN\";\n  SSOStateKeys[\"DELETE_SSO_DOMAIN\"] = \"DELETE_SSO_DOMAIN\";\n  SSOStateKeys[\"VALIDATE_SSO_DOMAIN\"] = \"VALIDATE_SSO_DOMAIN\";\n  SSOStateKeys[\"UPDATE_SSO_DEFAULT_ROLES\"] = \"UPDATE_SSO_DEFAULT_ROLES\";\n  SSOStateKeys[\"DELETE_SSO_GROUPS\"] = \"DELETE_SSO_GROUPS\";\n  SSOStateKeys[\"SAVE_SSO_GROUPS\"] = \"SAVE_SSO_GROUPS\";\n  SSOStateKeys[\"GET_SSO_AUTHORIZATION_ROLES\"] = \"GET_SSO_AUTHORIZATION_ROLES\";\n})(SSOStateKeys || (SSOStateKeys = {}));\n\nvar SamlVendors;\n\n(function (SamlVendors) {\n  SamlVendors[\"Saml\"] = \"saml\";\n  SamlVendors[\"Okta\"] = \"okta\";\n  SamlVendors[\"Azure\"] = \"azure\";\n  SamlVendors[\"Google\"] = \"google\";\n  SamlVendors[\"Oidc\"] = \"oidc\";\n})(SamlVendors || (SamlVendors = {}));\n\nfunction omitProps(props, keys) {\n  const newProps = Object.assign({}, props);\n  keys.forEach(key => {\n    delete newProps[key];\n  });\n  return newProps;\n}\n\nfunction generateCodeChallenge(codeVerifier) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const digest = yield crypto.subtle.digest('SHA-256', new TextEncoder().encode(codeVerifier)); // @ts-ignore\n\n    return btoa(String.fromCharCode(...new Uint8Array(digest))).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n  });\n}\n\nfunction createRandomString(length = 16) {\n  let text = '';\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  for (let i = 0; i < length; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n\n  return text;\n}\n\nconst readFileAsText = file => new Promise((resolve, reject) => {\n  const reader = new FileReader();\n  reader.readAsText(file);\n\n  reader.onload = () => resolve(reader.result);\n\n  reader.onerror = reject;\n});\n\nconst apiTokensDataDemo = {\n  clientId: 'CLIENT_ID_16806d3d-8fc3-4450-be97-abdaf66b723e',\n  secret: 'SECRET_16806d3d-8fc3-4450-be97-abdaf66b723e',\n  createdAt: 'createdAt',\n  description: 'Demo API Token (preview only)'\n};\nconst apiTokensDataTenantDemo = Object.assign(Object.assign({}, apiTokensDataDemo), {\n  roleIds: [],\n  tenantId: 'my-tenant-id',\n  createdByUserId: 'createdByUserId'\n});\nconst roleDemo = [{\n  id: 'roleId',\n  key: 'admin',\n  isDefault: false,\n  name: 'Admin',\n  description: null,\n  permissions: ['adminPermissionId'],\n  tenantId: 'tenantId',\n  vendorId: 'vendorId',\n  createdAt: new Date(),\n  updatedAt: new Date()\n}];\nconst rolePermissionDemo = [{\n  id: 'adminPermissionId',\n  key: 'fe.*',\n  name: 'General Admin',\n  description: undefined,\n  categoryId: 'category',\n  fePermission: true,\n  createdAt: new Date(),\n  updatedAt: new Date()\n}];\nconst userProfileDemo = {\n  id: 'testId',\n  name: 'Demo User Name',\n  email: 'demo-user@frontegg.com',\n  mfaEnrolled: true,\n  profileImage: undefined,\n  profilePictureUrl: 'https://www.gravatar.com/avatar/42b2ad2bad6fc9b9db5086dfcf8072ac?d=https://ui-avatars.com/api/fe/128/random?t=1617261890875?t=1617261917434',\n  roles: roleDemo,\n  permissions: rolePermissionDemo,\n  tenantId: 'my-tenant-id',\n  tenantIds: ['my-tenant-id'],\n  activatedForTenant: true,\n  metadata: JSON.stringify({\n    phoneNumber: '+972-54123456',\n    jobTitle: 'Developer',\n    address: {\n      city: 'Tel Aviv',\n      country: 'Israel'\n    }\n  }),\n  roleIds: undefined,\n  verified: undefined\n};\nconst userDemo = Object.assign(Object.assign({}, userProfileDemo), {\n  accessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MTY5YmY0Zi02YmI5LTQ5NGMtOGNkZS05MDc4NDQ0NWY4MDciLCJuYW1lIjoiRHVtbXkgVXNlciIsImVtYWlsIjoiZHVtbXlAZnJvbnRlZ2cuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm1ldGFkYXRhIjp7fSwicm9sZXMiOlsiYWRtaW4iXSwicGVybWlzc2lvbnMiOlsiZmUuKiJdLCJ0ZW5hbnRJZCI6Im15LXRlbmFudC1pZCIsInRlbmFudElkcyI6WyJteS10ZW5hbnQtaWQiXSwicHJvZmlsZVBpY3R1cmVVcmwiOiJodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLzQyYjJhZDJiYWQ2ZmM5YjlkYjUwODZkZmNmODA3MmFjP2Q9aHR0cHM6Ly91aS1hdmF0YXJzLmNvbS9hcGkvZmUvMTI4L3JhbmRvbT90PTE2MTcyNjE4OTA4NzU_dD0xNjE3MjYxOTE3NDM0IiwidHlwZSI6InVzZXJUb2tlbiIsImlhdCI6MTYxNzkwNjMyNCwiZXhwIjoxNjE3OTkyNzI0LCJpc3MiOiJmcm9udGVnZyJ9.paaXLkpWEWbQmUtoK2P8IwXCxK4WJp7XhXonvzF8g1I',\n  expiresIn: 86400,\n  mfaRequired: false,\n  refreshToken: 'refresh-token-dummy-de39dc9c-9d22-4852-b7f5-c3c0aa613b58',\n  type: 'userToken',\n  iat: 1617906324,\n  exp: 1617992724,\n  iss: 'frontegg',\n  email_verified: true\n});\nconst profileStateDemo = {\n  loading: false,\n  error: undefined,\n  saving: true,\n  profile: userProfileDemo\n};\nconst policyDemo = {\n  id: 'id',\n  enforceMFAType: 'DontForce',\n  createdAt: new Date(),\n  updatedAt: new Date(),\n  allowOverrideEnforcePasswordHistory: true,\n  allowOverridePasswordComplexity: false,\n  allowOverridePasswordExpiration: false,\n  allowSignups: true,\n  apiTokensEnabled: true,\n  cookieSameSite: 'cookieSameSite',\n  defaultRefreshTokenExpiration: 0,\n  defaultTokenExpiration: 1,\n  publicKey: 'publicKey'\n};\nconst publicSecurityPolicy = {\n  allowSignups: true,\n  allowNotVerifiedUsersLogin: false,\n  apiTokensEnabled: true,\n  forcePermissions: false,\n  authStrategy: AuthStrategyEnum.EmailAndPassword\n};\nconst policyMfaDemo = {\n  id: 'id',\n  enforceMFAType: 'DontForce',\n  createdAt: new Date(),\n  updatedAt: new Date()\n};\nconst policyLockoutDemo = {\n  id: 'id',\n  enabled: true,\n  maxAttempts: 1,\n  createdAt: new Date(),\n  updatedAt: new Date()\n};\nconst policyPasswordHistoryDemo = {\n  id: 'id',\n  enabled: true,\n  historySize: 1,\n  createdAt: new Date(),\n  updatedAt: new Date()\n};\nconst samlConfigurationDemo = {\n  enabled: true,\n  domain: 'domain',\n  validated: true,\n  generatedVerification: 'generatedVerification',\n  ssoEndpoint: 'ssoEndpoint',\n  publicCertificate: 'publicCertificate',\n  signRequest: true,\n  createdAt: new Date(),\n  updatedAt: new Date(),\n  acsUrl: undefined,\n  spEntityId: undefined,\n  oidcClientId: undefined,\n  oidcSecret: undefined,\n  type: undefined\n};\nconst samlMetadataDemo = {\n  id: 'id',\n  createdAt: 'createdAt',\n  updatedAt: 'updatedAt',\n  properties: [],\n  vendorId: 'vendorId',\n  entityName: 'saml',\n  isActive: true,\n  configuration: {\n    acsUrl: 'acsUrl',\n    spEntityId: 'spEntityId'\n  }\n};\nconst rolesDemo = [{\n  id: 'id',\n  description: 'description',\n  key: 'key',\n  name: 'name',\n  permissions: [],\n  permissionLevel: 1\n}];\nconst ssoStateDemo = {\n  firstLoad: false,\n  loading: false,\n  error: undefined,\n  saving: false,\n  samlConfiguration: samlConfigurationDemo,\n  roles: rolesDemo,\n  authorizationRoles: [],\n  errors: {},\n  loaders: {},\n  ssoConfigurations: []\n};\nconst permissionsDemo = [{\n  description: 'string',\n  fePermission: true,\n  id: 'id',\n  key: 'key',\n  name: 'name',\n  roleIds: [],\n  createdAt: new Date(),\n  updatedAt: new Date(),\n  categoryId: 'categoryId'\n}];\nconst userTeamDemo2 = {\n  id: 'id2',\n  email: 'demo-user2@frontegg.com',\n  name: 'Demo User Name2',\n  phone: undefined,\n  profileImage: undefined,\n  profileImageUrl: undefined,\n  tenantId: 'tenantId',\n  vendorId: 'vendorId',\n  roleIds: [],\n  activatedForTenant: true,\n  verified: false,\n  createdAt: new Date().toISOString(),\n  customData: undefined,\n  lastLogin: undefined,\n  mfaEnabled: undefined,\n  roles: []\n}; // TODO add verified to ITeamUser\n\nconst userTeamDemo = {\n  id: 'id',\n  email: 'demo-user@frontegg.com',\n  name: 'Demo User Name',\n  phone: undefined,\n  profileImage: undefined,\n  profileImageUrl: undefined,\n  tenantId: 'tenantId',\n  vendorId: 'vendorId',\n  roleIds: [],\n  activatedForTenant: true,\n  createdAt: new Date(2022, 4, 1).toISOString(),\n  verified: true,\n  customData: undefined,\n  lastLogin: new Date(2022, 5, 25).toISOString(),\n  mfaEnabled: undefined,\n  roles: []\n};\nconst userSubTenantDemo = {\n  metadata: '',\n  mfaEnrolled: false,\n  provider: '',\n  sub: '',\n  tenantIds: [],\n  tenants: [],\n  verified: false,\n  id: 'id',\n  email: 'email',\n  name: 'name',\n  tenantId: 'tenantId',\n  createdAt: new Date()\n};\nconst usersDemo = [userTeamDemo, userTeamDemo2];\nconst allUsersDemo = [userSubTenantDemo];\nconst tenantsDemo = [{\n  id: 'my-tenant-id',\n  isReseller: false,\n  name: 'Frontegg demo',\n  deletedAt: null,\n  metadata: undefined,\n  tenantId: 'my-tenant-id',\n  vendorId: 'vendorId',\n  createdAt: new Date(),\n  updatedAt: new Date(),\n  address: undefined,\n  timezone: undefined,\n  dateFormat: undefined,\n  timeFormat: undefined,\n  currency: undefined,\n  logo: undefined\n}];\nconst sessionsMock = [{\n  id: `laptop`,\n  userAgent: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15\",\n  createdAt: new Date(),\n  ipAddress: \"190.194.88.251\",\n  current: true\n}, {\n  id: `iphone`,\n  userAgent: \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_2_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.2 Mobile/15E148 Safari/604.1\",\n  createdAt: new Date(Date.now() - 10000),\n  ipAddress: \"191.49.203.21\"\n}, {\n  id: `tablet`,\n  userAgent: \"Mozilla/5.0 (Linux; Android 6.0.1; SGP771 Build/32.2.A.0.253; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/52.0.2743.98 Safari/537.36\",\n  createdAt: new Date(Date.now() - 30000),\n  ipAddress: \"130.19.196.136\"\n}, {\n  id: `anotherlaptop`,\n  userAgent: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15\",\n  createdAt: new Date(Date.now() - 1002232300),\n  ipAddress: \"2.228.163.92\"\n}];\nconst sessionsConfigDummies = {\n  sessionConcurrentConfiguration: {\n    isActive: true,\n    maxSessions: 10\n  },\n  sessionIdleTimeoutConfiguration: {\n    isActive: true,\n    timeout: 300\n  },\n  sessionTimeoutConfiguration: {\n    isActive: true,\n    timeout: 86400\n  }\n};\nvar UserVeirifedOriginTypes;\n\n(function (UserVeirifedOriginTypes) {\n  UserVeirifedOriginTypes[\"SOCIAL_LOGIN\"] = \"SOCIAL_LOGIN\";\n  UserVeirifedOriginTypes[\"PASSWORDLESS\"] = \"PASSWORDLESS\";\n  UserVeirifedOriginTypes[\"ACTIVATION_LINK\"] = \"ACTIVATION_LINK\";\n})(UserVeirifedOriginTypes || (UserVeirifedOriginTypes = {}));\n\nvar AuthenticationTypes;\n\n(function (AuthenticationTypes) {\n  AuthenticationTypes[\"SOCIAL_LOGIN\"] = \"SOCIAL_LOGIN\";\n  AuthenticationTypes[\"PASSWORD\"] = \"PASSWORD\";\n})(AuthenticationTypes || (AuthenticationTypes = {}));\n\nvar AdminPortalPagesForEvents;\n\n(function (AdminPortalPagesForEvents) {\n  AdminPortalPagesForEvents[\"profile\"] = \"profile\";\n  AdminPortalPagesForEvents[\"privacy\"] = \"privacy\";\n  AdminPortalPagesForEvents[\"personalApiTokens\"] = \"personalApiTokens\";\n  AdminPortalPagesForEvents[\"account\"] = \"account\";\n  AdminPortalPagesForEvents[\"users\"] = \"users\";\n  AdminPortalPagesForEvents[\"security\"] = \"security\";\n  AdminPortalPagesForEvents[\"sso\"] = \"sso\";\n  AdminPortalPagesForEvents[\"audits\"] = \"audits\";\n  AdminPortalPagesForEvents[\"webhooks\"] = \"webhooks\";\n  AdminPortalPagesForEvents[\"apiTokens\"] = \"apiTokens\";\n  AdminPortalPagesForEvents[\"roles\"] = \"roles\";\n  AdminPortalPagesForEvents[\"subscriptions\"] = \"subscription\";\n})(AdminPortalPagesForEvents || (AdminPortalPagesForEvents = {}));\n\nconst AdminPortalPages = {\n  profile: AdminPortalPagesForEvents.profile,\n  privacy: AdminPortalPagesForEvents.privacy,\n  personalApiTokens: AdminPortalPagesForEvents.personalApiTokens,\n  account: AdminPortalPagesForEvents.account,\n  users: AdminPortalPagesForEvents.users,\n  security: AdminPortalPagesForEvents.security,\n  sso: AdminPortalPagesForEvents.sso,\n  audits: AdminPortalPagesForEvents.audits,\n  webhooks: AdminPortalPagesForEvents.webhooks,\n  apiTokens: AdminPortalPagesForEvents.apiTokens,\n  roles: AdminPortalPagesForEvents.roles,\n  subscriptions: AdminPortalPagesForEvents.subscriptions\n};\n\nfunction* loadAllowSignUps() {\n  yield put(actions.setSignUpState({\n    loading: true\n  }));\n\n  try {\n    const policy = yield call(api.auth.getVendorConfig);\n    const {\n      allowSignups: allowSignUps,\n      allowNotVerifiedUsersLogin\n    } = policy;\n    yield put(actions.setSignUpState({\n      loading: false,\n      allowSignUps,\n      allowNotVerifiedUsersLogin,\n      firstLoad: false\n    }));\n    yield put(actions.setSecurityPolicyPublicState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSignUpState({\n      loading: false,\n      error: e.message,\n      firstLoad: false\n    }));\n  }\n}\n\nfunction* signUpUser(_a) {\n  var _b;\n\n  var _c = _a.payload,\n      {\n    events,\n    url\n  } = _c,\n      payload = __rest(_c, [\"events\", \"url\"]);\n\n  yield put(actions.setSignUpState({\n    loading: true\n  }));\n\n  try {\n    const {\n      routes,\n      onRedirectTo\n    } = yield select(state => state.auth);\n    const {\n      shouldActivate,\n      user,\n      tenantId,\n      userId\n    } = yield call(api.auth.signUpUser, payload);\n\n    if (!payload.invitationToken) {\n      const {\n        email,\n        name,\n        companyName\n      } = payload;\n      (_b = events === null || events === void 0 ? void 0 : events.signUpComplete) === null || _b === void 0 ? void 0 : _b.call(events, {\n        email,\n        name,\n        companyName,\n        url,\n        authenticationType: AuthenticationTypes.PASSWORD,\n        id: userId,\n        tenantId,\n        createdAt: new Date()\n      });\n    }\n\n    ContextHolder.setAccessToken(user === null || user === void 0 ? void 0 : user.accessToken);\n    ContextHolder.setUser(user);\n\n    if (!shouldActivate && (user === null || user === void 0 ? void 0 : user.mfaRequired) && (user === null || user === void 0 ? void 0 : user.mfaToken)) {\n      let step = LoginStep.loginWithTwoFactor;\n\n      if (user.hasOwnProperty('mfaEnrolled') && !user.mfaEnrolled) {\n        yield put(actions.setMfaState({\n          step: MFAStep.verify,\n          qrCode: user.qrCode,\n          recoveryCode: user.recoveryCode,\n          mfaToken: user.mfaToken,\n          loading: false\n        }));\n        step = LoginStep.forceTwoFactor;\n      }\n\n      yield put(actions.setLoginState({\n        step\n      }));\n      onRedirectTo(routes.loginUrl);\n    } else {\n      yield put(actions.setSignUpState({\n        loading: false,\n        shouldActivate,\n        stage: SignUpStage.SignUpSuccess\n      }));\n      yield put(actions.setState({\n        user,\n        isAuthenticated: !!(user === null || user === void 0 ? void 0 : user.accessToken)\n      }));\n\n      if (!shouldActivate) {\n        yield put(actions.loadTenants());\n      }\n    }\n  } catch (e) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    yield put(actions.setSignUpState({\n      loading: false,\n      error: e.message\n    }));\n  }\n\n  yield put(actions.setSignUpState({\n    loading: false\n  }));\n}\n\nfunction* resetSignUpStateSoft() {\n  const {\n    allowSignUps,\n    allowNotVerifiedUsersLogin\n  } = yield select(state => state.auth.signUpState);\n  yield put(actions.resetSignUpState());\n  yield put(actions.setSignUpState({\n    allowSignUps,\n    allowNotVerifiedUsersLogin\n  }));\n}\n\nfunction* signUpSaga() {\n  yield takeLeading(actions.signUpUser, signUpUser);\n  yield takeLeading(actions.resetSignUpStateSoft, resetSignUpStateSoft);\n}\n\nfunction* loadSecurityPolicy() {\n  yield put(actions.setSecurityPolicyGlobalState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getGlobalSecurityPolicy);\n    yield put(actions.setSecurityPolicyGlobalState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyGlobalState({\n      error: e.message,\n      loading: false\n    }));\n  }\n\n  yield put(actions.loadSecurityPolicyMfa());\n  yield put(actions.loadSecurityPolicyVendorMfa());\n  yield put(actions.loadSecurityPolicyLockout());\n  yield put(actions.loadSecurityPolicyCaptcha());\n  yield put(actions.loadPublicAuthStrategiesPolicy());\n}\n\nfunction* loadPublicSecurityPolicy() {\n  yield put(actions.setSecurityPolicyPublicState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getVendorConfig);\n    yield put(actions.setSecurityPolicyPublicState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyPublicState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* loadPublicAuthStrategiesPolicy() {\n  yield put(actions.setSecurityPolicyAuthStrategyPublicState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getVendorPublicAuthStrategiesConfig);\n    yield put(actions.setSecurityPolicyAuthStrategyPublicState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyAuthStrategyPublicState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* loadSecurityPolicyMfa() {\n  yield put(actions.setSecurityPolicyMfaState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getMfaPolicy);\n    yield put(actions.setSecurityPolicyMfaState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyMfaState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* loadSecurityPolicyVendorMfa() {\n  yield put(actions.setSecurityPolicyMfaState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getVendorMfaPolicy);\n    yield put(actions.setSecurityPolicyVendorMfaState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyVendorMfaState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* saveSecurityPolicyMfa(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      newSecurityPolicy = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setSecurityPolicyMfaState({\n    saving: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.saveMfaPolicy, newSecurityPolicy);\n    yield put(actions.setSecurityPolicyMfaState({\n      policy,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(policy);\n  } catch (e) {\n    yield put(actions.setSecurityPolicyMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* loadSecurityPolicyLockout() {\n  yield put(actions.setSecurityPolicyLockoutState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getLockoutPolicy);\n    yield put(actions.setSecurityPolicyLockoutState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyLockoutState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* saveSecurityPolicyLockout(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      newSecurityPolicy = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setSecurityPolicyLockoutState({\n    saving: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.saveLockoutPolicy, newSecurityPolicy);\n    yield put(actions.setSecurityPolicyLockoutState({\n      policy,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(policy);\n  } catch (e) {\n    yield put(actions.setSecurityPolicyLockoutState({\n      saving: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* loadSecurityPolicyCaptcha() {\n  yield put(actions.setSecurityPolicyLockoutState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getCaptchaPolicy);\n    yield put(actions.setSecurityPolicyCaptchaState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyCaptchaState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* loadSecurityPolicyPasswordHistory() {\n  yield put(actions.setSecurityPolicyPasswordHistoryState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getPasswordHistoryPolicy);\n    yield put(actions.setSecurityPolicyPasswordHistoryState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyPasswordHistoryState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* saveSecurityPolicyPasswordHistory(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      newSecurityPolicy = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setSecurityPolicyPasswordHistoryState({\n    saving: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.savePasswordHistoryPolicy, newSecurityPolicy);\n    yield put(actions.setSecurityPolicyPasswordHistoryState({\n      policy,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(policy);\n  } catch (e) {\n    yield put(actions.setSecurityPolicyPasswordHistoryState({\n      saving: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* loadVendorPasswordConfig() {\n  yield put(actions.setSecurityPolicyPasswordState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const policy = yield call(api.auth.getPasswordConfigPolicy);\n    yield put(actions.setSecurityPolicyPasswordState({\n      policy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyPasswordState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* securityPolicySagas() {\n  yield takeLeading(actions.loadSecurityPolicy, loadSecurityPolicy);\n  yield takeEvery(actions.saveSecurityPolicyMfa, saveSecurityPolicyMfa);\n  yield takeEvery(actions.loadSecurityPolicyMfa, loadSecurityPolicyMfa);\n  yield takeEvery(actions.loadSecurityPolicyVendorMfa, loadSecurityPolicyVendorMfa);\n  yield takeEvery(actions.saveSecurityPolicyLockout, saveSecurityPolicyLockout);\n  yield takeEvery(actions.loadSecurityPolicyLockout, loadSecurityPolicyLockout);\n  yield takeEvery(actions.loadSecurityPolicyCaptcha, loadSecurityPolicyCaptcha);\n  yield takeEvery(actions.saveSecurityPolicyPasswordHistory, saveSecurityPolicyPasswordHistory);\n  yield takeEvery(actions.loadSecurityPolicyPasswordHistory, loadSecurityPolicyPasswordHistory);\n  yield takeEvery(actions.loadVendorPasswordConfig, loadVendorPasswordConfig);\n  yield takeEvery(actions.loadPublicSecurityPolicy, loadPublicSecurityPolicy);\n  yield takeEvery(actions.loadPublicAuthStrategiesPolicy, loadPublicAuthStrategiesPolicy);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* loadPublicSecurityPolicyMock() {\n  yield put(actions.setSecurityPolicyPublicState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    yield put(actions.setSecurityPolicyPublicState({\n      policy: publicSecurityPolicy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSecurityPolicyPublicState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* loadSecurityPolicyMock() {\n  yield put(actions.setSecurityPolicyGlobalState({\n    loading: true,\n    error: null\n  }));\n  yield delay();\n  yield put(actions.setSecurityPolicyGlobalState({\n    policy: policyDemo,\n    loading: false\n  }));\n  yield put(actions.loadSecurityPolicyMfa());\n  yield put(actions.loadSecurityPolicyVendorMfa());\n  yield put(actions.loadSecurityPolicyLockout());\n  yield put(actions.loadSecurityPolicyCaptcha());\n}\n\nfunction* loadSecurityPolicyMfaMock() {\n  yield put(actions.setSecurityPolicyMfaState({\n    loading: true,\n    error: null\n  }));\n  yield delay();\n  yield put(actions.setSecurityPolicyMfaState({\n    policy: policyMfaDemo,\n    loading: false\n  }));\n}\n\nfunction* loadSecurityPolicyVendorMfaMock() {\n  yield put(actions.setSecurityPolicyVendorMfaState({\n    loading: true,\n    error: null\n  }));\n  yield delay();\n  yield put(actions.setSecurityPolicyVendorMfaState({\n    policy: policyMfaDemo,\n    loading: false\n  }));\n}\n\nfunction* saveSecurityPolicyMfaMock(_a) {\n  var _b;\n\n  var _c = _a.payload,\n      {\n    callback\n  } = _c,\n      newSecurityPolicy = __rest(_c, [\"callback\"]);\n\n  yield put(actions.setSecurityPolicyMfaState({\n    saving: true,\n    error: null\n  }));\n  const policy = Object.assign(Object.assign({}, policyLockoutDemo), {\n    id: (_b = newSecurityPolicy.id) !== null && _b !== void 0 ? _b : policyLockoutDemo.id,\n    enforceMFAType: newSecurityPolicy.enforceMFAType\n  });\n  yield delay();\n  yield put(actions.setSecurityPolicyMfaState({\n    policy,\n    saving: false\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(policy);\n}\n\nfunction* loadSecurityPolicyLockoutMock() {\n  yield put(actions.setSecurityPolicyLockoutState({\n    loading: true,\n    error: null\n  }));\n  yield delay();\n  yield put(actions.setSecurityPolicyLockoutState({\n    policy: policyLockoutDemo,\n    loading: false\n  }));\n}\n\nfunction* saveSecurityPolicyLockoutMock(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      newSecurityPolicy = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setSecurityPolicyLockoutState({\n    saving: true,\n    error: null\n  }));\n  yield delay();\n  const policy = Object.assign(Object.assign(Object.assign({}, newSecurityPolicy), policyLockoutDemo), {\n    id: newSecurityPolicy.id ? newSecurityPolicy.id : policyLockoutDemo.id\n  });\n  callback === null || callback === void 0 ? void 0 : callback(policy);\n  yield put(actions.setSecurityPolicyLockoutState({\n    policy,\n    saving: false\n  }));\n}\n\nfunction* loadSecurityPolicyCaptchaMock() {\n  yield put(actions.setSecurityPolicyLockoutState({\n    loading: true,\n    error: null\n  }));\n  yield delay();\n  yield put(actions.setSecurityPolicyLockoutState({\n    policy: policyLockoutDemo,\n    loading: false\n  }));\n}\n\nfunction* loadSecurityPolicyPasswordHistoryMock() {\n  yield put(actions.setSecurityPolicyPasswordHistoryState({\n    loading: true,\n    error: null\n  }));\n  yield delay();\n  yield put(actions.setSecurityPolicyPasswordHistoryState({\n    policy: policyPasswordHistoryDemo,\n    loading: false\n  }));\n}\n\nfunction* saveSecurityPolicyPasswordHistoryMock(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      newSecurityPolicy = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setSecurityPolicyPasswordHistoryState({\n    saving: true,\n    error: null\n  }));\n  yield delay();\n  const policy = Object.assign(Object.assign(Object.assign({}, newSecurityPolicy), policyPasswordHistoryDemo), {\n    id: newSecurityPolicy.id ? newSecurityPolicy.id : policyPasswordHistoryDemo.id\n  });\n  callback === null || callback === void 0 ? void 0 : callback(policy);\n  yield put(actions.setSecurityPolicyPasswordHistoryState({\n    policy,\n    saving: false\n  }));\n}\n\nfunction* securityPolicySagasMock() {\n  yield takeLeading(actions.loadSecurityPolicy, loadSecurityPolicyMock);\n  yield takeEvery(actions.loadPublicSecurityPolicy, loadPublicSecurityPolicyMock);\n  yield takeEvery(actions.saveSecurityPolicyMfa, saveSecurityPolicyMfaMock);\n  yield takeEvery(actions.loadSecurityPolicyMfa, loadSecurityPolicyMfaMock);\n  yield takeEvery(actions.loadSecurityPolicyVendorMfa, loadSecurityPolicyVendorMfaMock);\n  yield takeEvery(actions.saveSecurityPolicyLockout, saveSecurityPolicyLockoutMock);\n  yield takeEvery(actions.loadSecurityPolicyLockout, loadSecurityPolicyLockoutMock);\n  yield takeEvery(actions.loadSecurityPolicyCaptcha, loadSecurityPolicyCaptchaMock);\n  yield takeEvery(actions.saveSecurityPolicyPasswordHistory, saveSecurityPolicyPasswordHistoryMock);\n  yield takeEvery(actions.loadSecurityPolicyPasswordHistory, loadSecurityPolicyPasswordHistoryMock);\n}\n\nconst authStrategyLoginStepMap = {\n  [AuthStrategyEnum.Code]: LoginStep.loginWithOtc,\n  [AuthStrategyEnum.EmailAndPassword]: LoginStep.loginWithPassword,\n  [AuthStrategyEnum.MagicLink]: LoginStep.magicLinkPreLoginSuccess,\n  [AuthStrategyEnum.SmsCode]: LoginStep.loginWithSmsOtc\n};\n\nfunction* afterAuthNavigation() {\n  var _a;\n\n  const onRedirectTo = ContextHolder.onRedirectTo;\n  const {\n    routes,\n    includeQueryParam\n  } = yield select(state => state.auth);\n  const {\n    loginUrl,\n    logoutUrl,\n    socialLoginCallbackUrl,\n    activateUrl\n  } = routes;\n  let {\n    authenticatedUrl\n  } = routes;\n  const afterAuthRedirect = window.localStorage.getItem(FRONTEGG_AFTER_AUTH_REDIRECT_URL);\n\n  if (afterAuthRedirect && ![loginUrl, logoutUrl, socialLoginCallbackUrl, activateUrl].includes(afterAuthRedirect)) {\n    authenticatedUrl = afterAuthRedirect;\n  }\n\n  window.localStorage.removeItem(FRONTEGG_AFTER_AUTH_REDIRECT_URL);\n  yield delay$1(200);\n  put(actions.resetLoginState());\n  const url = new URL(window === null || window === void 0 ? void 0 : window.location.href);\n  let redirectUrl = authenticatedUrl;\n\n  if (url.searchParams.get('redirectUrl')) {\n    redirectUrl = (_a = url.searchParams.get('redirectUrl')) !== null && _a !== void 0 ? _a : authenticatedUrl;\n  } else if (includeQueryParam) {\n    redirectUrl += window.location.search;\n  }\n\n  onRedirectTo(redirectUrl, {\n    refresh: redirectUrl.startsWith('http')\n  });\n}\n\nfunction* refreshMetadata() {\n  var _a;\n\n  let ssoACS;\n\n  try {\n    const metadata = yield call(api.metadata.getSamlMetadata);\n    ssoACS = (_a = metadata === null || metadata === void 0 ? void 0 : metadata.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\n  } catch (e) {\n    console.error(e);\n  }\n\n  yield put(actions.setState({\n    ssoACS\n  }));\n}\n\nfunction* loadSSOPublicConfigurationFunction() {\n  try {\n    const {\n      isActive\n    } = yield call(api.auth.getSSOPublicConfiguration);\n    yield put(actions.setState({\n      isSSOAuth: isActive\n    }));\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nconst isMfaRequired = user => {\n  if (user.mfaRequired && user.mfaToken) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    return true;\n  } else {\n    ContextHolder.setAccessToken(user.accessToken);\n    ContextHolder.setUser(user);\n    return false;\n  }\n};\n\nfunction* getMfaRequiredState(user) {\n  let setMfaState = {};\n  let step = LoginStep.loginWithTwoFactor;\n  const {\n    loginState\n  } = yield select(state => state.auth);\n  const {\n    isAllowedToRemember,\n    mfaDeviceExpiration\n  } = yield call(api.auth.checkIfAllowToRememberMfaDevice, user.mfaToken);\n\n  if (user.hasOwnProperty('mfaEnrolled') && !user.mfaEnrolled) {\n    setMfaState = {\n      mfaState: {\n        step: MFAStep.verify,\n        qrCode: user.qrCode,\n        recoveryCode: user.recoveryCode,\n        loading: false,\n        mfaToken: user.mfaToken\n      }\n    };\n    step = LoginStep.forceTwoFactor;\n  }\n\n  let quickLoginState = {};\n  const quickLoginToRegister = localStorage.getItem('register-quick-login');\n\n  if (quickLoginToRegister) {\n    quickLoginState = {\n      quickLoginToRegister,\n      flow: LoginFlow.RegisterQuickLogin\n    };\n  }\n\n  return Object.assign(Object.assign({\n    user: undefined,\n    isAuthenticated: false\n  }, setMfaState), {\n    loginState: Object.assign(Object.assign(Object.assign({}, loginState), quickLoginState), {\n      mfaToken: user.mfaToken,\n      mfaRequired: user.mfaRequired,\n      loading: false,\n      error: undefined,\n      step,\n      tenantsLoading: true,\n      email: user.userEmail,\n      tenants: [],\n      allowRememberMfaDevice: isAllowedToRemember,\n      mfaDeviceExpiration\n    })\n  });\n}\n\nfunction* refreshToken() {\n  const {\n    hostedLoginBox\n  } = yield select(state => state.auth);\n\n  if (hostedLoginBox) {\n    yield call(refreshTokenHosted);\n  } else {\n    yield call(refreshTokenEmbedded);\n  }\n}\n\nfunction* refreshTokenHosted() {\n  const {\n    user\n  } = yield select(state => state.auth);\n\n  if (!(user === null || user === void 0 ? void 0 : user.refreshToken)) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    yield put(actions.setState({\n      isAuthenticated: false\n    }));\n    return;\n  }\n\n  try {\n    const body = {\n      grant_type: 'refresh_token',\n      refresh_token: user === null || user === void 0 ? void 0 : user.refreshToken\n    };\n    const authenticatedUser = yield call(api.auth.exchangeOAuthTokens, body);\n    yield put(actions.setState({\n      user: authenticatedUser,\n      isAuthenticated: true\n    }));\n    yield put(actions.loadTenants());\n  } catch (e) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    yield put(actions.setState({\n      isAuthenticated: false\n    }));\n  }\n}\n\nfunction* refreshTokenEmbedded() {\n  var _a;\n\n  try {\n    const onRedirectTo = ContextHolder.onRedirectTo;\n    const {\n      routes,\n      loginState\n    } = yield select(state => state.auth);\n    const {\n      user,\n      tenants\n    } = yield call(api.auth.refreshTokenV2);\n\n    if (isMfaRequired(user)) {\n      const mfaRequiredState = yield getMfaRequiredState(user);\n      yield put(actions.setState(mfaRequiredState));\n      onRedirectTo(routes.loginUrl, {\n        preserveQueryParams: true\n      });\n    } else {\n      if (user.email) {\n        localStorage.setItem('email', user.email);\n        localStorage.setItem('name', user.name);\n      }\n\n      const quickLoginToRegister = (_a = localStorage.getItem('register-quick-login')) !== null && _a !== void 0 ? _a : loginState.quickLoginToRegister;\n      const shouldNavigateToRegisterQuicKLogin = quickLoginToRegister && localStorage.getItem(`${user.email}-${quickLoginToRegister}`) !== 'true' && !window.location.pathname.endsWith(routes.logoutUrl);\n      yield put(actions.setTenantsState({\n        tenants,\n        loading: false\n      }));\n      yield put(actions.setState({\n        user,\n        isAuthenticated: true,\n        loginState: Object.assign(Object.assign({}, loginState), {\n          quickLoginToRegister,\n          flow: shouldNavigateToRegisterQuicKLogin ? LoginFlow.RegisterQuickLogin : LoginFlow.Login\n        })\n      }));\n\n      if (shouldNavigateToRegisterQuicKLogin) {\n        onRedirectTo(routes.loginUrl);\n      } else if ([routes.loginUrl, routes.socialLoginCallbackUrl, routes.signUpUrl, routes.oidcRedirectUrl, routes.samlCallbackUrl].some(url => url && window.location.pathname.endsWith(url))) {\n        if (loginState.isNewUser && routes.signUpSuccessUrl && routes.socialLoginCallbackUrl === window.location.pathname) {\n          onRedirectTo(routes.signUpSuccessUrl, {\n            refresh: routes.signUpSuccessUrl.startsWith('http')\n          });\n        } else {\n          yield afterAuthNavigation();\n        }\n      }\n    }\n  } catch (e) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    yield put(actions.setState({\n      user: undefined,\n      isAuthenticated: false\n    }));\n  }\n}\n\nfunction* requestAuthorize({\n  payload: firstTime\n}) {\n  const calls = [];\n\n  if (firstTime) {\n    yield put(actions.setState({\n      isLoading: true\n    }));\n    yield put(actions.loadSocialLoginsConfigurationV2());\n    calls.push(call(loadAllowSignUps));\n    calls.push(call(loadPublicAuthStrategiesPolicy));\n    calls.push(call(loadSSOPublicConfigurationFunction));\n    calls.push(call(loadVendorPublicInfo));\n    calls.push(call(refreshMetadata));\n  }\n\n  calls.push(call(refreshToken));\n  yield all(calls);\n  yield put(actions.setState({\n    isLoading: false\n  }));\n}\n\nfunction* refreshTokenSSR(accessToken) {\n  if (!accessToken) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    yield put(actions.setState({\n      user: undefined,\n      isAuthenticated: false\n    }));\n    return;\n  }\n\n  try {\n    const onRedirectTo = ContextHolder.onRedirectTo;\n    const {\n      routes\n    } = yield select(state => state.auth);\n    const {\n      user,\n      tenants\n    } = yield call(api.auth.generateLoginResponseV2, {\n      accessToken\n    });\n\n    if (isMfaRequired(user)) {\n      const mfaRequiredState = yield getMfaRequiredState(user);\n      yield put(actions.setState(mfaRequiredState));\n      onRedirectTo(routes.loginUrl, {\n        preserveQueryParams: true\n      });\n    } else {\n      yield put(actions.setTenantsState({\n        tenants,\n        loading: false\n      }));\n      yield put(actions.setState({\n        user,\n        isAuthenticated: true\n      }));\n    }\n  } catch (e) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    yield put(actions.setState({\n      user: undefined,\n      isAuthenticated: false\n    }));\n  }\n}\n\nfunction* requestAuthorizeSSR({\n  payload: accessToken\n}) {\n  const calls = [];\n  yield put(actions.setState({\n    isLoading: true\n  }));\n  yield put(actions.loadSocialLoginsConfigurationV2());\n  calls.push(call(loadAllowSignUps));\n  calls.push(call(loadSSOPublicConfigurationFunction));\n  calls.push(call(loadVendorPublicInfo));\n  calls.push(call(refreshMetadata));\n  calls.push(call(refreshTokenSSR, accessToken));\n  yield all(calls);\n  yield put(actions.setState({\n    isLoading: false\n  }));\n}\n\nfunction* requestHostedLoginAuthorize() {\n  const {\n    routes,\n    context,\n    onRedirectTo\n  } = yield select(state => ({\n    routes: state.auth.routes,\n    onRedirectTo: state.auth.onRedirectTo,\n    context: state.root.context\n  })); // Generate the relevant params for the redirect\n\n  const nonce = createRandomString();\n  const code_verifier = createRandomString();\n  const code_challenge = yield call(generateCodeChallenge, code_verifier); // We are saving the verifier in session storage to be able to validate the response\n\n  localStorage.setItem(HOSTED_LOGIN_VERIFIER_KEY, code_verifier);\n  const redirectUrl = `${window.location.origin}${routes.hostedLoginRedirectUrl}`;\n  const baseUrl = fetch.getBaseUrl(context, '/oauth/authorize'); // Hard coded for now\n\n  const oauthUrl = `${baseUrl}/oauth/authorize`;\n  const params = {\n    response_type: 'code',\n    client_id: context.clientId || 'INVALID-CLIENT-ID',\n    scope: 'openid email profile',\n    redirect_uri: redirectUrl,\n    code_challenge: code_challenge,\n    code_challenge_method: 'S256',\n    nonce\n  };\n  const searchParams = new URLSearchParams(params);\n  const url = `${oauthUrl}?${searchParams.toString()}`;\n  onRedirectTo(url, {\n    refresh: true\n  });\n}\n\nfunction* handleHostedLoginCallback({\n  payload\n}) {\n  // Hard coded for now\n  const code_verifier = localStorage.getItem(HOSTED_LOGIN_VERIFIER_KEY) || 'INVALID-CODE-VERIFIER';\n  const routes = yield select(state => state.auth.routes);\n  const redirectUrl = `${window.location.origin}${routes.hostedLoginRedirectUrl}`;\n  const body = {\n    code: payload.code,\n    redirect_uri: redirectUrl,\n    code_verifier,\n    grant_type: 'authorization_code'\n  };\n  const user = yield call(api.auth.exchangeOAuthTokens, body); // TODO: Validate nonce and aud\n\n  yield put(actions.setState({\n    user,\n    isAuthenticated: true\n  }));\n  yield put(actions.loadTenants());\n  yield afterAuthNavigation();\n}\n\nfunction* changePhoneNumberWithVerification(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      payload = __rest(_b, [\"callback\"]);\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const changePhoneRes = yield call(api.auth.changePhoneNumberWithVerification, payload);\n    yield put(actions.setLoginState({\n      phoneNumber: payload.phoneNumber,\n      loading: false,\n      changePhoneId: changePhoneRes.changePhoneId,\n      step: LoginStep.loginWithQuickSmsOtc,\n      error: undefined\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* verifyChangePhoneNumber(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      payload = __rest(_b, [\"callback\"]);\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    yield call(api.auth.verifyChangePhoneNumber, payload);\n    yield put(actions.setLoginState({\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* quickSmsPasswordlessPreLogin(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      payload = __rest(_b, [\"callback\"]);\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const preloginRes = yield call(api.auth.passwordlessPreLogin, Object.assign(Object.assign({}, payload), {\n      type: AuthStrategyEnum.SmsCode\n    }));\n    yield put(actions.setLoginState({\n      step: LoginStep.loginWithQuickSmsOtc,\n      loading: false,\n      email: payload.email,\n      phoneNumber: preloginRes === null || preloginRes === void 0 ? void 0 : preloginRes.phoneNumber,\n      error: undefined\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message,\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(e);\n  }\n}\n\nfunction* passwordlessPreLogin(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      payload = __rest(_b, [\"callback\"]);\n\n  try {\n    const {\n      onRedirectTo,\n      routes\n    } = yield select(({\n      auth: {\n        onRedirectTo,\n        routes\n      }\n    }) => ({\n      onRedirectTo,\n      routes\n    }));\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const preloginRes = yield call(api.auth.passwordlessPreLogin, payload);\n    const step = authStrategyLoginStepMap[payload.type];\n\n    if (step === LoginStep.loginWithSmsOtc && preloginRes.resetPhoneNumberToken) {\n      yield put(actions.setResetPhoneNumberState({\n        resetPhoneNumberToken: preloginRes.resetPhoneNumberToken,\n        step: ResetPhoneNumberStep.VerifyResetPhoneNumber\n      }));\n      onRedirectTo(routes.resetPhoneNumberUrl);\n      return;\n    }\n\n    yield put(actions.setLoginState({\n      step,\n      loading: false,\n      email: payload.email,\n      phoneNumber: preloginRes === null || preloginRes === void 0 ? void 0 : preloginRes.phoneNumber,\n      error: undefined\n    }));\n    callback === null || callback === void 0 ? void 0 : callback();\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message,\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback();\n  }\n}\n\nfunction* passwordlessPostLogin(_a) {\n  var _b, _c;\n\n  var _d = _a.payload,\n      {\n    callback,\n    events\n  } = _d,\n      payload = __rest(_d, [\"callback\", \"events\"]);\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const data = yield call(api.auth.passwordlessPostLogin, payload);\n    const onRedirectTo = ContextHolder.onRedirectTo;\n    const {\n      routes\n    } = yield select(state => state.auth);\n\n    if (isMfaRequired(data)) {\n      const mfaRequiredState = yield getMfaRequiredState(data);\n      yield put(actions.setState(mfaRequiredState));\n      onRedirectTo(routes.loginUrl, {\n        preserveQueryParams: true\n      });\n    } else {\n      const {\n        loginState\n      } = yield select(state => state.auth);\n      const user = yield call(api.auth.generateLoginResponse, data);\n\n      if (data.emailVerified) {\n        (_b = events === null || events === void 0 ? void 0 : events.userVerified) === null || _b === void 0 ? void 0 : _b.call(events, {\n          email: user.email,\n          origin: UserVeirifedOriginTypes.PASSWORDLESS,\n          id: user.id,\n          tenantId: user.tenantId,\n          createdAt: new Date(),\n          name: user.name\n        });\n      }\n\n      if (user.email) {\n        localStorage.setItem('email', user.email);\n        localStorage.setItem('name', user.name);\n      }\n\n      yield put(actions.setState({\n        user,\n        isAuthenticated: true\n      }));\n      yield put(actions.setLoginState({\n        error: undefined\n      }));\n      yield put(actions.loadTenants());\n\n      if (loginState.flow === LoginFlow.Login) {\n        yield afterAuthNavigation();\n      } else {\n        onRedirectTo(routes.loginUrl, {\n          preserveQueryParams: true\n        });\n      }\n\n      localStorage.removeItem('register-quick-login');\n      callback === null || callback === void 0 ? void 0 : callback(true);\n    }\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: (_c = e.message) !== null && _c !== void 0 ? _c : 'Failed to authenticate'\n    }));\n  } finally {\n    yield put(actions.setLoginState({\n      loading: false\n    }));\n  }\n}\n\nfunction* verifyInviteToken({\n  payload\n}) {\n  var _a;\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const {\n      name: inviteTokenTenantName\n    } = yield call(api.auth.verifyInviteToken, payload);\n    yield put(actions.setLoginState({\n      inviteTokenTenantName\n    }));\n  } catch (e) {\n    console.error(e);\n    yield put(actions.setLoginState({\n      inviteTokenError: (_a = e.message) !== null && _a !== void 0 ? _a : `We couldn't verify your invitation`\n    }));\n  } finally {\n    yield put(actions.setLoginState({\n      loading: false\n    }));\n  }\n}\n\nfunction* preLogin({\n  payload: {\n    email,\n    recaptchaToken,\n    invitationToken,\n    callback\n  }\n}) {\n  yield put(actions.setLoginState({\n    loading: true\n  }));\n\n  try {\n    const onRedirectTo = yield select(({\n      auth: {\n        onRedirectTo\n      }\n    }) => onRedirectTo);\n    let {\n      address,\n      idpType\n    } = yield call(api.auth.preLoginV2, {\n      email\n    });\n\n    if (address) {\n      if (idpType === SamlVendors.Oidc && !address.includes('redirect_uri')) {\n        const {\n          routes: {\n            oidcRedirectUrl\n          }\n        } = yield select(({\n          auth: {\n            routes\n          }\n        }) => ({\n          routes\n        }));\n        address += `&redirect_uri=${window.location.origin}${oidcRedirectUrl}`;\n      }\n\n      yield put(actions.setLoginState({\n        step: LoginStep.redirectToSSO,\n        loading: false,\n        ssoRedirectUrl: address\n      }));\n      setTimeout(() => {\n        onRedirectTo(address, {\n          refresh: true\n        });\n      }, 2000);\n    } else {\n      yield ssoPreloginFailed({\n        email,\n        recaptchaToken,\n        callback,\n        invitationToken\n      });\n    }\n  } catch (e) {\n    yield ssoPreloginFailed({\n      email,\n      recaptchaToken,\n      callback,\n      invitationToken\n    });\n  }\n}\n\nfunction* ssoPreloginFailed(_a) {\n  var {\n    callback\n  } = _a,\n      body = __rest(_a, [\"callback\"]);\n\n  const publicPolicy = yield select(({\n    auth: {\n      securityPolicyState: {\n        publicPolicy: {\n          policy: publicPolicy\n        }\n      }\n    }\n  }) => publicPolicy);\n\n  if (!(publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy)) {\n    yield put(actions.setLoginState({\n      step: LoginStep.loginWithPassword,\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback();\n    return;\n  }\n\n  if ((publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy) === AuthStrategyEnum.EmailAndPassword) {\n    yield put(actions.setLoginState({\n      step: LoginStep.loginWithPassword,\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback();\n  } else if ([AuthStrategyEnum.MagicLink, AuthStrategyEnum.Code, AuthStrategyEnum.SmsCode].includes(publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy)) {\n    yield put(actions.passwordlessPreLogin(Object.assign(Object.assign({}, body), {\n      type: publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy,\n      callback\n    })));\n  } else {\n    yield put(actions.setLoginState({\n      step: LoginStep.loginWithPassword,\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback();\n  }\n}\n\nfunction* webAuthnCreateNewDeviceSession({\n  payload: {\n    callback\n  }\n}) {\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const {\n      options\n    } = yield call(api.auth.webAuthnCreateNewDeviceSession);\n    options.user.id = base64urlDecode(options.user.id);\n    options.challenge = base64urlDecode(options.challenge);\n    options.excludeCredentials = [];\n    callback === null || callback === void 0 ? void 0 : callback(options);\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null);\n  } finally {\n    yield put(actions.setLoginState({\n      loading: false\n    }));\n  }\n}\n\nfunction* webAuthnVerifyNewDeviceSession(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const publicKey = publicKeyCredentialToJSON(body.publicKey);\n    yield call(api.auth.verifyNewDeviceSession, {\n      id: publicKey.id,\n      response: publicKey.response\n    });\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null);\n  } finally {\n    yield put(actions.setLoginState({\n      loading: false\n    }));\n  }\n}\n\nfunction* webAuthnPrelogin(_a) {\n  var _b;\n\n  var _c = _a.payload,\n      {\n    callback\n  } = _c,\n      body = __rest(_c, [\"callback\"]);\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const {\n      options\n    } = yield call(api.auth.webAuthnPreLogin, body);\n    options.challenge = base64urlDecode(options.challenge);\n    options.allowCredentials = (_b = options.allowCredentials) === null || _b === void 0 ? void 0 : _b.map(credentials => Object.assign(Object.assign({}, credentials), {\n      id: base64urlDecode(credentials.id)\n    }));\n    yield put(actions.setLoginState({\n      error: undefined\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(options);\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null);\n  } finally {\n    yield put(actions.setLoginState({\n      loading: false\n    }));\n  }\n}\n\nfunction* webAuthnPostLogin(_a) {\n  var _b;\n\n  var _c = _a.payload,\n      {\n    callback\n  } = _c,\n      body = __rest(_c, [\"callback\"]);\n\n  try {\n    yield put(actions.setLoginState({\n      loading: true\n    }));\n    const publicKey = publicKeyCredentialToJSON(body.publicKey);\n    const data = yield call(api.auth.webAuthnPostLogin, Object.assign(Object.assign({}, publicKey), {\n      response: Object.assign(Object.assign({}, publicKey.response), {\n        userHandle: (_b = publicKey.response.userHandle) !== null && _b !== void 0 ? _b : undefined\n      }),\n      recaptchaToken: body.recaptchaToken,\n      invitationToken: body.invitationToken\n    }));\n\n    if (isMfaRequired(data)) {\n      const onRedirectTo = ContextHolder.onRedirectTo;\n      const {\n        routes\n      } = yield select(state => state.auth);\n      const mfaRequiredState = yield getMfaRequiredState(data);\n      yield put(actions.setState(mfaRequiredState));\n      onRedirectTo(routes.loginUrl, {\n        preserveQueryParams: true\n      });\n    } else {\n      const user = yield call(api.auth.generateLoginResponse, data);\n\n      if (user.email) {\n        localStorage.setItem('email', user.email);\n        localStorage.setItem('name', user.name);\n      }\n\n      yield put(actions.loadTenants());\n      yield put(actions.setState({\n        user,\n        isAuthenticated: true\n      }));\n      yield put(actions.setLoginState({\n        error: undefined\n      }));\n      yield afterAuthNavigation();\n      callback === null || callback === void 0 ? void 0 : callback(true);\n    }\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null);\n  } finally {\n    yield put(actions.setLoginState({\n      loading: false\n    }));\n  }\n}\n\nfunction* postLogin({\n  payload\n}) {\n  const {\n    onRedirectTo,\n    routes\n  } = yield select(({\n    auth: {\n      onRedirectTo,\n      routes\n    }\n  }) => ({\n    onRedirectTo,\n    routes\n  }));\n  yield put(actions.setLoginState({\n    loading: true\n  }));\n\n  try {\n    const user = yield call(api.auth.postLogin, payload);\n    ContextHolder.setAccessToken(user.accessToken);\n    ContextHolder.setUser(user);\n    yield put(actions.setState({\n      user: !!user.accessToken ? user : undefined,\n      isAuthenticated: !!user.accessToken\n    }));\n    yield afterAuthNavigation();\n  } catch (e) {\n    setTimeout(() => {\n      onRedirectTo(routes.authenticatedUrl);\n    }, 1000);\n    yield put(actions.setLoginState({\n      step: LoginStep.loginWithSSOFailed,\n      loading: false\n    }));\n  }\n}\n\nfunction* login({\n  payload: {\n    email,\n    password,\n    recaptchaToken,\n    invitationToken,\n    callback\n  }\n}) {\n  yield put(actions.setLoginState({\n    loading: true\n  }));\n\n  try {\n    const user = yield call(api.auth.login, {\n      email,\n      password,\n      recaptchaToken,\n      invitationToken\n    });\n    ContextHolder.setAccessToken(user.accessToken);\n    ContextHolder.setUser(user);\n    let setMfaState = {};\n    let step = LoginStep.success;\n\n    if (user.mfaRequired && user.mfaToken) {\n      step = LoginStep.loginWithTwoFactor;\n\n      if (user.hasOwnProperty('mfaEnrolled') && !user.mfaEnrolled) {\n        setMfaState = {\n          mfaState: {\n            step: MFAStep.verify,\n            qrCode: user.qrCode,\n            recoveryCode: user.recoveryCode,\n            mfaToken: user.mfaToken,\n            loading: false\n          }\n        };\n        step = LoginStep.forceTwoFactor;\n      }\n    }\n\n    const {\n      loginState\n    } = yield select(state => state.auth);\n    const isLoginSucceeded = step === LoginStep.success;\n    const isAuthenticated = isLoginSucceeded && !!user.accessToken;\n    const loggedInUser = isLoginSucceeded ? user : undefined;\n    let allowRememberDevice = {\n      isAllowedToRemember: false,\n      mfaDeviceExpiration: 0\n    };\n\n    if (user.mfaRequired && user.mfaToken) {\n      allowRememberDevice = yield call(api.auth.checkIfAllowToRememberMfaDevice, user.mfaToken);\n    }\n\n    const {\n      isAllowedToRemember,\n      mfaDeviceExpiration\n    } = allowRememberDevice;\n\n    if (user.email) {\n      localStorage.setItem('email', user.email);\n      localStorage.setItem('name', user.name);\n    }\n\n    yield put(actions.setState(Object.assign(Object.assign({\n      user: loggedInUser,\n      isAuthenticated\n    }, setMfaState), {\n      loginState: {\n        flow: loginState.flow,\n        quickLoginToRegister: loginState.quickLoginToRegister,\n        email,\n        loading: false,\n        error: undefined,\n        mfaToken: user.mfaToken,\n        step: !isLoginSucceeded || loginState.flow === LoginFlow.Login ? step : loginState.step,\n        tenants: [],\n        tenantsLoading: true,\n        allowRememberMfaDevice: isAllowedToRemember,\n        mfaDeviceExpiration\n      }\n    })));\n\n    if (isLoginSucceeded) {\n      yield put(actions.loadTenants());\n    }\n\n    if (isAuthenticated && loginState.flow === LoginFlow.Login) {\n      yield afterAuthNavigation();\n    }\n\n    localStorage.removeItem('register-quick-login');\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    ContextHolder.setAccessToken(null);\n    ContextHolder.setUser(null);\n    yield put(actions.setLoginState({\n      email,\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* loginWithMfa({\n  payload: {\n    mfaToken,\n    value,\n    rememberDevice,\n    callback\n  }\n}) {\n  yield put(actions.setLoginState({\n    loading: true\n  }));\n\n  try {\n    const user = yield call(api.auth.loginWithMfa, {\n      mfaToken,\n      value,\n      rememberDevice\n    });\n    const {\n      loginState\n    } = yield select(state => state.auth);\n    const step = loginState.flow === LoginFlow.Login ? LoginStep.success : loginState.step;\n    yield put(actions.setState({\n      loginState: {\n        flow: loginState.flow,\n        quickLoginToRegister: loginState.quickLoginToRegister,\n        loading: false,\n        step,\n        error: undefined,\n        tenantsLoading: true,\n        tenants: []\n      },\n      user,\n      isAuthenticated: true\n    }));\n\n    if (user.email) {\n      localStorage.setItem('email', user.email);\n      localStorage.setItem('name', user.name);\n    }\n\n    yield put(actions.loadTenants());\n    yield put(actions.setLoginState({\n      error: undefined,\n      loading: false\n    }));\n\n    if (loginState.flow === LoginFlow.Login) {\n      yield afterAuthNavigation();\n    }\n\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message,\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(false, e);\n  }\n}\n\nfunction* recoverMfa({\n  payload\n}) {\n  yield put(actions.setLoginState({\n    loading: true\n  }));\n\n  try {\n    yield call(api.auth.recoverMfaToken, payload);\n    yield put(actions.setLoginState({\n      loading: false,\n      error: undefined,\n      step: LoginStep.preLogin\n    }));\n    yield put(actions.setState({\n      user: undefined,\n      isAuthenticated: false\n    }));\n  } catch (e) {\n    yield put(actions.setLoginState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* logout({\n  payload\n}) {\n  yield put(actions.setState({\n    isLoading: true\n  }));\n\n  try {\n    yield call(api.auth.logout);\n  } catch (_a) {}\n\n  yield put(actions.resetState());\n  yield put(actions.requestAuthorize(true));\n  payload === null || payload === void 0 ? void 0 : payload();\n}\n\nfunction* silentLogout({\n  payload\n}) {\n  try {\n    yield call(api.auth.logout);\n  } catch (_a) {}\n\n  setTimeout(() => payload === null || payload === void 0 ? void 0 : payload(), 500);\n}\n\nfunction* loginSagas() {\n  yield takeLeading(actions.requestAuthorize, requestAuthorize);\n  yield takeLeading(actions.requestAuthorizeSSR, requestAuthorizeSSR);\n  yield takeLeading(actions.requestHostedLoginAuthorize, requestHostedLoginAuthorize);\n  yield takeLeading(actions.handleHostedLoginCallback, handleHostedLoginCallback);\n  yield takeLeading(actions.preLogin, preLogin);\n  yield takeLeading(actions.postLogin, postLogin);\n  yield takeLeading(actions.login, login);\n  yield takeLeading(actions.logout, logout);\n  yield takeLeading(actions.silentLogout, silentLogout);\n  yield takeLeading(actions.loginWithMfa, loginWithMfa);\n  yield takeLeading(actions.recoverMfa, recoverMfa);\n  yield takeLeading(actions.quickSmsPasswordlessPreLogin, quickSmsPasswordlessPreLogin);\n  yield takeLeading(actions.changePhoneNumberWithVerification, changePhoneNumberWithVerification);\n  yield takeLeading(actions.verifyChangePhoneNumber, verifyChangePhoneNumber);\n  yield takeLeading(actions.passwordlessPreLogin, passwordlessPreLogin);\n  yield takeLeading(actions.passwordlessPostLogin, passwordlessPostLogin);\n  yield takeLeading(actions.verifyInviteToken, verifyInviteToken);\n  yield takeLeading(actions.webAuthnPrelogin, webAuthnPrelogin);\n  yield takeLeading(actions.webAuthnPostLogin, webAuthnPostLogin);\n  yield takeLeading(actions.webAuthnCreateNewDeviceSession, webAuthnCreateNewDeviceSession);\n  yield takeLeading(actions.webAuthnVerifyNewDeviceSession, webAuthnVerifyNewDeviceSession);\n  yield takeLeading(actions.afterAuthNavigation, afterAuthNavigation);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* requestAuthorizeMock({\n  payload: firstTime\n}) {\n  if (firstTime) {\n    yield put(actions.setState({\n      isLoading: true\n    }));\n  }\n\n  const user = userDemo;\n  yield put(actions.loadTenants());\n  yield put(actions.setState({\n    user,\n    isAuthenticated: true,\n    isLoading: false\n  }));\n}\n\nfunction* loginSagasMock() {\n  yield takeLeading(actions.requestAuthorize, requestAuthorizeMock);\n  yield takeLeading(actions.afterAuthNavigation, afterAuthNavigation);\n}\n\nfunction* loadSSOConfigurations() {\n  var _a, _b;\n\n  try {\n    yield put(actions.setSSOState({\n      loading: true\n    }));\n    const samlConfiguration = yield call(api.auth.getSamlConfiguration);\n    const oidcConfiguration = yield call(api.auth.getOidcConfiguration);\n    const samlMetadata = yield call(api.metadata.getSamlMetadata);\n    samlConfiguration.acsUrl = (_a = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\n    samlConfiguration.spEntityId = (_b = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _b === void 0 ? void 0 : _b.spEntityId;\n    samlConfiguration.isSamlActive = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.isActive;\n    yield put(actions.setSSOState({\n      samlConfiguration,\n      oidcConfiguration,\n      loading: false,\n      firstLoad: false\n    }));\n  } catch (e) {\n    yield put(actions.setSSOState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* saveSSOConfigurationsFile({\n  payload: configFile\n}) {\n  const oldSamlConfiguration = yield select(state => state.auth.ssoState.samlConfiguration);\n  const loaderKey = 'saving';\n  yield put(actions.setSSOState({\n    error: undefined,\n    [loaderKey]: true\n  }));\n\n  try {\n    const metadata = yield readFileAsText(configFile[0]);\n    const newSamlConfiguration = yield call(api.auth.updateSamlVendorMetadata, {\n      metadata\n    });\n    newSamlConfiguration.isSamlActive = oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.isSamlActive;\n    yield put(actions.setSSOState({\n      samlConfiguration: newSamlConfiguration,\n      error: undefined,\n      [loaderKey]: false\n    }));\n  } catch (e) {\n    yield put(actions.setSSOState({\n      samlConfiguration: oldSamlConfiguration,\n      error: e.message,\n      [loaderKey]: false\n    }));\n  }\n}\n\nfunction* saveSSOConfigurationsFileWithCallback({\n  payload\n}) {\n  const {\n    configFile,\n    callback\n  } = payload;\n  const oldSamlConfiguration = yield select(state => state.auth.ssoState.samlConfiguration);\n  const loaderKey = 'saving';\n  yield put(actions.setSSOState({\n    error: undefined,\n    [loaderKey]: true\n  }));\n\n  try {\n    const metadata = yield readFileAsText(configFile);\n    const newSamlConfiguration = yield call(api.auth.updateSamlVendorMetadata, {\n      metadata\n    });\n    newSamlConfiguration.isSamlActive = oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.isSamlActive;\n    yield put(actions.setSSOState({\n      samlConfiguration: newSamlConfiguration,\n      error: undefined,\n      [loaderKey]: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSSOState({\n      samlConfiguration: oldSamlConfiguration,\n      error: e.message,\n      [loaderKey]: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* saveSSOConfigurations({\n  payload\n}) {\n  var _a, _b;\n\n  const {\n    callback,\n    samlVendor\n  } = payload,\n        newSamlConfiguration = __rest(payload, [\"callback\", \"samlVendor\"]);\n\n  const oldSamlConfiguration = yield select(state => state.auth.ssoState.samlConfiguration);\n  const samlConfiguration = Object.assign(Object.assign({}, oldSamlConfiguration), newSamlConfiguration);\n  let loaderKey = 'saving';\n\n  if ((samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.enabled) !== oldSamlConfiguration.enabled) {\n    loaderKey = 'loading';\n  }\n\n  try {\n    const firstTimeConfigure = !(samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.domain);\n\n    if (firstTimeConfigure) {\n      yield put(actions.setSSOState({\n        samlConfiguration: Object.assign(Object.assign({}, oldSamlConfiguration), samlConfiguration)\n      }));\n      return;\n    } else {\n      yield put(actions.setSSOState({\n        error: undefined,\n        [loaderKey]: true\n      }));\n    }\n\n    if (payload.type === SamlVendors.Saml) {\n      const samlMetadata = yield call(api.metadata.getSamlMetadata);\n      samlConfiguration.acsUrl = (_a = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\n      samlConfiguration.spEntityId = (_b = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _b === void 0 ? void 0 : _b.spEntityId;\n    }\n\n    const updateSamlConfiguration = omitProps(samlConfiguration, ['validated', 'generatedVerification', 'createdAt', 'updatedAt']);\n\n    if ((oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.domain) !== (updateSamlConfiguration === null || updateSamlConfiguration === void 0 ? void 0 : updateSamlConfiguration.domain)) {\n      updateSamlConfiguration.ssoEndpoint = '';\n      updateSamlConfiguration.publicCertificate = '';\n      updateSamlConfiguration.signRequest = false;\n    }\n\n    updateSamlConfiguration.type = samlVendor === null || samlVendor === void 0 ? void 0 : samlVendor.toLowerCase();\n    const newSamlConfiguration = yield call(api.auth.updateSamlConfiguration, updateSamlConfiguration);\n    newSamlConfiguration.isSamlActive = oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.isSamlActive;\n    yield put(actions.setSSOState({\n      samlConfiguration: newSamlConfiguration,\n      error: undefined,\n      [loaderKey]: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSSOState({\n      samlConfiguration: oldSamlConfiguration,\n      error: e.message,\n      [loaderKey]: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* validateSSODomain({\n  payload: {\n    callback\n  } = {}\n}) {\n  const samlConfiguration = yield select(state => state.auth.ssoState.samlConfiguration);\n\n  try {\n    yield put(actions.setSSOState({\n      error: undefined,\n      saving: true\n    }));\n    yield call(api.auth.validateSamlDomain);\n    yield put(actions.setSSOState({\n      samlConfiguration: Object.assign(Object.assign({}, samlConfiguration), {\n        validated: true\n      }),\n      error: undefined,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSSOState({\n      samlConfiguration: Object.assign(Object.assign({}, samlConfiguration), {\n        validated: false\n      }),\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* getAuthorizationRoles() {\n  try {\n    const data = yield call(api.auth.getSamlRoles);\n    const groupsData = yield call(api.auth.getSamlRolesGroups);\n    yield put(actions.setSSOState({\n      authorizationRoles: data.roleIds,\n      rolesGroups: groupsData,\n      error: undefined\n    }));\n  } catch (e) {\n    yield put(actions.setSSOState({\n      error: e.message\n    }));\n  }\n}\n\nfunction* updateRolesGroups(groups) {\n  try {\n    yield all(groups.map(group => call(api.auth.updateSamlGroup, {\n      id: group.id,\n      roleIds: group.roleIds,\n      group: group.group\n    })));\n  } catch (e) {\n    yield put(actions.setSSOState({\n      error: e.message\n    }));\n  }\n}\n\nfunction* updateAuthorizationRoles({\n  payload: {\n    callback,\n    authorizationRoles,\n    groups\n  }\n}) {\n  try {\n    yield put(actions.setSSOState({\n      error: undefined,\n      saving: true\n    }));\n    yield call(api.auth.updateSamlRoles, {\n      roleIds: authorizationRoles\n    });\n\n    if (groups) {\n      yield updateRolesGroups(groups);\n    }\n\n    yield getAuthorizationRoles();\n    yield put(actions.setSSOState({\n      error: undefined,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSSOState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* deleteSamlGroupFunction({\n  payload: {\n    callback,\n    id\n  }\n}) {\n  try {\n    yield put(actions.setSSOState({\n      error: undefined,\n      saving: true\n    }));\n    yield call(api.auth.deleteSamlGroup, {\n      id\n    });\n    yield getAuthorizationRoles();\n    yield put(actions.setSSOState({\n      error: undefined,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSSOState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* createSamlGroupFunction({\n  payload: {\n    group,\n    roleIds,\n    callback\n  }\n}) {\n  try {\n    yield put(actions.setSSOState({\n      error: undefined,\n      saving: true\n    }));\n    yield call(api.auth.createSamlGroup, {\n      group,\n      roleIds\n    });\n    yield getAuthorizationRoles();\n    yield put(actions.setSSOState({\n      error: undefined,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSSOState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* oidcPostloginFunction({\n  payload\n}) {\n  var _a;\n\n  const data = {\n    code: payload.code,\n    redirectUri: payload.redirectUri,\n    RelayState: payload.state\n  };\n\n  try {\n    yield put(actions.setSSOState({\n      loading: true\n    }));\n    yield call(api.auth.oidcPostLoginV2, data);\n    yield refreshToken();\n    yield put(actions.setSSOState({\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSSOState({\n      loading: false,\n      error: (_a = e.message) !== null && _a !== void 0 ? _a : 'Failed to authenticate',\n      firstLoad: false\n    }));\n  }\n}\n\nfunction* ssoSagas$1() {\n  yield takeEvery(actions.loadSSOConfigurations, loadSSOConfigurations);\n  yield takeEvery(actions.saveSSOConfigurations, saveSSOConfigurations);\n  yield takeEvery(actions.saveSSOConfigurationsFile, saveSSOConfigurationsFile);\n  yield takeEvery(actions.saveSSOConfigurationsFileWithCallback, saveSSOConfigurationsFileWithCallback);\n  yield takeEvery(actions.validateSSODomain, validateSSODomain);\n  yield takeEvery(actions.loadSSOAuthorizationRoles, getAuthorizationRoles);\n  yield takeEvery(actions.updateSSOAuthorizationRoles, updateAuthorizationRoles);\n  yield takeEvery(actions.deleteSamlGroup, deleteSamlGroupFunction);\n  yield takeEvery(actions.createSamlGroup, createSamlGroupFunction);\n  yield takeEvery(actions.oidcPostlogin, oidcPostloginFunction);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* loadSSOConfigurationsMock() {\n  yield put(actions.setSSOState({\n    loading: true\n  }));\n  yield delay();\n  yield put(actions.setSSOState({\n    samlConfiguration: samlConfigurationDemo,\n    loading: false,\n    firstLoad: false\n  }));\n}\n\nfunction* saveSSOConfigurationsFileMock({\n  payload: configFile\n}) {\n  const loaderKey = 'saving';\n  yield put(actions.setSSOState({\n    error: undefined,\n    [loaderKey]: true\n  }));\n  const oldSamlConfiguration = yield select(state => state.auth.ssoState.samlConfiguration);\n  const newSamlConfiguration = Object.assign(Object.assign(Object.assign({}, oldSamlConfiguration), {\n    enabled: true\n  }), configFile[0]);\n  yield put(actions.setSSOState({\n    samlConfiguration: newSamlConfiguration,\n    error: undefined,\n    [loaderKey]: false\n  }));\n}\n\nfunction* saveSSOConfigurationsMock({\n  payload\n}) {\n  var _a, _b;\n\n  const {\n    callback,\n    samlVendor\n  } = payload,\n        newSamlConfiguration = __rest(payload, [\"callback\", \"samlVendor\"]);\n\n  const oldSamlConfiguration = ssoStateDemo.samlConfiguration;\n  const samlConfiguration = Object.assign(Object.assign({}, oldSamlConfiguration), newSamlConfiguration);\n  let loaderKey = 'saving';\n\n  if ((samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.enabled) !== oldSamlConfiguration.enabled) {\n    loaderKey = 'loading';\n  }\n\n  const firstTimeConfigure = !(samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.domain);\n\n  if (firstTimeConfigure) {\n    yield put(actions.setSSOState({\n      samlConfiguration: Object.assign(Object.assign({}, oldSamlConfiguration), samlConfiguration)\n    }));\n    return;\n  } else {\n    yield put(actions.setSSOState({\n      error: undefined,\n      [loaderKey]: true\n    }));\n  }\n\n  yield delay();\n  samlConfiguration.acsUrl = (_a = samlMetadataDemo === null || samlMetadataDemo === void 0 ? void 0 : samlMetadataDemo.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\n  samlConfiguration.spEntityId = (_b = samlMetadataDemo === null || samlMetadataDemo === void 0 ? void 0 : samlMetadataDemo.configuration) === null || _b === void 0 ? void 0 : _b.spEntityId;\n  const updateSamlConfiguration = omitProps(samlConfiguration, ['validated', 'generatedVerification', 'createdAt', 'updatedAt']);\n\n  if ((oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.domain) !== (updateSamlConfiguration === null || updateSamlConfiguration === void 0 ? void 0 : updateSamlConfiguration.domain)) {\n    updateSamlConfiguration.ssoEndpoint = '';\n    updateSamlConfiguration.publicCertificate = '';\n    updateSamlConfiguration.signRequest = false;\n  }\n\n  updateSamlConfiguration.type = samlVendor === null || samlVendor === void 0 ? void 0 : samlVendor.toLowerCase();\n  yield delay();\n  yield put(actions.setSSOState({\n    samlConfiguration: updateSamlConfiguration,\n    error: undefined,\n    [loaderKey]: false\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(true);\n}\n\nfunction* validateSSODomainMock({\n  payload: {\n    callback\n  } = {}\n}) {\n  const samlConfiguration = ssoStateDemo.samlConfiguration;\n  yield put(actions.setSSOState({\n    error: undefined,\n    saving: true\n  }));\n  yield delay();\n  yield put(actions.setSSOState({\n    samlConfiguration: Object.assign(Object.assign({}, samlConfiguration), {\n      validated: true\n    }),\n    error: undefined,\n    saving: false\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(true);\n}\n\nfunction* getAuthorizationRolesMock() {\n  yield delay();\n  const data = {\n    roleIds: ['1', '2', '3']\n  };\n  yield put(actions.setSSOState({\n    authorizationRoles: data.roleIds,\n    error: undefined\n  }));\n}\n\nfunction* updateAuthorizationRolesMock({\n  payload: {\n    callback,\n    authorizationRoles\n  }\n}) {\n  yield put(actions.setSSOState({\n    error: undefined,\n    saving: true\n  }));\n  yield delay();\n  yield put(actions.setSSOState({\n    authorizationRoles,\n    error: undefined,\n    saving: false\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(true);\n}\n\nfunction* ssoSagasMock() {\n  yield takeEvery(actions.loadSSOConfigurations, loadSSOConfigurationsMock);\n  yield takeEvery(actions.saveSSOConfigurations, saveSSOConfigurationsMock);\n  yield takeEvery(actions.saveSSOConfigurationsFile, saveSSOConfigurationsFileMock);\n  yield takeEvery(actions.validateSSODomain, validateSSODomainMock);\n  yield takeEvery(actions.loadSSOAuthorizationRoles, getAuthorizationRolesMock);\n  yield takeEvery(actions.updateSSOAuthorizationRoles, updateAuthorizationRolesMock);\n}\n\nfunction* loadOidc() {\n  try {\n    const oidcConfiguration = yield call(api.auth.getOidcConfiguration);\n    return oidcConfiguration;\n  } catch (e) {\n    return null;\n  }\n}\n\nfunction* loadSaml() {\n  try {\n    const samlMetadata = yield call(api.metadata.getSamlMetadata);\n    return samlMetadata;\n  } catch (e) {\n    return null;\n  }\n}\n\nfunction* loadSSOConfigurationsV2() {\n  try {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.LOAD_SSO_CONFIGURATIONS,\n      value: true\n    }));\n    const [oidcConfiguration, samlMetadata] = yield all([call(loadOidc), call(loadSaml)]);\n    const ssoConfigurations = yield call(api.auth.getSSOConfigurations);\n    yield put(actions.setSSOState({\n      ssoConfigurations,\n      oidcConfiguration,\n      samlMetadata\n    }));\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.LOAD_SSO_CONFIGURATIONS,\n      value: error.message\n    }));\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.LOAD_SSO_CONFIGURATIONS,\n      value: false\n    }));\n  }\n}\n\nfunction* saveSSOConfigurationV2({\n  payload\n}) {\n  var _a;\n\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.SAVE_SSO_CONFIGURATION,\n    value: true\n  }));\n\n  const {\n    callback\n  } = payload,\n        ssoConfiguration = __rest(payload, [\"callback\"]);\n\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    const newSsoConfiguration = yield call(api.auth.createSSOConfiguration, Object.assign(Object.assign({}, ssoConfiguration), {\n      enabled: (_a = ssoConfiguration.enabled) !== null && _a !== void 0 ? _a : false\n    }));\n    yield put(actions.setSSOState({\n      ssoConfigurations: [...ssoConfigurations, newSsoConfiguration]\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.SAVE_SSO_CONFIGURATION,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.SAVE_SSO_CONFIGURATION,\n      value: false\n    }));\n  }\n}\n\nfunction* saveSSOConfigurationByMetadata({\n  payload\n}) {\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.SAVE_SSO_CONFIGURATION_BY_METADATA,\n    value: true\n  }));\n  const {\n    configFile,\n    callback\n  } = payload;\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    const metadata = yield readFileAsText(configFile);\n    const newSsoConfiguration = yield call(api.auth.createSSOConfigurationByMetadata, {\n      metadata\n    });\n    yield put(actions.setSSOState({\n      ssoConfigurations: [...ssoConfigurations, newSsoConfiguration]\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.SAVE_SSO_CONFIGURATION_BY_METADATA,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.SAVE_SSO_CONFIGURATION_BY_METADATA,\n      value: false\n    }));\n  }\n}\n\nfunction* updateSSOConfiguration({\n  payload\n}) {\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.UPDATE_SSO_CONFIGURATION,\n    value: true\n  }));\n\n  const {\n    callback,\n    ssoConfigId\n  } = payload,\n        ssoConfiguration = __rest(payload, [\"callback\", \"ssoConfigId\"]);\n\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    const newSsoConfiguration = yield call(api.auth.updateSSOConfiguration, ssoConfigId, ssoConfiguration);\n    const newSsoConfigurations = ssoConfigurations.map(ssoConfig => ssoConfig.id === ssoConfigId ? newSsoConfiguration : ssoConfig);\n    yield put(actions.setSSOState({\n      ssoConfigurations: newSsoConfigurations\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.UPDATE_SSO_CONFIGURATION,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.UPDATE_SSO_CONFIGURATION,\n      value: false\n    }));\n  }\n}\n\nfunction* updateSSOConfigurationByMetadata({\n  payload\n}) {\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.UPDATE_SSO_CONFIGURATION_BY_METADATA,\n    value: true\n  }));\n  const {\n    callback,\n    ssoConfigId,\n    configFile\n  } = payload;\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    const metadata = yield readFileAsText(configFile);\n    const newSsoConfiguration = yield call(api.auth.updateSSOConfigurationByMetadata, ssoConfigId, {\n      metadata\n    });\n    const newSsoConfigurations = ssoConfigurations.map(ssoConfig => ssoConfig.id === ssoConfigId ? newSsoConfiguration : ssoConfig);\n    yield put(actions.setSSOState({\n      ssoConfigurations: newSsoConfigurations\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.UPDATE_SSO_CONFIGURATION,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.UPDATE_SSO_CONFIGURATION,\n      value: false\n    }));\n  }\n}\n\nfunction* deleteSSOConfiguration({\n  payload\n}) {\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.DELETE_SSO_CONFIGURATION,\n    value: true\n  }));\n  const {\n    ssoConfigId,\n    callback\n  } = payload;\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    yield call(api.auth.deleteSSOConfiguration, ssoConfigId);\n    yield put(actions.setSSOState({\n      ssoConfigurations: ssoConfigurations.filter(({\n        id\n      }) => id !== ssoConfigId)\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.DELETE_SSO_CONFIGURATION,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.DELETE_SSO_CONFIGURATION,\n      value: false\n    }));\n  }\n}\n\nfunction* saveSSODomain({\n  payload\n}) {\n  const {\n    callback,\n    ssoConfigId\n  } = payload,\n        body = __rest(payload, [\"callback\", \"ssoConfigId\"]);\n\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.SAVE_SSO_DOMAIN,\n    value: true\n  }));\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    const domain = yield call(api.auth.createSSODomain, ssoConfigId, body);\n    const newSsoConfigurations = ssoConfigurations.map(ssoConfig => {\n      if (ssoConfig.id === ssoConfigId) {\n        return Object.assign(Object.assign({}, ssoConfig), {\n          domains: [...ssoConfig.domains, domain]\n        });\n      }\n\n      return ssoConfig;\n    });\n    yield put(actions.setSSOState({\n      ssoConfigurations: newSsoConfigurations\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(domain);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.SAVE_SSO_DOMAIN,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.SAVE_SSO_DOMAIN,\n      value: false\n    }));\n  }\n}\n\nfunction* deleteSSODomain({\n  payload\n}) {\n  const {\n    ssoConfigId,\n    domainId,\n    callback\n  } = payload;\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.DELETE_SSO_DOMAIN,\n    value: true\n  }));\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    yield call(api.auth.deleteSSODomain, ssoConfigId, domainId);\n    const newSsoConfigurations = ssoConfigurations.map(ssoConfig => {\n      if (ssoConfig.id === ssoConfigId) {\n        return Object.assign(Object.assign({}, ssoConfig), {\n          domains: ssoConfig.domains.filter(({\n            id\n          }) => id !== domainId)\n        });\n      }\n\n      return ssoConfig;\n    });\n    yield put(actions.setSSOState({\n      ssoConfigurations: newSsoConfigurations\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.DELETE_SSO_DOMAIN,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.DELETE_SSO_DOMAIN,\n      value: false\n    }));\n  }\n}\n\nfunction* validateSSODomainV2({\n  payload\n}) {\n  const {\n    callback,\n    domainId,\n    ssoConfigId\n  } = payload;\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.VALIDATE_SSO_DOMAIN,\n    value: true\n  }));\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    yield call(api.auth.validateSSODomain, ssoConfigId, domainId);\n    const newSsoConfigurations = ssoConfigurations.map(ssoConfig => {\n      if (ssoConfig.id === ssoConfigId) {\n        return Object.assign(Object.assign({}, ssoConfig), {\n          domains: ssoConfig.domains.map(ssoDomain => ssoDomain.id === domainId ? Object.assign(Object.assign({}, ssoDomain), {\n            validated: true\n          }) : ssoDomain)\n        });\n      }\n\n      return ssoConfig;\n    });\n    yield put(actions.setSSOState({\n      ssoConfigurations: newSsoConfigurations\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.VALIDATE_SSO_DOMAIN,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.VALIDATE_SSO_DOMAIN,\n      value: false\n    }));\n  }\n}\n\nfunction* setSSODefaultRoles({\n  payload: {\n    callback,\n    ssoConfigId,\n    roleIds\n  }\n}) {\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.UPDATE_SSO_DEFAULT_ROLES,\n    value: true\n  }));\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    yield call(api.auth.setSSODefaultRoles, ssoConfigId, {\n      roleIds\n    });\n    const newSsoConfigurations = ssoConfigurations.map(ssoConfig => {\n      if (ssoConfig.id === ssoConfigId) {\n        return Object.assign(Object.assign({}, ssoConfig), {\n          roleIds\n        });\n      }\n\n      return ssoConfig;\n    });\n    yield put(actions.setSSOState({\n      ssoConfigurations: newSsoConfigurations\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.UPDATE_SSO_DEFAULT_ROLES,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.UPDATE_SSO_DEFAULT_ROLES,\n      value: false\n    }));\n  }\n}\n\nfunction* setSSOGroups({\n  payload: {\n    groupsToAdd,\n    groupsToDelete,\n    ssoConfigId,\n    callback\n  }\n}) {\n  yield put(actions.setSSOLoader({\n    key: SSOStateKeys.SAVE_SSO_GROUPS,\n    value: true\n  }));\n  const ssoConfigurations = yield select(state => state.auth.ssoState.ssoConfigurations);\n\n  try {\n    yield all(groupsToDelete.map(groupId => call(api.auth.deleteSSOGroup, ssoConfigId, groupId)));\n    yield all(groupsToAdd.map(group => call(api.auth.createSSOGroup, ssoConfigId, group)));\n    const groups = yield call(api.auth.getSSOGroups, ssoConfigId);\n    const newSsoConfigurations = ssoConfigurations.map(ssoConfig => {\n      if (ssoConfig.id === ssoConfigId) {\n        return Object.assign(Object.assign({}, ssoConfig), {\n          groups\n        });\n      }\n\n      return ssoConfig;\n    });\n    yield put(actions.setSSOState({\n      ssoConfigurations: newSsoConfigurations\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.SAVE_SSO_GROUPS,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.SAVE_SSO_GROUPS,\n      value: false\n    }));\n  }\n}\n\nfunction* updateSSOGroups({\n  payload: {\n    ssoConfigId,\n    changedGroups,\n    callback\n  }\n}) {\n  try {\n    yield all(changedGroups.map(group => call(api.auth.updateSSOGroup, ssoConfigId, group)));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (error) {\n    yield put(actions.setSSOError({\n      key: SSOStateKeys.SAVE_SSO_GROUPS,\n      value: error.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, error);\n  } finally {\n    yield put(actions.setSSOLoader({\n      key: SSOStateKeys.SAVE_SSO_GROUPS,\n      value: false\n    }));\n  }\n}\n\nfunction* ssoSagas() {\n  yield takeEvery(actions.loadSSOConfigurationsV2, loadSSOConfigurationsV2);\n  yield takeEvery(actions.saveSSOConfigurationV2, saveSSOConfigurationV2);\n  yield takeEvery(actions.saveSSODomain, saveSSODomain);\n  yield takeEvery(actions.deleteSSODomain, deleteSSODomain);\n  yield takeEvery(actions.validateSSODomainV2, validateSSODomainV2);\n  yield takeEvery(actions.updateSSOConfiguration, updateSSOConfiguration);\n  yield takeEvery(actions.deleteSSOConfiguration, deleteSSOConfiguration);\n  yield takeEvery(actions.setSSOGroups, setSSOGroups);\n  yield takeEvery(actions.updateSSOGroups, updateSSOGroups);\n  yield takeEvery(actions.setSSODefaultRoles, setSSODefaultRoles);\n  yield takeEvery(actions.saveSSOConfigurationByMetadata, saveSSOConfigurationByMetadata);\n  yield takeEvery(actions.updateSSOConfigurationByMetadata, updateSSOConfigurationByMetadata);\n}\n\nfunction* loadProfile() {\n  yield put(actions.setProfileState({\n    loading: true\n  }));\n\n  try {\n    const profile = yield retry(3, 2000, api.teams.getProfile);\n    const currentUser = yield select(state => state.auth.user);\n    actions.setUser(Object.assign(Object.assign({}, currentUser), profile));\n    yield put(actions.setProfileState({\n      profile,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setProfileState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction b64toBlob(base64, contentType) {\n  const sliceSize = 512;\n  const byteCharacters = atob(base64);\n  const byteArrays = [];\n\n  for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    const slice = byteCharacters.slice(offset, offset + sliceSize);\n    const byteNumbers = new Array(slice.length);\n\n    for (let i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    byteArrays.push(new Uint8Array(byteNumbers));\n  }\n\n  return new Blob(byteArrays, {\n    type: contentType\n  });\n}\n\nfunction base64ToFormData(base64, key = 'file') {\n  const matchResult = base64.match(/^data:image\\/([A-Za-z-+\\/]+);base64,(.+)$/);\n\n  if (matchResult == null) {\n    return null;\n  } // Get the content type of the image\n\n\n  const contentType = `image/${matchResult[1]}`; // get the real base64 content of the file\n\n  const data = matchResult[2]; // Convert it to a blob to upload\n\n  const blob = b64toBlob(data, contentType); // Create a FormData and append the file with \"image\" as parameter name\n\n  const formDataToUpload = new FormData();\n  formDataToUpload.append(key, new File([blob], key, {\n    type: contentType\n  }));\n  return formDataToUpload;\n}\n\nfunction* saveProfile(_a) {\n  var _b = _a.payload,\n      {\n    callback,\n    profilePictureUrl\n  } = _b,\n      payload = __rest(_b, [\"callback\", \"profilePictureUrl\"]);\n\n  yield put(actions.setProfileState({\n    saving: true,\n    error: null\n  }));\n\n  try {\n    const oldProfileData = yield select(state => state.auth.profileState.profile);\n    let newProfilePictureUrl = oldProfileData.profilePictureUrl;\n\n    if (profilePictureUrl !== oldProfileData.profilePictureUrl && profilePictureUrl) {\n      const matchResult = (profilePictureUrl || '').match(/^data:image\\/([A-Za-z-+\\/]+);base64,(.+)$/);\n\n      if (matchResult) {\n        const profileImage = base64ToFormData(profilePictureUrl, 'image');\n\n        if (profileImage) {\n          newProfilePictureUrl = yield call(api.teams.updateProfileImage, profileImage);\n          const imageTimeStamp = Date.now().toString();\n          const urlTemplate = new URL(newProfilePictureUrl);\n          urlTemplate.searchParams.set('t', imageTimeStamp);\n          newProfilePictureUrl = urlTemplate.href;\n        }\n      }\n    }\n\n    const newProfileData = Object.assign(Object.assign(Object.assign({}, oldProfileData), payload), {\n      profilePictureUrl: newProfilePictureUrl\n    });\n    const profile = yield call(api.teams.updateProfile, newProfileData);\n    const currentUser = yield select(state => state.auth.user);\n    yield put(actions.setUser(Object.assign(Object.assign({}, currentUser), profile)));\n    yield put(actions.setProfileState({\n      profile,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(newProfileData);\n  } catch (e) {\n    yield put(actions.setProfileState({\n      saving: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* changePassword({\n  payload\n}) {\n  var _a, _b;\n\n  yield put(actions.setProfileState({\n    loading: true\n  }));\n\n  try {\n    yield call(api.teams.changePassword, payload);\n    yield put(actions.setProfileState({\n      loading: false,\n      error: undefined\n    }));\n    (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n  } catch (e) {\n    yield put(actions.setProfileState({\n      loading: false,\n      error: e.message\n    }));\n    (_b = payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\n  }\n}\n\nfunction* profileSagas() {\n  yield takeLeading(actions.loadProfile, loadProfile);\n  yield takeEvery(actions.saveProfile, saveProfile);\n  yield takeEvery(actions.changePassword, changePassword);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* loadProfileMock() {\n  yield put(actions.setProfileState({\n    loading: true\n  }));\n  yield delay();\n  yield put(actions.setUser(Object.assign(Object.assign({}, userDemo), userProfileDemo)));\n  yield put(actions.setProfileState({\n    loading: false,\n    profile: userProfileDemo\n  }));\n}\n\nfunction* saveProfileMock(_a) {\n  var _b = _a.payload,\n      {\n    callback,\n    profilePictureUrl\n  } = _b,\n      payload = __rest(_b, [\"callback\", \"profilePictureUrl\"]);\n\n  yield put(actions.setProfileState({\n    saving: true,\n    error: null\n  }));\n  const oldProfileData = profileStateDemo;\n  let newProfilePictureUrl = oldProfileData.profile.profilePictureUrl;\n\n  if (profilePictureUrl !== oldProfileData.profile.profilePictureUrl && profilePictureUrl) {\n    const matchResult = (profilePictureUrl || '').match(/^data:image\\/([A-Za-z-+\\/]+);base64,(.+)$/);\n\n    if (matchResult) {\n      newProfilePictureUrl = profilePictureUrl;\n    }\n  }\n\n  const newProfileData = Object.assign(Object.assign(Object.assign({}, oldProfileData.profile), payload), {\n    profilePictureUrl: newProfilePictureUrl\n  });\n  const currentUser = userDemo;\n  yield delay();\n  yield put(actions.setUser(Object.assign(Object.assign({}, currentUser), newProfileData)));\n  yield put(actions.setProfileState({\n    loading: false,\n    error: null,\n    saving: false,\n    profile: newProfileData\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(newProfileData);\n}\n\nfunction* changePasswordMock({\n  payload\n}) {\n  var _a;\n\n  yield put(actions.setProfileState({\n    loading: true\n  }));\n  yield delay();\n  yield put(actions.setProfileState({\n    loading: false,\n    error: undefined\n  }));\n  (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n}\n\nfunction* profileSagasMock() {\n  yield takeLeading(actions.loadProfile, loadProfileMock);\n  yield takeEvery(actions.saveProfile, saveProfileMock);\n  yield takeEvery(actions.changePassword, changePasswordMock);\n}\n\nfunction* enrollMfa() {\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n\n  try {\n    const {\n      qrCode\n    } = yield call(api.auth.enrollMfa);\n    yield put(actions.setMfaState({\n      loading: false,\n      error: undefined,\n      qrCode\n    }));\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* verifyMfa(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      payload = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n\n  try {\n    const user = yield select(state => state.auth.user);\n    const data = yield call(api.auth.verifyMfa, payload);\n    const mfaState = {\n      step: MFAStep.recoveryCode,\n      loading: false,\n      error: undefined\n    };\n\n    if (data === null || data === void 0 ? void 0 : data.recoveryCode) {\n      mfaState.recoveryCode = data.recoveryCode;\n    }\n\n    yield put(actions.setMfaState(mfaState));\n    yield put(actions.setUser(Object.assign(Object.assign({}, user), {\n      mfaEnrolled: true\n    })));\n    callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* verifyMfaAfterForce(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      payload = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n\n  try {\n    const user = yield call(api.auth.loginWithMfa, payload);\n    const mfaState = {\n      step: MFAStep.recoveryCode,\n      loading: false,\n      error: undefined\n    };\n\n    if (user === null || user === void 0 ? void 0 : user.recoveryCode) {\n      mfaState.recoveryCode = user.recoveryCode;\n    }\n\n    yield put(actions.setMfaState(mfaState));\n    yield put(actions.setState({\n      user\n    }));\n    yield put(actions.loadTenants());\n    callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* disableMfa({\n  payload\n}) {\n  var _a, _b;\n\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n\n  try {\n    const user = yield select(state => state.auth.user);\n    yield api.auth.disableMfa(payload);\n    yield put(actions.setMfaState({\n      loading: false,\n      error: undefined\n    }));\n    yield put(actions.setUser(Object.assign(Object.assign({}, user), {\n      mfaEnrolled: false\n    })));\n    (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n    (_b = payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, false, e);\n  }\n}\n\nfunction* mfaSagas() {\n  yield takeEvery(actions.enrollMfa, enrollMfa);\n  yield takeEvery(actions.verifyMfa, verifyMfa);\n  yield takeEvery(actions.disableMfa, disableMfa);\n  yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForce);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* enrollMfaMock() {\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  const qrCode = 'test';\n  yield put(actions.setMfaState({\n    loading: false,\n    error: undefined,\n    qrCode\n  }));\n}\n\nfunction* verifyMfaMock({\n  payload: {\n    callback\n  }\n}) {\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  yield delay();\n  const data = {\n    token: 'token',\n    recoveryCode: 'recoveryCode'\n  };\n  const mfaState = {\n    step: MFAStep.recoveryCode,\n    loading: false,\n    error: undefined\n  };\n\n  if (data === null || data === void 0 ? void 0 : data.recoveryCode) {\n    mfaState.recoveryCode = data.recoveryCode;\n  }\n\n  yield put(actions.setMfaState(mfaState));\n  yield put(actions.setUser(Object.assign(Object.assign({}, userDemo), {\n    mfaEnrolled: true\n  })));\n  callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\n}\n\nfunction* verifyMfaAfterForceMock(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      payload = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  yield delay();\n  const data = Object.assign(Object.assign({}, payload), {\n    recoveryCode: 'recoveryCode'\n  });\n  const mfaState = {\n    step: MFAStep.recoveryCode,\n    loading: false,\n    error: undefined\n  };\n\n  if (data === null || data === void 0 ? void 0 : data.recoveryCode) {\n    mfaState.recoveryCode = data.recoveryCode;\n  }\n\n  yield put(actions.setMfaState(mfaState));\n  yield delay();\n  yield put(actions.setUser(Object.assign(Object.assign({}, userDemo), {\n    mfaEnrolled: true\n  })));\n  callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\n}\n\nfunction* disableMfaMock({\n  payload\n}) {\n  var _a;\n\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  yield delay();\n  yield put(actions.setMfaState({\n    loading: false,\n    error: undefined\n  }));\n  yield put(actions.setUser(Object.assign(Object.assign({}, userDemo), {\n    mfaEnrolled: false\n  })));\n  (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n}\n\nfunction* mfaSagasMock() {\n  yield takeEvery(actions.enrollMfa, enrollMfaMock);\n  yield takeEvery(actions.verifyMfa, verifyMfaMock);\n  yield takeEvery(actions.disableMfa, disableMfaMock);\n  yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForceMock);\n}\n\nfunction* forgotPassword({\n  payload\n}) {\n  yield put(actions.setForgotPasswordState({\n    loading: true\n  }));\n\n  try {\n    yield call(api.auth.forgotPassword, payload);\n    yield put(actions.setForgotPasswordState({\n      loading: false,\n      error: undefined,\n      step: ForgotPasswordStep.success\n    }));\n  } catch (e) {\n    yield put(actions.setForgotPasswordState({\n      loading: false,\n      error: e.message || 'Unknown error occurred'\n    }));\n  }\n}\n\nfunction* resetPassword(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setForgotPasswordState({\n    loading: true\n  }));\n\n  try {\n    yield call(api.auth.resetPassword, body);\n    yield put(actions.setForgotPasswordState({\n      loading: false,\n      error: undefined,\n      step: ForgotPasswordStep.success\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setForgotPasswordState({\n      loading: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(false);\n  }\n}\n\nfunction* loadPasswordConfig({\n  payload\n}) {\n  yield put(actions.setForgotPasswordState({\n    loading: true\n  }));\n\n  try {\n    const passwordConfig = yield call(api.auth.loadPasswordConfig, payload);\n    yield put(actions.setForgotPasswordState({\n      loading: false,\n      passwordConfig\n    }));\n  } catch (e) {\n    yield put(actions.setForgotPasswordState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* forgotPasswordSagas() {\n  yield takeLeading(actions.forgotPassword, forgotPassword);\n  yield takeLeading(actions.resetPassword, resetPassword);\n  yield takeLeading(actions.loadPasswordConfig, loadPasswordConfig);\n}\n\nfunction* preActivateAccount({\n  payload: {\n    userId,\n    token\n  }\n}) {\n  yield put(actions.setActivateState({\n    loading: true,\n    step: ActivateAccountStep.activating\n  }));\n\n  try {\n    const {\n      isAuthenticated\n    } = yield select(state => state.auth);\n\n    if (isAuthenticated) {\n      yield put(actions.silentLogout());\n    }\n\n    const strategy = yield call(api.auth.getActivateAccountStrategy, {\n      userId,\n      token\n    });\n    yield put(actions.setActivateStrategyState({\n      strategy,\n      loading: false,\n      error: undefined\n    }));\n\n    if (strategy.shouldSetPassword) {\n      yield put(actions.setActivateState({\n        loading: false,\n        step: ActivateAccountStep.activatingForm\n      }));\n    }\n  } catch (e) {\n    yield put(actions.setActivateState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* activateAccount(_a) {\n  var _b;\n\n  var _c = _a.payload,\n      {\n    callback,\n    events\n  } = _c,\n      payload = __rest(_c, [\"callback\", \"events\"]);\n\n  yield put(actions.setActivateState({\n    loading: true\n  }));\n\n  try {\n    const onRedirectTo = ContextHolder.onRedirectTo;\n    const {\n      routes\n    } = yield select(state => state.auth);\n    const data = yield call(api.auth.activateAccount, payload);\n\n    if (data.redirectLocation) {\n      window.location.href = data.redirectLocation;\n      return;\n    }\n\n    if (isMfaRequired(data)) {\n      yield put(actions.setActivateState({\n        step: ActivateAccountStep.success\n      }));\n      const mfaRequiredState = yield getMfaRequiredState(data);\n      yield put(actions.setState(mfaRequiredState));\n      yield delay$1(1000);\n      onRedirectTo(routes.loginUrl, {\n        preserveQueryParams: true\n      });\n    } else {\n      yield put(actions.setActivateState({\n        step: ActivateAccountStep.success\n      }));\n      const {\n        user,\n        tenants\n      } = yield call(api.auth.generateLoginResponseV2, data);\n      (_b = events === null || events === void 0 ? void 0 : events.userVerified) === null || _b === void 0 ? void 0 : _b.call(events, {\n        email: user.email,\n        origin: UserVeirifedOriginTypes.ACTIVATION_LINK,\n        id: user.id,\n        tenantId: user.tenantId,\n        name: user.name,\n        createdAt: new Date()\n      });\n      yield put(actions.setTenantsState({\n        tenants,\n        loading: false\n      }));\n      yield put(actions.setState({\n        user,\n        isAuthenticated: true\n      }));\n      yield delay$1(1000);\n      yield afterAuthNavigation();\n      yield put(actions.resetActivateState());\n    }\n\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setActivateState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* getActivateAccountStrategy({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        params = __rest(payload, [\"callback\"]);\n\n  yield put(actions.setActivateStrategyState({\n    loading: true\n  }));\n\n  try {\n    const strategy = yield call(api.auth.getActivateAccountStrategy, params);\n    yield put(actions.setActivateStrategyState({\n      strategy,\n      loading: false,\n      error: undefined\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(strategy);\n  } catch (e) {\n    yield put(actions.setActivateStrategyState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* resendActivationEmailFunction({\n  payload\n}) {\n  yield put(actions.setActivateState({\n    loading: true\n  }));\n\n  try {\n    yield call(api.auth.resendActivationEmail, {\n      email: payload.email\n    });\n    yield put(actions.setActivateState({\n      loading: false,\n      error: undefined,\n      resentEmail: true\n    }));\n  } catch (e) {\n    yield put(actions.setActivateState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* activateSagas() {\n  yield takeLeading(actions.activateAccount, activateAccount);\n  yield takeLeading(actions.preActivateAccount, preActivateAccount);\n  yield takeLeading(actions.getActivateAccountStrategy, getActivateAccountStrategy);\n  yield takeLeading(actions.resendActivationEmail, resendActivationEmailFunction);\n}\n\nfunction* acceptInvitation({\n  payload\n}) {\n  if (!payload.token || !payload.userId) {\n    yield put(actions.setAcceptInvitationState({\n      error: undefined,\n      step: AcceptInvitationStep.invalid\n    }));\n    return;\n  }\n\n  try {\n    yield put(actions.setAcceptInvitationState({\n      error: undefined,\n      step: AcceptInvitationStep.pending\n    }));\n    yield call(api.auth.acceptInvitation, payload);\n    yield put(actions.setState({\n      isAuthenticated: false,\n      user: null,\n      acceptInvitationState: {\n        error: undefined,\n        step: AcceptInvitationStep.success\n      }\n    }));\n  } catch (e) {\n    yield put(actions.setAcceptInvitationState({\n      step: AcceptInvitationStep.failed,\n      error: e.message\n    }));\n  }\n}\n\nfunction* acceptInvitationSagas() {\n  yield takeLeading(actions.acceptInvitation, acceptInvitation);\n}\n\nvar TeamStateKeys;\n\n(function (TeamStateKeys) {\n  TeamStateKeys[\"USERS\"] = \"USERS\";\n  TeamStateKeys[\"STATS\"] = \"STATS\";\n  TeamStateKeys[\"UPDATE_USER\"] = \"UPDATE_USER\";\n  TeamStateKeys[\"DELETE_USER\"] = \"DELETE_USER\";\n  TeamStateKeys[\"RESEND_ACTIVATE_LINK\"] = \"RESEND_ACTIVATE_LINK\";\n  TeamStateKeys[\"RESEND_INVITATION_LINK\"] = \"RESEND_INVITATION_LINK\";\n  TeamStateKeys[\"ROLES_AND_PERMISSIONS\"] = \"ROLES_AND_PERMISSIONS\";\n  TeamStateKeys[\"CREATE_TOKEN_LINK\"] = \"CREATE_TOKEN_LINK\";\n  TeamStateKeys[\"GET_TOKEN_LINK\"] = \"GET_TOKEN_LINK\";\n  TeamStateKeys[\"UPDATE_TOKEN_LINK\"] = \"UPDATE_TOKEN_LINK\";\n  TeamStateKeys[\"DELETE_TOKEN_LINK\"] = \"DELETE_TOKEN_LINK\";\n  TeamStateKeys[\"CONFIG_TOKEN_LINK\"] = \"CONFIG_TOKEN_LINK\";\n})(TeamStateKeys || (TeamStateKeys = {}));\n\nconst selectTeamState = () => select(_ => _[authStoreName].teamState);\n\nfunction* loadUsers({\n  payload\n}) {\n  var _a, _b, _c, _d;\n\n  const {\n    silentLoading,\n    callback\n  } = payload;\n  const teamState = yield selectTeamState();\n  const pageSize = (_a = payload.pageSize) !== null && _a !== void 0 ? _a : teamState.pageSize;\n  const pageOffset = (_b = payload.pageOffset) !== null && _b !== void 0 ? _b : teamState.pageOffset;\n  const filter = (_c = payload.filter) !== null && _c !== void 0 ? _c : teamState.filter;\n  const sort = (_d = payload.sort) !== null && _d !== void 0 ? _d : teamState.sort;\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: !silentLoading\n  }));\n  yield put(actions.setTeamState({\n    pageSize,\n    pageOffset,\n    filter,\n    sort\n  }));\n\n  try {\n    const [{\n      items: users,\n      totalPages,\n      totalItems\n    }, {\n      items: roles\n    }, {\n      items: permissions\n    }] = yield all([call(api.teams.loadUsers, {\n      pageSize,\n      pageOffset,\n      filter,\n      sort\n    }), call(api.teams.loadAvailableRoles), call(api.teams.loadAvailablePermissions)]);\n    yield put(actions.setTeamState({\n      users,\n      totalPages,\n      totalItems,\n      roles,\n      permissions\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(users);\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.USERS,\n      value: e.message\n    }));\n    yield put(actions.setTeamState({\n      totalPages: 0,\n      users: []\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: false\n  }));\n}\n\nfunction* loadAllSubTenantsUsers({\n  payload\n}) {\n  var _a, _b, _c, _d, _e;\n\n  const {\n    silentLoading,\n    callback\n  } = payload;\n  const teamState = yield selectTeamState();\n\n  const _limit = (_a = payload._limit) !== null && _a !== void 0 ? _a : teamState.allUsersQueryParams._limit;\n\n  const _offset = (_b = payload._offset) !== null && _b !== void 0 ? _b : teamState.allUsersQueryParams._offset;\n\n  const _filter = (_c = payload._filter) !== null && _c !== void 0 ? _c : teamState.allUsersQueryParams._filter;\n\n  const _sortBy = (_d = payload._sortBy) !== null && _d !== void 0 ? _d : teamState.allUsersQueryParams._sortBy;\n\n  const _order = (_e = payload._order) !== null && _e !== void 0 ? _e : teamState.allUsersQueryParams._order;\n\n  const allUsersQueryParams = {\n    _limit: _limit || 20,\n    _offset: _offset || 0,\n    _filter: _filter || '',\n    _sortBy: _sortBy || 'name',\n    _order: _order || 'DESC'\n  };\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: !silentLoading\n  }));\n  yield put(actions.setTeamState({\n    allUsersQueryParams\n  }));\n\n  try {\n    const [{\n      items: users,\n      _metadata: {\n        totalPages,\n        totalItems\n      }\n    }, {\n      items: roles\n    }, {\n      items: permissions\n    }] = yield all([call(api.subTenants.loadAllUsers, Object.assign({}, allUsersQueryParams)), call(api.teams.loadAvailableRoles), call(api.teams.loadAvailablePermissions)]);\n    yield put(actions.setTeamState({\n      allUsers: users,\n      totalPages,\n      totalItems,\n      roles,\n      permissions\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(users);\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.USERS,\n      value: e.message\n    }));\n    yield put(actions.setTeamState({\n      totalPages: 0,\n      users: []\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: false\n  }));\n}\n\nfunction* loadRoles({\n  payload\n}) {\n  var _a, _b;\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.ROLES_AND_PERMISSIONS,\n    value: true\n  }));\n\n  try {\n    const [{\n      items: roles\n    }, {\n      items: permissions\n    }] = yield all([call(api.teams.loadAvailableRoles), call(api.teams.loadAvailablePermissions)]);\n    yield put(actions.setTeamState({\n      roles,\n      permissions\n    }));\n    (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, {\n      roles,\n      permissions\n    });\n  } catch (e) {\n    (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.ROLES_AND_PERMISSIONS,\n      value: e.message\n    }));\n  }\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.ROLES_AND_PERMISSIONS,\n    value: true\n  }));\n}\n\nfunction* addUser({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    })\n  }));\n\n  try {\n    const res = yield call(api.teams.addUser, body);\n\n    const {\n      roles\n    } = res,\n          userWithoutRoleIds = __rest(res, [\"roles\"]);\n\n    const roleIds = roles.map(role => role.id);\n    const newUser = Object.assign(Object.assign({}, userWithoutRoleIds), {\n      roleIds\n    });\n    callback === null || callback === void 0 ? void 0 : callback(newUser);\n    yield put(actions.setTeamState({\n      users: [newUser, ...teamState.users],\n      addUserDialogState: {\n        open: false,\n        loading: false\n      }\n    }));\n  } catch (e) {\n    yield put(actions.setTeamState({\n      addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n        loading: false,\n        error: e.message\n      })\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* addUserToSubTenants({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    })\n  }));\n\n  try {\n    yield call(api.subTenants.addUserToTenantAndSubTenants, body);\n    const {\n      items: users,\n      _metadata: {\n        totalPages,\n        totalItems\n      }\n    } = yield call(api.subTenants.loadAllUsers, {\n      _limit: 20,\n      _offset: 0,\n      _filter: '',\n      _sortBy: 'name',\n      _order: 'DESC'\n    });\n    yield put(actions.setTeamState({\n      allUsers: users,\n      totalPages,\n      totalItems,\n      addUserDialogState: {\n        open: false,\n        loading: false\n      }\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null);\n  } catch (e) {\n    yield put(actions.setTeamState({\n      addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n        loading: false,\n        error: e.message\n      })\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* updateUser({\n  payload\n}) {\n  var _a;\n\n  const {\n    callback,\n    profileImage\n  } = payload,\n        body = __rest(payload, [\"callback\", \"profileImage\"]);\n\n  const {\n    id: userId\n  } = body;\n  const teamState = yield selectTeamState();\n  const oldUserData = teamState.users.find(user => user.id === body.id);\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.UPDATE_USER,\n    value: userId || ''\n  }));\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    })\n  }));\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    }),\n    users: teamState.users.map(user => {\n      if (user.id === body.id) {\n        return Object.assign(Object.assign({}, user), body);\n      }\n\n      return user;\n    })\n  }));\n\n  try {\n    if (oldUserData.roleIds.length > 0 && ((_a = body.roleIds) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n      body.roleIds = [''];\n    }\n\n    const {\n      item: newUser\n    } = yield call(api.teams.updateUser, body);\n    callback === null || callback === void 0 ? void 0 : callback(newUser);\n    yield put(actions.setTeamState({\n      users: teamState.users.map(user => user.id === newUser.id ? Object.assign(Object.assign(Object.assign({}, user), newUser), {\n        createdAt: user.createdAt,\n        customData: user.customData,\n        lastLogin: user.lastLogin\n      }) : user)\n    }));\n    yield put(actions.setTeamLoader({\n      key: TeamStateKeys.UPDATE_USER,\n      value: false\n    }));\n  } catch (e) {\n    yield put(actions.setTeamState({\n      addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n        loading: false,\n        error: e.message\n      }),\n      users: teamState.users.map(user => user.id === body.id ? Object.assign(Object.assign({}, user), oldUserData) : user)\n    }));\n    yield put(actions.setTeamLoader({\n      key: TeamStateKeys.UPDATE_USER,\n      value: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* deleteUser({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), {\n      loading: true\n    })\n  }));\n\n  try {\n    yield call(api.teams.deleteUser, body);\n    callback === null || callback === void 0 ? void 0 : callback(true);\n    yield put(actions.setTeamState({\n      users: teamState.users.filter(user => user.id !== body.userId),\n      deleteUserDialogState: {\n        open: false,\n        loading: false\n      }\n    }));\n  } catch (e) {\n    yield put(actions.setTeamState({\n      deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), {\n        loading: false,\n        error: e.message\n      })\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* setUserRolesForSubTenants({\n  payload\n}) {\n  const {\n    callback,\n    userId\n  } = payload,\n        body = __rest(payload, [\"callback\", \"userId\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    })\n  }));\n\n  try {\n    yield call(api.subTenants.setUserRolesForSubTenants, userId, body);\n    const updatedUser = teamState.allUsers.find(user => user.id === userId);\n    let newTenants = [];\n\n    if (updatedUser) {\n      newTenants = updatedUser.tenants.map(tenant => {\n        var _a;\n\n        return Object.assign(Object.assign({}, tenant), {\n          roles: ((_a = body.subTenantsRoles.find(roleUpdate => roleUpdate.tenantId === tenant.tenantId)) === null || _a === void 0 ? void 0 : _a.roleIds.map(roleId => {\n            const role = teamState.roles.find(({\n              id\n            }) => roleId === id);\n            return role;\n          }).filter(role => role)) || tenant.roles\n        });\n      });\n    }\n\n    yield put(actions.setTeamState({\n      allUsers: [...teamState.allUsers.filter(user => user.id !== userId), ...(updatedUser ? [Object.assign(Object.assign({}, updatedUser), {\n        tenants: newTenants\n      })] : [])],\n      addUserDialogState: {\n        open: false,\n        loading: false\n      }\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setTeamState({\n      addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n        loading: false,\n        error: e.message\n      })\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* deleteUserFromSubTenants({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), {\n      loading: true\n    })\n  }));\n\n  try {\n    yield call(api.subTenants.removeUserFromTenantAndSubTenants, body);\n    callback === null || callback === void 0 ? void 0 : callback(true);\n    yield put(actions.setTeamState({\n      allUsers: teamState.allUsers.filter(user => user.id !== body.userId && user.tenants.length === body.subTenants.length),\n      deleteUserDialogState: {\n        open: false,\n        loading: false\n      }\n    }));\n  } catch (e) {\n    yield put(actions.setTeamState({\n      deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), {\n        loading: false,\n        error: e.message\n      })\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* resendActivationLink({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_ACTIVATE_LINK,\n    value: body.userId\n  }));\n\n  try {\n    yield call(api.teams.resendActivationLink, body);\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.RESEND_ACTIVATE_LINK,\n      value: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_ACTIVATE_LINK,\n    value: false\n  }));\n}\n\nfunction* resendInvitationLink({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: body.email\n  }));\n\n  try {\n    yield call(api.teams.resendInvitationLink, body);\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.RESEND_INVITATION_LINK,\n      value: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: false\n  }));\n}\n\nfunction* resendInvitationLinkToAllSubTenants({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: body.email\n  }));\n\n  try {\n    yield call(api.teams.resendInvitationLinkToAllTenants, body);\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.RESEND_INVITATION_LINK,\n      value: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: false\n  }));\n}\n\nfunction* getInvitationLinkConfig() {\n  yield put(actions.setTeamError({\n    key: TeamStateKeys.CONFIG_TOKEN_LINK,\n    value: false\n  }));\n\n  try {\n    const invitationLinkConfig = yield call(api.teams.getInviteLinkConfiguration);\n    yield put(actions.setTeamState({\n      inviteTokenState: Object.assign({}, invitationLinkConfig)\n    }));\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.CONFIG_TOKEN_LINK,\n      value: e.message\n    }));\n  }\n}\n\nfunction* getInvitationLink() {\n  yield put(actions.setTeamError({\n    key: TeamStateKeys.GET_TOKEN_LINK,\n    value: false\n  }));\n\n  try {\n    yield call(getInvitationLinkConfig);\n    const data = yield call(api.teams.getInviteUserLink);\n    const {\n      inviteTokenState\n    } = yield selectTeamState();\n    yield put(actions.setTeamState({\n      inviteTokenState: Object.assign(Object.assign({}, inviteTokenState), data)\n    }));\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.GET_TOKEN_LINK,\n      value: e.message\n    }));\n  }\n}\n\nfunction* createInvitationLink({\n  payload: {\n    callback\n  }\n}) {\n  yield put(actions.setTeamError({\n    key: TeamStateKeys.CREATE_TOKEN_LINK,\n    value: false\n  }));\n  const {\n    inviteTokenState\n  } = yield selectTeamState();\n\n  try {\n    const data = yield call(api.teams.createInviteUserLink, {\n      expiresInMinutes: 43200\n    });\n    yield put(actions.setTeamState({\n      inviteTokenState: Object.assign(Object.assign({}, inviteTokenState), data)\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(data.token);\n  } catch (e) {\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.CREATE_TOKEN_LINK,\n      value: e.message\n    }));\n  }\n}\n\nfunction* updateInvitationLink({\n  payload: {\n    callback,\n    expiresInMinutes,\n    shouldSendEmail\n  }\n}) {\n  const {\n    inviteTokenState\n  } = yield selectTeamState();\n  yield put(actions.setTeamError({\n    key: TeamStateKeys.UPDATE_TOKEN_LINK,\n    value: false\n  }));\n\n  try {\n    const data = yield call(api.teams.updateInviteUserLink, {\n      expiresInMinutes,\n      shouldSendEmail\n    });\n    yield put(actions.setTeamState({\n      inviteTokenState: Object.assign(Object.assign({}, inviteTokenState), data)\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.UPDATE_TOKEN_LINK,\n      value: e.message\n    }));\n  }\n}\n\nfunction* deleteInvitationLink({\n  payload\n}) {\n  const {\n    callback\n  } = payload !== null && payload !== void 0 ? payload : {};\n  yield put(actions.setTeamError({\n    key: TeamStateKeys.DELETE_TOKEN_LINK,\n    value: false\n  }));\n\n  try {\n    yield call(api.teams.deleteInviteUserLink);\n    yield put(actions.setTeamState({\n      inviteTokenState: undefined\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setTeamError({\n      key: TeamStateKeys.DELETE_TOKEN_LINK,\n      value: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(false, e.message);\n  }\n}\n\nfunction* openAddUserDialog({\n  payload\n}) {\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign({\n      open: true,\n      loading: false,\n      error: false\n    }, payload)\n  }));\n}\n\nfunction* closeAddUserDialog({\n  payload\n}) {\n  const teamState = yield selectTeamState();\n  const {\n    addUserDialogState: {\n      onClose\n    }\n  } = teamState;\n  onClose === null || onClose === void 0 ? void 0 : onClose(payload);\n  yield put(actions.setTeamState({\n    addUserDialogState: {\n      loading: false,\n      error: false,\n      open: false\n    }\n  }));\n}\n\nfunction* openDeleteUserDialog({\n  payload\n}) {\n  yield put(actions.setTeamState({\n    deleteUserDialogState: Object.assign({\n      open: true,\n      loading: false,\n      error: false\n    }, payload)\n  }));\n}\n\nfunction* closeDeleteUserDialog({\n  payload\n}) {\n  const teamState = yield selectTeamState();\n  const {\n    deleteUserDialogState: {\n      onClose\n    }\n  } = teamState;\n  onClose === null || onClose === void 0 ? void 0 : onClose(payload);\n  yield put(actions.setTeamState({\n    deleteUserDialogState: {\n      loading: false,\n      error: false,\n      open: false\n    }\n  }));\n}\n\nfunction* teamSagas() {\n  yield takeLatest(actions.loadUsers, loadUsers);\n  yield takeLatest(actions.loadAllSubTenantsUsers, loadAllSubTenantsUsers);\n  yield takeLatest(actions.loadRoles, loadRoles);\n  yield takeEvery(actions.addUser, addUser);\n  yield takeEvery(actions.addUserToSubTenants, addUserToSubTenants);\n  yield takeEvery(actions.updateUser, updateUser);\n  yield takeEvery(actions.setUserRolesForSubTenants, setUserRolesForSubTenants);\n  yield takeEvery(actions.deleteUser, deleteUser);\n  yield takeEvery(actions.deleteUserFromSubTenants, deleteUserFromSubTenants);\n  yield takeEvery(actions.resendActivationLink, resendActivationLink);\n  yield takeEvery(actions.resendInvitationLink, resendInvitationLink);\n  yield takeEvery(actions.resendInvitationLinkToAllSubTenants, resendInvitationLinkToAllSubTenants);\n  yield takeEvery(actions.getInvitationLink, getInvitationLink);\n  yield takeEvery(actions.createInvitationLink, createInvitationLink);\n  yield takeEvery(actions.updateInvitationLink, updateInvitationLink);\n  yield takeEvery(actions.deleteInvitationLink, deleteInvitationLink);\n  yield takeEvery(actions.openAddUserDialog, openAddUserDialog);\n  yield takeEvery(actions.closeAddUserDialog, closeAddUserDialog);\n  yield takeEvery(actions.openDeleteUserDialog, openDeleteUserDialog);\n  yield takeEvery(actions.closeDeleteUserDialog, closeDeleteUserDialog);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* loadUsersMock({\n  payload\n}) {\n  var _a, _b, _c, _d;\n\n  const {\n    silentLoading,\n    callback\n  } = payload;\n  const teamState = yield selectTeamState();\n  const pageSize = (_a = payload.pageSize) !== null && _a !== void 0 ? _a : teamState.pageSize;\n  const pageOffset = (_b = payload.pageOffset) !== null && _b !== void 0 ? _b : teamState.pageOffset;\n  const filter = (_c = payload.filter) !== null && _c !== void 0 ? _c : teamState.filter;\n  const sort = (_d = payload.sort) !== null && _d !== void 0 ? _d : teamState.sort;\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: !silentLoading\n  }));\n  yield put(actions.setTeamState({\n    pageSize,\n    pageOffset,\n    filter,\n    sort\n  }));\n  const totalPages = 2;\n  const totalItems = 10;\n  yield delay();\n  yield put(actions.setTeamState({\n    users: usersDemo,\n    totalPages,\n    totalItems,\n    roles: rolesDemo,\n    permissions: permissionsDemo\n  }));\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: false\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(usersDemo);\n}\n\nfunction* loadAllSubTenantsUsersMock({\n  payload\n}) {\n  var _a, _b, _c, _d, _e;\n\n  const {\n    silentLoading,\n    callback\n  } = payload;\n  const teamState = yield selectTeamState();\n\n  const _limit = (_a = payload._limit) !== null && _a !== void 0 ? _a : teamState.allUsersQueryParams._limit;\n\n  const _offset = (_b = payload._offset) !== null && _b !== void 0 ? _b : teamState.allUsersQueryParams._offset;\n\n  const _filter = (_c = payload._filter) !== null && _c !== void 0 ? _c : teamState.allUsersQueryParams._filter;\n\n  const _sortBy = (_d = payload._sortBy) !== null && _d !== void 0 ? _d : teamState.allUsersQueryParams._sortBy;\n\n  const _order = (_e = payload._order) !== null && _e !== void 0 ? _e : teamState.allUsersQueryParams._order;\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: !silentLoading\n  }));\n  yield put(actions.setTeamState({\n    allUsersQueryParams: {\n      _limit,\n      _offset,\n      _filter,\n      _sortBy,\n      _order\n    }\n  }));\n  const totalPages = 2;\n  const totalItems = 10;\n  yield delay();\n  yield put(actions.setTeamState({\n    allUsers: allUsersDemo,\n    totalPages,\n    totalItems,\n    roles: rolesDemo,\n    permissions: permissionsDemo\n  }));\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.USERS,\n    value: false\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(allUsersDemo);\n}\n\nfunction* loadRolesMock({\n  payload\n}) {\n  var _a;\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.ROLES_AND_PERMISSIONS,\n    value: true\n  }));\n  yield delay();\n  yield put(actions.setTeamState({\n    roles: rolesDemo,\n    permissions: permissionsDemo\n  }));\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.ROLES_AND_PERMISSIONS,\n    value: true\n  }));\n  (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, {\n    roles: rolesDemo,\n    permissions: permissionsDemo\n  });\n}\n\nfunction* addUserMock({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    })\n  }));\n  yield delay();\n  const newUser = Object.assign(Object.assign(Object.assign({}, userTeamDemo), body), {\n    id: `${v4()}`\n  });\n  callback === null || callback === void 0 ? void 0 : callback(newUser);\n  yield put(actions.setTeamState({\n    users: [newUser, ...teamState.users],\n    addUserDialogState: {\n      open: false,\n      loading: false\n    }\n  }));\n}\n\nfunction* addUserToSubTenantsMock({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    })\n  }));\n  yield delay();\n  const newUser = Object.assign(Object.assign(Object.assign({}, userTeamDemo), body), {\n    id: `${v4()}`\n  });\n  yield put(actions.setTeamState({\n    users: [newUser, ...teamState.users],\n    addUserDialogState: {\n      open: false,\n      loading: false\n    }\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(null);\n}\n\nfunction* updateUserMock({\n  payload\n}) {\n  var _a;\n\n  const {\n    callback,\n    profileImage\n  } = payload,\n        body = __rest(payload, [\"callback\", \"profileImage\"]);\n\n  const {\n    id: userId\n  } = body;\n  const teamState = yield selectTeamState();\n  const oldUserData = teamState.users.find(user => user.id === body.id);\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.UPDATE_USER,\n    value: userId || ''\n  }));\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    })\n  }));\n  yield put(actions.setTeamState({\n    addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), {\n      loading: true\n    }),\n    users: teamState.users.map(user => {\n      if (user.id === body.id) {\n        return Object.assign(Object.assign({}, user), body);\n      }\n\n      return user;\n    })\n  }));\n\n  if (oldUserData.roleIds.length > 0 && ((_a = body.roleIds) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n    body.roleIds = [''];\n  }\n\n  yield delay();\n  const newUser = Object.assign(Object.assign({}, oldUserData), body);\n  callback === null || callback === void 0 ? void 0 : callback(newUser);\n  yield put(actions.setTeamState({\n    users: teamState.users.map(user => user.id === newUser.id ? Object.assign(Object.assign(Object.assign({}, user), newUser), {\n      createdAt: user.createdAt,\n      customData: user.customData,\n      lastLogin: user.lastLogin\n    }) : user)\n  }));\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.UPDATE_USER,\n    value: false\n  }));\n}\n\nfunction* deleteUserMock({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), {\n      loading: true\n    })\n  }));\n  yield delay();\n  callback === null || callback === void 0 ? void 0 : callback(true);\n  yield put(actions.setTeamState({\n    users: teamState.users.filter(user => user.id !== body.userId),\n    deleteUserDialogState: {\n      open: false,\n      loading: false\n    }\n  }));\n}\n\nfunction* deleteUserFromSubTenantsMock({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  const teamState = yield selectTeamState();\n  yield put(actions.setTeamState({\n    deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), {\n      loading: true\n    })\n  }));\n  yield delay();\n  callback === null || callback === void 0 ? void 0 : callback(true);\n  yield put(actions.setTeamState({\n    allUsers: teamState.allUsers.filter(user => user.id !== body.userId),\n    deleteUserDialogState: {\n      open: false,\n      loading: false\n    }\n  }));\n}\n\nfunction* resendActivationLinkMock({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_ACTIVATE_LINK,\n    value: body.userId\n  }));\n  yield delay();\n  callback === null || callback === void 0 ? void 0 : callback(true);\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_ACTIVATE_LINK,\n    value: false\n  }));\n}\n\nfunction* resendInvitationLinkMock({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: body.email\n  }));\n  yield delay();\n  callback === null || callback === void 0 ? void 0 : callback(true);\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: false\n  }));\n}\n\nfunction* resendInvitationLinkToAllSubTenantsMock({\n  payload\n}) {\n  const {\n    callback\n  } = payload,\n        body = __rest(payload, [\"callback\"]);\n\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: body.email\n  }));\n  yield delay();\n  callback === null || callback === void 0 ? void 0 : callback(true);\n  yield put(actions.setTeamLoader({\n    key: TeamStateKeys.RESEND_INVITATION_LINK,\n    value: false\n  }));\n}\n\nfunction* teamSagasMock() {\n  yield takeLatest(actions.loadUsers, loadUsersMock);\n  yield takeLatest(actions.loadAllSubTenantsUsers, loadAllSubTenantsUsersMock);\n  yield takeLatest(actions.loadRoles, loadRolesMock);\n  yield takeEvery(actions.addUser, addUserMock);\n  yield takeEvery(actions.addUserToSubTenants, addUserToSubTenantsMock);\n  yield takeEvery(actions.updateUser, updateUserMock);\n  yield takeEvery(actions.deleteUser, deleteUserMock);\n  yield takeEvery(actions.deleteUserFromSubTenants, deleteUserFromSubTenantsMock);\n  yield takeEvery(actions.resendActivationLink, resendActivationLinkMock);\n  yield takeEvery(actions.resendInvitationLink, resendInvitationLinkMock);\n  yield takeEvery(actions.resendInvitationLinkToAllSubTenants, resendInvitationLinkToAllSubTenantsMock);\n  yield takeEvery(actions.openAddUserDialog, openAddUserDialog);\n  yield takeEvery(actions.closeAddUserDialog, closeAddUserDialog);\n  yield takeEvery(actions.openDeleteUserDialog, openDeleteUserDialog);\n  yield takeEvery(actions.closeDeleteUserDialog, closeDeleteUserDialog);\n}\n\nfunction* loadSocialLoginsConfigurations() {\n  try {\n    yield put(actions.setSocialLoginsState({\n      loading: true\n    }));\n    const socialLoginsConfig = yield call(api.auth.getSocialLoginProviders);\n    yield put(actions.setSocialLoginsState({\n      socialLoginsConfig,\n      loading: false,\n      firstLoad: false\n    }));\n  } catch (e) {\n    yield put(actions.setSocialLoginsState({\n      error: e.message,\n      loading: false,\n      firstLoad: false\n    }));\n  }\n}\n\nfunction* loadSocialLoginsConfigurationsV2() {\n  try {\n    const context = yield select(state => state.root.context);\n    yield put(actions.setSocialLoginsState({\n      loading: true\n    }));\n    const socialLoginsConfigV2 = yield call(api.auth.getSocialLoginProvidersV2);\n    const socialLoginsConfigWithFullUrl = socialLoginsConfigV2.map(_a => {\n      var {\n        authorizationUrl\n      } = _a,\n          config = __rest(_a, [\"authorizationUrl\"]);\n\n      const baseUrl = fetch.getBaseUrl(context, authorizationUrl !== null && authorizationUrl !== void 0 ? authorizationUrl : '');\n      return Object.assign(Object.assign({}, config), {\n        authorizationUrl: authorizationUrl ? `${baseUrl}${authorizationUrl}` : null\n      });\n    });\n    yield put(actions.setSocialLoginsState({\n      socialLoginsConfigV2: socialLoginsConfigWithFullUrl,\n      loading: false,\n      firstLoad: false\n    }));\n  } catch (e) {\n    yield put(actions.setSocialLoginsState({\n      error: e.message,\n      loading: false,\n      firstLoad: false\n    }));\n  }\n}\n\nfunction* loginViaSocialLogin(_a) {\n  var _b, _c, _d;\n\n  var _e = _a.payload,\n      {\n    events,\n    url\n  } = _e,\n      payload = __rest(_e, [\"events\", \"url\"]);\n\n  try {\n    yield put(actions.setSocialLoginsState({\n      loading: true\n    }));\n    const {\n      email,\n      isNewUser,\n      userId,\n      tenantId,\n      name\n    } = yield call(api.auth.loginViaSocialLogin, payload);\n\n    if (isNewUser) {\n      (_b = events === null || events === void 0 ? void 0 : events.signUpComplete) === null || _b === void 0 ? void 0 : _b.call(events, {\n        email,\n        url,\n        authenticationType: AuthenticationTypes.SOCIAL_LOGIN,\n        createdAt: new Date(),\n        id: userId,\n        socialProvider: payload.provider,\n        tenantId\n      });\n      (_c = events === null || events === void 0 ? void 0 : events.userVerified) === null || _c === void 0 ? void 0 : _c.call(events, {\n        email,\n        origin: UserVeirifedOriginTypes.SOCIAL_LOGIN,\n        createdAt: new Date(),\n        id: userId,\n        url,\n        tenantId,\n        name\n      });\n    }\n\n    if (email) {\n      localStorage.setItem('email', email);\n      localStorage.setItem('name', name);\n    }\n\n    yield put(actions.setLoginState({\n      email,\n      isNewUser\n    }));\n    yield refreshToken();\n    localStorage.removeItem('register-quick-login');\n    yield put(actions.setSocialLoginsState({\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSocialLoginsState({\n      loading: false,\n      error: (_d = e.message) !== null && _d !== void 0 ? _d : 'Failed to authenticate',\n      firstLoad: false\n    }));\n  }\n}\n\nfunction* setSocialLoginError({\n  payload\n}) {\n  yield put(actions.setSocialLoginsState({\n    error: payload.error,\n    loading: false,\n    firstLoad: false\n  }));\n}\n\nfunction* socialLoginsSaga() {\n  yield takeLeading(actions.loadSocialLoginsConfiguration, loadSocialLoginsConfigurations);\n  yield takeLeading(actions.loadSocialLoginsConfigurationV2, loadSocialLoginsConfigurationsV2);\n  yield takeLeading(actions.loginViaSocialLogin, loginViaSocialLogin);\n  yield takeLatest(actions.setSocialLoginError, setSocialLoginError);\n}\n\nvar ApiStateKeys;\n\n(function (ApiStateKeys) {\n  ApiStateKeys[\"LOAD_API_TOKENS\"] = \"LOAD_API_TOKENS\";\n  ApiStateKeys[\"ADD_API_TOKEN\"] = \"ADD_API_TOKEN\";\n  ApiStateKeys[\"DELETE_API_TOKEN\"] = \"DELETE_API_TOKEN\";\n})(ApiStateKeys || (ApiStateKeys = {}));\n\nfunction* loadApiTokensData({\n  payload: apiTokenType\n}) {\n  yield put(actions.setApiTokensState({\n    apiTokenType\n  }));\n\n  try {\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: true\n    }));\n\n    if (apiTokenType === 'user') {\n      const apiTokensData = yield call(api.auth.getUserApiTokensData);\n      yield put(actions.setApiTokensState({\n        apiTokensDataUser: apiTokensData !== null && apiTokensData !== void 0 ? apiTokensData : []\n      }));\n    } else {\n      const apiTenantTokensData = yield call(api.auth.getTenantApiTokensData);\n      const {\n        items: roles\n      } = yield call(api.teams.loadAvailableRoles);\n      const {\n        items: permissions\n      } = yield call(api.teams.loadAvailablePermissions);\n      yield put(actions.setApiTokensState({\n        apiTokensDataTenant: apiTenantTokensData !== null && apiTenantTokensData !== void 0 ? apiTenantTokensData : [],\n        roles: roles !== null && roles !== void 0 ? roles : [],\n        permissions: permissions !== null && permissions !== void 0 ? permissions : []\n      }));\n    }\n\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: false\n    }));\n  } catch (e) {\n    yield put(actions.setApiTokensError({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: e.message\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: false\n    }));\n  }\n}\n\nfunction* addUserApiToken({\n  payload\n}) {\n  const {\n    description,\n    callback\n  } = payload;\n  const {\n    apiTokensDataUser\n  } = yield select(state => state.auth.apiTokensState);\n\n  try {\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: true\n    }));\n    const data = yield call(api.auth.updateUserApiTokensData, {\n      description\n    });\n    yield put(actions.setApiTokensState({\n      showAddTokenDialog: false\n    }));\n    yield delay$1(200);\n    yield put(actions.setApiTokensState({\n      apiTokensDataUser: [data, ...apiTokensDataUser],\n      successDialog: {\n        open: true,\n        secret: data.secret,\n        clientId: data.clientId\n      }\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null);\n  } catch (e) {\n    yield put(actions.setApiTokensError({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: e.message\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* addTenantApiToken({\n  payload\n}) {\n  const {\n    description,\n    roleIds,\n    callback\n  } = payload;\n  const {\n    apiTokensDataTenant\n  } = yield select(state => state.auth.apiTokensState);\n\n  try {\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: true\n    }));\n    const data = yield call(api.auth.updateTenantApiTokensData, {\n      description,\n      roleIds\n    });\n    yield put(actions.setApiTokensState({\n      showAddTokenDialog: false\n    }));\n    yield delay$1(200);\n    yield put(actions.setApiTokensState({\n      apiTokensDataTenant: [data, ...apiTokensDataTenant],\n      successDialog: {\n        open: true,\n        secret: data.secret,\n        clientId: data.clientId\n      }\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null);\n  } catch (e) {\n    yield put(actions.setApiTokensError({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: e.message\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.ADD_API_TOKEN,\n      value: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e.message);\n  }\n}\n\nfunction* deleteUserApiToken({\n  payload\n}) {\n  const {\n    apiTokensDataUser\n  } = yield select(state => state.auth.apiTokensState);\n\n  try {\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: true\n    }));\n    yield call(api.auth.deleteUserApiToken, {\n      tokenId: payload\n    });\n    yield put(actions.setApiTokensState({\n      apiTokensDataUser: apiTokensDataUser.filter(i => i.clientId !== payload),\n      deleteTokenDialog: {\n        open: false,\n        clientId: payload\n      }\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: false\n    }));\n  } catch (e) {\n    yield put(actions.setApiTokensError({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: e.message\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: false\n    }));\n  }\n}\n\nfunction* deleteTenantApiToken({\n  payload\n}) {\n  const {\n    apiTokensDataTenant\n  } = yield select(state => state.auth.apiTokensState);\n\n  try {\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: true\n    }));\n    yield call(api.auth.deleteTenantApiToken, {\n      tokenId: payload\n    });\n    yield put(actions.setApiTokensState({\n      apiTokensDataTenant: apiTokensDataTenant.filter(i => i.clientId !== payload),\n      deleteTokenDialog: {\n        open: false,\n        clientId: payload\n      }\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: false\n    }));\n  } catch (e) {\n    yield put(actions.setApiTokensError({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: e.message\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.DELETE_API_TOKEN,\n      value: false\n    }));\n  }\n}\n\nfunction* loadApiTokens({\n  payload\n}) {\n  var _a, _b;\n\n  if (!(payload === null || payload === void 0 ? void 0 : payload.silentLoading)) {\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: true\n    }));\n  }\n\n  try {\n    const [apiTokensDataUser = [], apiTokensDataTenant = []] = yield all([call(api.auth.getUserApiTokensData), call(api.auth.getTenantApiTokensData)]);\n    yield put(actions.setApiTokensState({\n      apiTokensDataUser,\n      apiTokensDataTenant\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: false\n    }));\n    (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n  } catch (e) {\n    yield put(actions.setApiTokensError({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: e.message\n    }));\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: false\n    }));\n    (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\n  }\n}\n\nfunction* apiTokensSaga() {\n  yield takeLeading(actions.loadApiTokens, loadApiTokens);\n  yield takeLeading(actions.initApiTokensData, loadApiTokensData);\n  yield takeEvery(actions.addUserApiToken, addUserApiToken);\n  yield takeEvery(actions.addTenantApiToken, addTenantApiToken);\n  yield takeLatest(actions.deleteTenantApiToken, deleteTenantApiToken);\n  yield takeLatest(actions.deleteUserApiToken, deleteUserApiToken);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* loadApiTokensDataMock({\n  payload: apiTokenType\n}) {\n  var _a;\n\n  yield put(actions.setApiTokensState({\n    apiTokenType\n  }));\n  yield put(actions.setApiTokensLoader({\n    key: ApiStateKeys.LOAD_API_TOKENS,\n    value: true\n  }));\n\n  if (apiTokenType === 'user') {\n    yield delay$1(200);\n    const apiTokensData = [apiTokensDataDemo];\n    yield put(actions.setApiTokensState({\n      apiTokensDataUser: apiTokensData !== null && apiTokensData !== void 0 ? apiTokensData : []\n    }));\n  } else {\n    yield delay$1(200);\n    yield put(actions.setApiTokensState({\n      apiTokensDataTenant: (_a = [apiTokensDataTenantDemo]) !== null && _a !== void 0 ? _a : [],\n      roles: rolesDemo !== null && rolesDemo !== void 0 ? rolesDemo : [],\n      permissions: permissionsDemo !== null && permissionsDemo !== void 0 ? permissionsDemo : []\n    }));\n  }\n\n  yield put(actions.setApiTokensLoader({\n    key: ApiStateKeys.LOAD_API_TOKENS,\n    value: false\n  }));\n}\n\nfunction* addTenantApiTokenMock({\n  payload\n}) {\n  const {\n    description,\n    roleIds,\n    callback\n  } = payload;\n  yield put(actions.setApiTokensLoader({\n    key: ApiStateKeys.ADD_API_TOKEN,\n    value: true\n  }));\n  const {\n    apiTokensDataTenant\n  } = yield select(state => state.auth.apiTokensState);\n  const newToken = Object.assign(Object.assign({}, apiTokensDataTenantDemo), {\n    description,\n    roleIds,\n    clientId: `CLIENT_ID_${v4()}`\n  });\n  yield put(actions.setApiTokensState({\n    showAddTokenDialog: false\n  }));\n  yield delay$1(200);\n  yield put(actions.setApiTokensState({\n    apiTokensDataTenant: [...apiTokensDataTenant, newToken],\n    successDialog: {\n      open: true,\n      secret: newToken.secret,\n      clientId: newToken.clientId\n    }\n  }));\n  yield delay$1(200);\n  yield put(actions.setApiTokensLoader({\n    key: ApiStateKeys.ADD_API_TOKEN,\n    value: false\n  }));\n  callback === null || callback === void 0 ? void 0 : callback(null);\n}\n\nfunction* deleteTenantApiTokenMock({\n  payload\n}) {\n  yield put(actions.setApiTokensLoader({\n    key: ApiStateKeys.DELETE_API_TOKEN,\n    value: true\n  }));\n  yield delay$1(200);\n  const apiTokensDataTenant = [apiTokensDataTenantDemo];\n  yield put(actions.setApiTokensState({\n    apiTokensDataTenant: apiTokensDataTenant.filter(i => i.clientId !== payload),\n    deleteTokenDialog: {\n      open: false,\n      clientId: payload\n    }\n  }));\n  yield put(actions.setApiTokensLoader({\n    key: ApiStateKeys.DELETE_API_TOKEN,\n    value: false\n  }));\n}\n\nfunction* loadApiTokensMock({\n  payload\n}) {\n  var _a;\n\n  if (!(payload === null || payload === void 0 ? void 0 : payload.silentLoading)) {\n    yield put(actions.setApiTokensLoader({\n      key: ApiStateKeys.LOAD_API_TOKENS,\n      value: true\n    }));\n  }\n\n  const apiTokensDataUser = [apiTokensDataDemo];\n  const apiTokensDataTenant = [apiTokensDataTenantDemo];\n  yield put(actions.setApiTokensState({\n    apiTokensDataUser,\n    apiTokensDataTenant\n  }));\n  yield delay$1(200);\n  yield put(actions.setApiTokensLoader({\n    key: ApiStateKeys.LOAD_API_TOKENS,\n    value: false\n  }));\n  (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n}\n\nfunction* apiTokensSagaMock() {\n  yield takeLeading(actions.loadApiTokens, loadApiTokensMock);\n  yield takeLeading(actions.initApiTokensData, loadApiTokensDataMock);\n  yield takeEvery(actions.addTenantApiToken, addTenantApiTokenMock);\n  yield takeLatest(actions.deleteTenantApiToken, deleteTenantApiTokenMock);\n}\n\nfunction* saveAccountSettings({\n  payload\n}) {\n  var _a, _b;\n\n  try {\n    yield put(actions.setAccountSettingsState({\n      loading: true\n    }));\n    const {\n      accountSettingsState\n    } = yield select(state => state.auth);\n    const {\n      address,\n      timezone,\n      dateFormat,\n      timeFormat,\n      currency,\n      logo\n    } = accountSettingsState;\n    const body = yield call(api.accountSettings.updateSettings, Object.assign({\n      address,\n      timezone,\n      dateFormat,\n      timeFormat,\n      currency,\n      logo\n    }, payload));\n    yield put(actions.setAccountSettingsState(Object.assign(Object.assign({}, body), {\n      loading: false\n    })));\n    (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, body);\n  } catch (e) {\n    yield put(actions.setAccountSettingsState({\n      loading: false,\n      error: e.message\n    }));\n    (_b = payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\n  }\n}\n\nfunction* loadAccountSettings({\n  payload\n}) {\n  yield put(actions.setAccountSettingsState({\n    loading: !(payload === null || payload === void 0 ? void 0 : payload.silentLoading),\n    error: null\n  }));\n\n  try {\n    const body = yield call(api.accountSettings.getSettings);\n    yield put(actions.setAccountSettingsState(Object.assign(Object.assign({}, body), {\n      loading: false\n    })));\n  } catch (e) {\n    yield put(actions.setAccountSettingsState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* accountSettingsSaga() {\n  yield takeLeading(actions.saveAccountSettings, saveAccountSettings);\n  yield takeLeading(actions.loadAccountSettings, loadAccountSettings);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* saveAccountSettingsMock({\n  payload\n}) {\n  var _a;\n\n  yield put(actions.setAccountSettingsState({\n    loading: true\n  }));\n  yield delay();\n  const {\n    accountSettingsState\n  } = yield select(state => state.auth);\n  const {\n    address,\n    timezone,\n    dateFormat,\n    timeFormat,\n    currency,\n    logo\n  } = accountSettingsState;\n  const body = Object.assign({\n    address,\n    timezone,\n    dateFormat,\n    timeFormat,\n    currency,\n    logo\n  }, payload);\n  yield put(actions.setAccountSettingsState(Object.assign(Object.assign({}, body), {\n    loading: false\n  })));\n  (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, body);\n}\n\nfunction* loadAccountSettingsMock({\n  payload\n}) {\n  yield put(actions.setAccountSettingsState({\n    loading: !(payload === null || payload === void 0 ? void 0 : payload.silentLoading),\n    error: null\n  }));\n  yield delay();\n  yield put(actions.setAccountSettingsState({\n    address: 'Tel-aviv',\n    timezone: 'Asia/Jerusalem',\n    dateFormat: 'DD/MM/YYYY',\n    timeFormat: 'HH:mm',\n    currency: 'USD',\n    loading: false\n  }));\n}\n\nfunction* accountSettingsSagaMock() {\n  yield takeLeading(actions.saveAccountSettings, saveAccountSettingsMock);\n  yield takeLeading(actions.loadAccountSettings, loadAccountSettingsMock);\n}\n\nfunction* switchTenant({\n  payload: {\n    tenantId,\n    callback\n  }\n}) {\n  yield put(actions.setState({\n    isLoading: true\n  }));\n\n  try {\n    yield call(api.tenants.switchTenant, {\n      tenantId\n    });\n    yield call(refreshToken);\n    const callbackConsumed = callback === null || callback === void 0 ? void 0 : callback(true);\n\n    if (!callbackConsumed) {\n      yield put(actions.setState({\n        isLoading: false\n      }));\n    }\n  } catch (e) {\n    yield put(actions.setState({\n      isLoading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(false, e);\n  }\n}\n\nfunction* loadTenants({\n  payload\n}) {\n  var _a, _b;\n\n  yield put(actions.setTenantsState({\n    loading: true\n  }));\n\n  try {\n    const tenants = yield call(api.tenants.getTenants);\n    yield put(actions.setTenantsState({\n      tenants,\n      loading: false\n    }));\n    (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, []);\n  } catch (e) {\n    (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, [], e);\n    yield put(actions.setTenantsState({\n      loading: false\n    }));\n  }\n}\n\nfunction* loadSubTenants({\n  payload\n}) {\n  var _a, _b;\n\n  yield put(actions.setTenantsState({\n    loading: true\n  }));\n\n  try {\n    const subTenants = yield call(api.tenants.getSubTenants);\n    yield put(actions.setTenantsState({\n      subTenants,\n      loading: false\n    }));\n    (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n  } catch (e) {\n    yield put(actions.setTenantsState({\n      loading: false\n    }));\n    (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\n  }\n}\n\nfunction* loadSubTenantsTree({\n  payload\n}) {\n  var _a, _b;\n\n  yield put(actions.setTenantsState({\n    loading: true\n  }));\n\n  try {\n    const tenantTree = yield call(api.tenants.getSubTenantsAsTree);\n    yield put(actions.setTenantsState({\n      tenantTree,\n      loading: false\n    }));\n    (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\n  } catch (e) {\n    yield put(actions.setTenantsState({\n      loading: false\n    }));\n    (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\n  }\n}\n\nfunction* tenantsSagas() {\n  yield takeEvery(actions.loadTenants, loadTenants);\n  yield takeEvery(actions.loadSubTenants, loadSubTenants);\n  yield takeEvery(actions.switchTenant, switchTenant);\n  yield takeEvery(actions.loadSubTenantsTree, loadSubTenantsTree);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* loadTenantsMock({}) {\n  yield put(actions.setTenantsState({\n    loading: true\n  }));\n  yield delay();\n  yield put(actions.setTenantsState({\n    tenants: tenantsDemo,\n    loading: false\n  }));\n}\n\nfunction* tenantsSagasMock() {\n  yield takeEvery(actions.loadTenants, loadTenantsMock);\n}\n\nfunction* loadRolesAndPermissions({\n  payload\n}) {\n  var _a;\n\n  yield put(actions.setRolesState({\n    loading: !((_a = payload === null || payload === void 0 ? void 0 : payload.silentLoading) !== null && _a !== void 0 ? _a : false),\n    error: null\n  }));\n\n  try {\n    const result = yield all([call(api.roles.getRoles), call(api.roles.getPermissions), call(api.roles.getPermissionCategories)]);\n    const [roles, permissions, permissionCategories] = result;\n    yield put(actions.setRolesState({\n      roles,\n      permissions,\n      permissionCategories,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setRolesState({\n      error: e.message,\n      loading: false\n    }));\n  }\n}\n\nfunction* addRole(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setRolesState({\n    saving: true\n  }));\n\n  try {\n    const role = yield call(api.roles.addRole, body);\n    const roles = yield call(api.roles.getRoles);\n    yield put(actions.loadRolesAndPermissions({\n      silentLoading: true\n    }));\n    yield put(actions.setRolesState({\n      roles,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(role);\n  } catch (e) {\n    yield put(actions.setRolesState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* deleteRole(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setRolesState({\n    saving: true\n  }));\n\n  try {\n    yield call(api.roles.deleteRole, body);\n    yield put(actions.loadRolesAndPermissions({\n      silentLoading: true\n    }));\n    yield put(actions.setRolesState({\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setRolesState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(false, e);\n  }\n}\n\nfunction* updateRole(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setRolesState({\n    saving: true\n  }));\n\n  try {\n    const role = yield call(api.roles.updateRole, body);\n    yield put(actions.loadRolesAndPermissions({\n      silentLoading: true\n    }));\n    yield put(actions.setRolesState({\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(role);\n  } catch (e) {\n    yield put(actions.setRolesState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* attachPermissionsToRole(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setRolesState({\n    saving: true\n  }));\n\n  try {\n    const role = yield call(api.roles.attachPermissionsToRole, body);\n    yield put(actions.loadRolesAndPermissions({\n      silentLoading: true\n    }));\n    yield put(actions.setRolesState({\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(role);\n  } catch (e) {\n    yield put(actions.setRolesState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* attachPermissionToRoles(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setRolesState({\n    saving: true\n  }));\n\n  try {\n    const permission = yield call(api.roles.attachPermissionToRoles, body);\n    yield put(actions.loadRolesAndPermissions({\n      silentLoading: true\n    }));\n    yield put(actions.setRolesState({\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(permission);\n  } catch (e) {\n    yield put(actions.setRolesState({\n      error: e.message,\n      saving: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* rolesSagas() {\n  yield takeLeading(actions.loadRolesAndPermissions, loadRolesAndPermissions);\n  yield takeEvery(actions.addRole, addRole);\n  yield takeEvery(actions.deleteRole, deleteRole);\n  yield takeEvery(actions.updateRole, updateRole);\n  yield takeEvery(actions.attachPermissionsToRole, attachPermissionsToRole);\n  yield takeEvery(actions.attachPermissionToRoles, attachPermissionToRoles);\n}\n\nfunction* resetPhoneNumber(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setResetPhoneNumberState({\n    loading: true\n  }));\n\n  try {\n    const res = yield call(api.auth.resetPhoneNumber, body);\n    yield put(actions.setResetPhoneNumberState({\n      loading: false,\n      error: undefined,\n      resetPhoneNumberToken: res.resetPhoneNumberToken,\n      step: ResetPhoneNumberStep.VerifyResetPhoneNumber\n    }));\n    yield put(actions.setLoginState({\n      email: body.email\n    }));\n  } catch (e) {\n    yield put(actions.setResetPhoneNumberState({\n      loading: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* verifyResetPhoneNumber(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setResetPhoneNumberState({\n    loading: true\n  }));\n\n  try {\n    const res = yield call(api.auth.verifyResetPhoneNumber, body);\n    yield put(actions.setResetPhoneNumberState({\n      loading: false,\n      error: undefined,\n      changePhoneNumberToken: res.changePhoneNumberToken,\n      step: ResetPhoneNumberStep.ChangePhoneNumber\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setResetPhoneNumberState({\n      loading: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* changePhoneNumber(_a) {\n  var _b = _a.payload,\n      {\n    callback\n  } = _b,\n      body = __rest(_b, [\"callback\"]);\n\n  yield put(actions.setResetPhoneNumberState({\n    loading: true\n  }));\n\n  try {\n    const {\n      onRedirectTo,\n      routes\n    } = yield select(({\n      auth: {\n        onRedirectTo,\n        routes\n      }\n    }) => ({\n      onRedirectTo,\n      routes\n    }));\n    yield call(api.auth.changePhoneNumber, {\n      phoneNumber: body.phoneNumber,\n      changePhoneNumberToken: body.changePhoneNumberToken\n    });\n    yield put(actions.setLoginState({\n      step: LoginStep.loginWithSmsOtc\n    }));\n    yield put(actions.passwordlessPreLogin({\n      type: AuthStrategyEnum.SmsCode,\n      email: body.email,\n      recaptchaToken: body.recaptchaToken\n    }));\n    onRedirectTo(routes.loginUrl);\n    yield put(actions.setResetPhoneNumberState({\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setResetPhoneNumberState({\n      loading: false,\n      error: e.message\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(null, e);\n  }\n}\n\nfunction* resetPhoneNumberSagas() {\n  yield takeLeading(actions.resetPhoneNumber, resetPhoneNumber);\n  yield takeLeading(actions.verifyResetPhoneNumber, verifyResetPhoneNumber);\n  yield takeLeading(actions.changePhoneNumber, changePhoneNumber);\n}\n\nfunction* loadCurrentUserSessions() {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const sessions = yield call(api.auth.getCurrentUserSessions);\n    yield put(actions.setSessionsState({\n      sessions,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSessionsState({\n      error: e,\n      loading: false\n    }));\n  }\n}\n\nfunction* loadCurrentUserSession() {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const session = yield call(api.auth.getCurrentUserSession);\n    yield put(actions.setSessionsState({\n      currentSession: session,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSessionsState({\n      error: e,\n      loading: false\n    }));\n  }\n}\n\nfunction* deleteUserSession({\n  payload: {\n    id\n  }\n}) {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    yield call(api.auth.deleteSessionForUser, id);\n    yield put(actions.loadUserSessions());\n  } catch (e) {\n    yield put(actions.setSessionsState({\n      error: e,\n      loading: false\n    }));\n  }\n}\n\nfunction* revokeUserSessions({\n  payload: {\n    callback,\n    userId\n  }\n}) {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    yield call(api.auth.revokeSessionsForUser, userId);\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSessionsState({\n      error: e,\n      loading: false\n    }));\n    callback === null || callback === void 0 ? void 0 : callback(false);\n  }\n}\n\nfunction* deleteAllUserSessions() {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    yield call(api.auth.deleteAllSessionsForUser);\n    yield put(actions.loadUserSessions());\n  } catch (e) {\n    yield put(actions.setSessionsState({\n      error: e,\n      loading: false\n    }));\n  }\n}\n\nfunction* sessionsSaga() {\n  yield takeLatest(actions.loadUserSessions, loadCurrentUserSessions);\n  yield takeLatest(actions.deleteUserSession, deleteUserSession);\n  yield takeLatest(actions.deleteAllUserSessions, deleteAllUserSessions);\n  yield takeLatest(actions.loadCurrentUserSession, loadCurrentUserSession);\n  yield takeEvery(actions.revokeUserSessions, revokeUserSessions);\n}\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\n\n\nfunction* loadCurrentUserSessionsMock() {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n  yield put(actions.setSessionsState({\n    sessions: sessionsMock,\n    loading: false\n  }));\n}\n\nfunction* deleteUserSessionMock({\n  payload: {\n    id\n  }\n}) {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n  const currentSessions = yield select(state => {\n    var _a;\n\n    return (_a = state.auth.sessionsState.sessions) !== null && _a !== void 0 ? _a : [];\n  });\n  const newSessions = currentSessions.filter(s => s.id !== id);\n  yield put(actions.setSessionsState({\n    sessions: newSessions,\n    loading: false\n  }));\n}\n\nfunction* deleteAllUserSessionsMock() {\n  yield put(actions.setSessionsState({\n    loading: true,\n    error: null\n  }));\n  const newSessions = sessionsMock.filter(s => s.current);\n  yield put(actions.setSessionsState({\n    sessions: newSessions,\n    loading: false\n  }));\n}\n\nfunction* sessionsSagaMock() {\n  yield takeLatest(actions.loadUserSessions, loadCurrentUserSessionsMock);\n  yield takeLatest(actions.deleteUserSession, deleteUserSessionMock);\n  yield takeLatest(actions.deleteAllUserSessions, deleteAllUserSessionsMock);\n}\n\nfunction* loadSessionPolicyState() {\n  yield put(actions.setSessionsPolicyState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const sessionsPolicy = yield call(api.auth.getSessionConfigurations);\n    yield put(actions.setSessionsPolicyState({\n      configurations: sessionsPolicy,\n      loading: false\n    }));\n  } catch (e) {\n    yield put(actions.setSessionsState({\n      error: e,\n      loading: false\n    }));\n  }\n}\n\nfunction* createOrUpdateSessionsPolicy({\n  payload\n}) {\n  yield put(actions.setSessionsPolicyState({\n    loading: true,\n    error: null\n  }));\n\n  try {\n    const {\n      callback\n    } = payload,\n          rest = __rest(payload, [\"callback\"]);\n\n    yield call(api.auth.createOrUpdateSessionConfigrations, rest);\n    yield put(actions.loadSessionsPolicy());\n    callback === null || callback === void 0 ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setSessionsPolicyState({\n      error: e,\n      loading: false\n    }));\n  }\n}\n\nfunction* sessionsPolicySaga() {\n  yield takeLeading(actions.loadSessionsPolicy, loadSessionPolicyState);\n  yield takeLatest(actions.createOrUpdateSessionsPolicy, createOrUpdateSessionsPolicy);\n}\n\nfunction* loadSessionPolicyStateMock() {\n  yield put(actions.setSessionsPolicyState({\n    loading: true,\n    error: null\n  }));\n  yield put(actions.setSessionsPolicyState({\n    configurations: sessionsConfigDummies,\n    loading: false\n  }));\n}\n\nfunction* createOrUpdateSessionsPolicyMock({\n  payload\n}) {\n  yield put(actions.setSessionsPolicyState({\n    loading: true,\n    error: null\n  }));\n\n  const {\n    callback\n  } = payload,\n        rest = __rest(payload, [\"callback\"]);\n\n  callback === null || callback === void 0 ? void 0 : callback(true);\n  yield put(actions.setSessionsPolicyState({\n    configurations: rest,\n    loading: false\n  }));\n}\n\nfunction* sessionsPolicySagaMock() {\n  yield takeLeading(actions.loadSessionsPolicy, loadSessionPolicyStateMock);\n  yield takeLatest(actions.createOrUpdateSessionsPolicy, createOrUpdateSessionsPolicyMock);\n}\n\nfunction* sagas() {\n  yield all([call(loginSagas), call(activateSagas), call(acceptInvitationSagas), call(forgotPasswordSagas), call(resetPhoneNumberSagas), call(ssoSagas$1), call(ssoSagas), call(profileSagas), call(mfaSagas), call(teamSagas), call(socialLoginsSaga), call(signUpSaga), call(apiTokensSaga), call(securityPolicySagas), call(accountSettingsSaga), call(tenantsSagas), call(rolesSagas), call(sessionsSaga), call(sessionsPolicySaga)]);\n}\n\nfunction* mockSagas() {\n  yield all([call(loginSagasMock), // call(activateSagas),\n  // call(acceptInvitationSagas),\n  // call(forgotPasswordSagas),\n  // call(socialLoginsSaga),\n  // call(signUpSaga),\n  call(ssoSagasMock), call(profileSagasMock), call(mfaSagasMock), call(teamSagasMock), call(apiTokensSagaMock), call(securityPolicySagasMock), call(sessionsSagaMock), call(accountSettingsSagaMock), call(tenantsSagasMock), call(sessionsPolicySagaMock)]);\n} // export store\n\n\nvar authStore = {\n  sagas,\n  mockSagas,\n  storeName: authStoreName,\n  initialState,\n  reducer,\n  actions\n};\nexport { AcceptInvitationStep, ActivateAccountStep, AdminPortalPages, AdminPortalPagesForEvents, ApiStateKeys, AuthenticationTypes, ForgotPasswordStep, LoginFlow, LoginStep, MFAStep, QuickLoginStrategy, ResetPhoneNumberStep, SSOStateKeys, SamlVendors, SignUpStage, TeamStateKeys, UserVeirifedOriginTypes, actions$g as acceptInvitationActions, reducers$f as acceptInvitationReducers, acceptInvitationState, actions$5 as accountSettingsActions, reducers$4 as accountSettingsReducers, accountSettingsState, actions$h as activateAccountActions, reducers$g as activateAccountReducers, activateState, actions$7 as apiTokensActions, reducers$6 as apiTokensReducers, apiTokensState, actions as authActions, initialState as authInitialState, mockSagas as authMockSagas, reducer as authReducers, sagas as authSagas, authStore as default, actions$f as forgotPasswordActions, reducers$e as forgotPasswordReducers, forgotPasswordState, actions$i as loginActions, reducers$h as loginReducers, loginState, actions$b as mfaActions, reducers$a as mfaReducers, mfaState, actions$c as profileActions, reducers$b as profileReducers, profileState, actions$e as resetPhoneNumberActions, reducers$d as resetPhoneNumberReducers, resetPhoneNumberState, actions$3 as rolesActions, reducers$2 as rolesReducers, rolesState, actions$6 as securityPolicyActions, reducers$5 as securityPolicyReducers, securityPolicyState, actions$2 as sessionsActions, actions$1 as sessionsPolicyActions, reducers as sessionsPolicyReducers, sessionsPolicyState, reducers$1 as sessionsReducers, sessionsState, actions$8 as signUpActions, reducers$7 as signUpReducers, signUpState, socialLoginState, actions$9 as socialLoginsActions, reducers$8 as socialLoginsReducer, actions$d as ssoActions, reducers$c as ssoReducers, ssoState, actions$a as teamActions, reducers$9 as teamReducers, teamState, actions$4 as tenantsActions, reducers$3 as tenantsReducers, tenantsState };","map":{"version":3,"sources":["/Users/mashapav/Downloads/WEB-CHAT/Client/node_modules/@frontegg/redux-store/auth/index.js"],"names":["createAction","createSlice","a","authStoreName","F","FRONTEGG_AFTER_AUTH_REDIRECT_URL","H","HOSTED_LOGIN_VERIFIER_KEY","__awaiter","__rest","takeLeading","put","select","call","takeEvery","delay","delay$1","all","retry","takeLatest","AuthStrategyEnum","api","ContextHolder","fetch","l","loadVendorPublicInfo","v4","resetStateByKey","key","initialState","state","Object","assign","typeReducer","payload","typeReducerForKey","prepare","reducer","typeReducerNestedKey","nestedKey","_a","loadersReducerForKey","loaders","value","errorsReducerForKey","errors","delayTime","Promise","resolve","setTimeout","chars","lookup","Uint8Array","i","length","charCodeAt","base64urlEncode","arraybuffer","bytes","len","base64url","substring","base64urlDecode","base64string","bufferLength","p","encoded1","encoded2","encoded3","encoded4","buffer","publicKeyCredentialToJSON","pubKeyCred","Array","arr","push","ArrayBuffer","obj","LoginStep","LoginFlow","QuickLoginStrategy","loginState","flow","Login","step","preLogin","loading","email","tenants","reducers$h","setLoginState","resetLoginState","actions$i","requestAuthorize","requestAuthorizeSSR","requestHostedLoginAuthorize","handleHostedLoginCallback","afterAuthNavigation","postLogin","login","loginWithMfa","recoverMfa","logout","silentLogout","checkIfAllowToRememberMfaDevice","changePhoneNumberWithVerification","verifyChangePhoneNumber","quickSmsPasswordlessPreLogin","passwordlessPreLogin","passwordlessPostLogin","verifyInviteToken","webAuthnPrelogin","webAuthnPostLogin","webAuthnCreateNewDeviceSession","webAuthnVerifyNewDeviceSession","ActivateAccountStep","activateState","activating","resentEmail","activationStrategy","reducers$g","setActivateState","resetActivateState","setActivateStrategyState","actions$h","activateAccount","preActivateAccount","getActivateAccountStrategy","resendActivationEmail","AcceptInvitationStep","acceptInvitationState","validate","reducers$f","setAcceptInvitationState","resetAcceptInvitationState","actions$g","acceptInvitation","ForgotPasswordStep","forgotPasswordState","forgotPassword","passwordConfig","reducers$e","setForgotPasswordState","resetForgotPasswordState","actions$f","resetPassword","loadPasswordConfig","ResetPhoneNumberStep","resetPhoneNumberState","ResetPhoneNumber","reducers$d","setResetPhoneNumberState","resetResetPhoneNumberState","actions$e","resetPhoneNumber","verifyResetPhoneNumber","changePhoneNumber","ssoState","firstLoad","saving","ssoConfigurations","reducers$c","setSSOLoader","setSSOError","setSSOState","resetSSOState","actions$d","loadSSOConfigurationsV2","saveSSOConfigurationV2","updateSSOConfiguration","deleteSSOConfiguration","saveSSODomain","deleteSSODomain","validateSSODomainV2","setSSODefaultRoles","setSSOGroups","updateSSOGroups","saveSSOConfigurationByMetadata","updateSSOConfigurationByMetadata","loadSSOConfigurations","loadSSOAuthorizationRoles","saveSSOConfigurations","saveSSOConfigurationsFile","saveSSOConfigurationsFileWithCallback","validateSSODomain","updateSSOAuthorizationRoles","deleteSamlGroup","createSamlGroup","oidcPostlogin","profileState","error","reducers$b","setProfileState","resetProfileState","actions$c","loadProfile","saveProfile","changePassword","MFAStep","mfaState","verify","reducers$a","setMfaState","resetMfaState","actions$b","enrollMfa","verifyMfa","verifyMfaAfterForce","disableMfa","teamState","pageOffset","pageSize","users","allUsers","roles","permissions","totalPages","filter","sort","allUsersQueryParams","_filter","_offset","_limit","_order","_sortBy","addUserDialogState","open","deleteUserDialogState","lockUserDialogState","reducers$9","setTeamLoader","setTeamError","setTeamState","resetTeamState","actions$a","loadUsers","loadAllSubTenantsUsers","loadRoles","addUser","addUserToSubTenants","updateUser","deleteUser","setUserRolesForSubTenants","deleteUserFromSubTenants","lockUser","resendActivationLink","resendInvitationLink","resendInvitationLinkToAllSubTenants","getInvitationLink","createInvitationLink","updateInvitationLink","deleteInvitationLink","openAddUserDialog","closeAddUserDialog","openDeleteUserDialog","closeDeleteUserDialog","openLockUserDialog","closeLockUserDialog","socialLoginState","reducers$8","setSocialLoginsState","resetSocialLoginsState","actions$9","loadSocialLoginsConfiguration","loadSocialLoginsConfigurationV2","loginViaSocialLogin","setSocialLoginError","SignUpStage","signUpState","allowSignUps","allowNotVerifiedUsersLogin","stage","SignUp","reducers$7","setSignUpState","resetSignUpState","actions$8","signUpUser","resetSignUpStateSoft","apiTokensState","apiTokenType","searchValue","showAddTokenDialog","createdByUserIdColumn","deleteTokenDialog","clientId","successDialog","secret","apiTokensDataTenant","apiTokensDataUser","reducers$6","setApiTokensLoader","setApiTokensError","setApiTokensState","resetApiTokensState","actions$7","loadApiTokens","initApiTokensData","addTenantApiToken","addUserApiToken","deleteUserApiToken","deleteTenantApiToken","securityPolicyState","globalPolicy","publicPolicy","vendorMfaPolicy","mfaPolicy","lockoutPolicy","captchaPolicy","passwordHistoryPolicy","passwordPolicy","publicAuthStrategyPolicy","reducers$5","setSecurityPolicyState","setSecurityPolicyGlobalState","setSecurityPolicyPublicState","setSecurityPolicyAuthStrategyPublicState","setSecurityPolicyMfaState","setSecurityPolicyVendorMfaState","setSecurityPolicyLockoutState","setSecurityPolicyCaptchaState","setSecurityPolicyPasswordHistoryState","setSecurityPolicyPasswordState","resetSecurityPolicyState","actions$6","loadSecurityPolicy","loadPublicSecurityPolicy","loadSecurityPolicyMfa","loadSecurityPolicyVendorMfa","saveSecurityPolicyMfa","loadSecurityPolicyLockout","saveSecurityPolicyLockout","loadSecurityPolicyCaptcha","loadSecurityPolicyPasswordHistory","saveSecurityPolicyPasswordHistory","loadVendorPasswordConfig","loadPublicAuthStrategiesPolicy","accountSettingsState","reducers$4","setAccountSettingsState","resetAccountSettingsState","actions$5","loadAccountSettings","saveAccountSettings","tenantsState","subTenants","tenantTree","reducers$3","setTenantsState","resetTenantsState","actions$4","switchTenant","loadTenants","loadSubTenants","loadSubTenantsTree","rolesState","permissionCategories","reducers$2","setRolesState","resetRolesState","actions$3","loadRolesAndPermissions","addRole","updateRole","deleteRole","attachPermissionsToRole","attachPermissionToRoles","sessionsState","sessions","reducers$1","setSessionsState","resetSessionsState","actions$2","loadUserSessions","loadCurrentUserSession","deleteUserSession","deleteAllUserSessions","revokeUserSessions","sessionsPolicyState","configurations","reducers","setSessionsPolicyState","resetSessionsPolicyState","actions$1","loadSessionsPolicy","createOrUpdateSessionsPolicy","reinitializeState","isAuthenticated","isLoading","isSSOAuth","user","routes","authenticatedUrl","loginUrl","logoutUrl","activateUrl","acceptInvitationUrl","forgetPasswordUrl","resetPhoneNumberUrl","resetPasswordUrl","socialLoginCallbackUrl","signUpUrl","oidcRedirectUrl","samlCallbackUrl","magicLinkCallbackUrl","hostedLoginRedirectUrl","onRedirectTo","actions","sliceActions","name","resetState","setState","setUser","SSOStateKeys","SamlVendors","omitProps","props","keys","newProps","forEach","generateCodeChallenge","codeVerifier","digest","crypto","subtle","TextEncoder","encode","btoa","String","fromCharCode","replace","createRandomString","text","possible","charAt","Math","floor","random","readFileAsText","file","reject","reader","FileReader","readAsText","onload","result","onerror","apiTokensDataDemo","createdAt","description","apiTokensDataTenantDemo","roleIds","tenantId","createdByUserId","roleDemo","id","isDefault","vendorId","Date","updatedAt","rolePermissionDemo","undefined","categoryId","fePermission","userProfileDemo","mfaEnrolled","profileImage","profilePictureUrl","tenantIds","activatedForTenant","metadata","JSON","stringify","phoneNumber","jobTitle","address","city","country","verified","userDemo","accessToken","expiresIn","mfaRequired","refreshToken","type","iat","exp","iss","email_verified","profileStateDemo","profile","policyDemo","enforceMFAType","allowOverrideEnforcePasswordHistory","allowOverridePasswordComplexity","allowOverridePasswordExpiration","allowSignups","apiTokensEnabled","cookieSameSite","defaultRefreshTokenExpiration","defaultTokenExpiration","publicKey","publicSecurityPolicy","forcePermissions","authStrategy","EmailAndPassword","policyMfaDemo","policyLockoutDemo","enabled","maxAttempts","policyPasswordHistoryDemo","historySize","samlConfigurationDemo","domain","validated","generatedVerification","ssoEndpoint","publicCertificate","signRequest","acsUrl","spEntityId","oidcClientId","oidcSecret","samlMetadataDemo","properties","entityName","isActive","configuration","rolesDemo","permissionLevel","ssoStateDemo","samlConfiguration","authorizationRoles","permissionsDemo","userTeamDemo2","phone","profileImageUrl","toISOString","customData","lastLogin","mfaEnabled","userTeamDemo","userSubTenantDemo","provider","sub","usersDemo","allUsersDemo","tenantsDemo","isReseller","deletedAt","timezone","dateFormat","timeFormat","currency","logo","sessionsMock","userAgent","ipAddress","current","now","sessionsConfigDummies","sessionConcurrentConfiguration","maxSessions","sessionIdleTimeoutConfiguration","timeout","sessionTimeoutConfiguration","UserVeirifedOriginTypes","AuthenticationTypes","AdminPortalPagesForEvents","AdminPortalPages","privacy","personalApiTokens","account","security","sso","audits","webhooks","apiTokens","subscriptions","loadAllowSignUps","policy","auth","getVendorConfig","e","message","_b","_c","events","url","shouldActivate","userId","invitationToken","companyName","signUpComplete","authenticationType","PASSWORD","setAccessToken","mfaToken","loginWithTwoFactor","hasOwnProperty","qrCode","recoveryCode","forceTwoFactor","SignUpSuccess","signUpSaga","getGlobalSecurityPolicy","getVendorPublicAuthStrategiesConfig","getMfaPolicy","getVendorMfaPolicy","callback","newSecurityPolicy","saveMfaPolicy","getLockoutPolicy","saveLockoutPolicy","getCaptchaPolicy","getPasswordHistoryPolicy","savePasswordHistoryPolicy","getPasswordConfigPolicy","securityPolicySagas","loadPublicSecurityPolicyMock","loadSecurityPolicyMock","loadSecurityPolicyMfaMock","loadSecurityPolicyVendorMfaMock","saveSecurityPolicyMfaMock","loadSecurityPolicyLockoutMock","saveSecurityPolicyLockoutMock","loadSecurityPolicyCaptchaMock","loadSecurityPolicyPasswordHistoryMock","saveSecurityPolicyPasswordHistoryMock","securityPolicySagasMock","authStrategyLoginStepMap","Code","loginWithOtc","loginWithPassword","MagicLink","magicLinkPreLoginSuccess","SmsCode","loginWithSmsOtc","includeQueryParam","afterAuthRedirect","window","localStorage","getItem","includes","removeItem","URL","location","href","redirectUrl","searchParams","get","search","refresh","startsWith","refreshMetadata","ssoACS","getSamlMetadata","console","loadSSOPublicConfigurationFunction","getSSOPublicConfiguration","isMfaRequired","getMfaRequiredState","isAllowedToRemember","mfaDeviceExpiration","quickLoginState","quickLoginToRegister","RegisterQuickLogin","tenantsLoading","userEmail","allowRememberMfaDevice","hostedLoginBox","refreshTokenHosted","refreshTokenEmbedded","body","grant_type","refresh_token","authenticatedUser","exchangeOAuthTokens","refreshTokenV2","mfaRequiredState","preserveQueryParams","setItem","shouldNavigateToRegisterQuicKLogin","pathname","endsWith","some","isNewUser","signUpSuccessUrl","firstTime","calls","refreshTokenSSR","generateLoginResponseV2","context","root","nonce","code_verifier","code_challenge","origin","baseUrl","getBaseUrl","oauthUrl","params","response_type","client_id","scope","redirect_uri","code_challenge_method","URLSearchParams","toString","code","changePhoneRes","changePhoneId","loginWithQuickSmsOtc","preloginRes","resetPhoneNumberToken","VerifyResetPhoneNumber","_d","data","generateLoginResponse","emailVerified","userVerified","PASSWORDLESS","inviteTokenTenantName","inviteTokenError","recaptchaToken","idpType","preLoginV2","Oidc","redirectToSSO","ssoRedirectUrl","ssoPreloginFailed","options","challenge","excludeCredentials","verifyNewDeviceSession","response","webAuthnPreLogin","allowCredentials","map","credentials","userHandle","loginWithSSOFailed","password","success","isLoginSucceeded","loggedInUser","allowRememberDevice","rememberDevice","recoverMfaToken","loginSagas","requestAuthorizeMock","loginSagasMock","getSamlConfiguration","oidcConfiguration","getOidcConfiguration","samlMetadata","isSamlActive","configFile","oldSamlConfiguration","loaderKey","newSamlConfiguration","updateSamlVendorMetadata","samlVendor","firstTimeConfigure","Saml","updateSamlConfiguration","toLowerCase","validateSamlDomain","getAuthorizationRoles","getSamlRoles","groupsData","getSamlRolesGroups","rolesGroups","updateRolesGroups","groups","group","updateSamlGroup","updateAuthorizationRoles","updateSamlRoles","deleteSamlGroupFunction","createSamlGroupFunction","oidcPostloginFunction","redirectUri","RelayState","oidcPostLoginV2","ssoSagas$1","loadSSOConfigurationsMock","saveSSOConfigurationsFileMock","saveSSOConfigurationsMock","validateSSODomainMock","getAuthorizationRolesMock","updateAuthorizationRolesMock","ssoSagasMock","loadOidc","loadSaml","LOAD_SSO_CONFIGURATIONS","getSSOConfigurations","SAVE_SSO_CONFIGURATION","ssoConfiguration","newSsoConfiguration","createSSOConfiguration","SAVE_SSO_CONFIGURATION_BY_METADATA","createSSOConfigurationByMetadata","UPDATE_SSO_CONFIGURATION","ssoConfigId","newSsoConfigurations","ssoConfig","UPDATE_SSO_CONFIGURATION_BY_METADATA","DELETE_SSO_CONFIGURATION","SAVE_SSO_DOMAIN","createSSODomain","domains","domainId","DELETE_SSO_DOMAIN","VALIDATE_SSO_DOMAIN","ssoDomain","UPDATE_SSO_DEFAULT_ROLES","groupsToAdd","groupsToDelete","SAVE_SSO_GROUPS","groupId","deleteSSOGroup","createSSOGroup","getSSOGroups","changedGroups","updateSSOGroup","ssoSagas","teams","getProfile","currentUser","b64toBlob","base64","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Blob","base64ToFormData","matchResult","match","blob","formDataToUpload","FormData","append","File","oldProfileData","newProfilePictureUrl","updateProfileImage","imageTimeStamp","urlTemplate","set","newProfileData","updateProfile","profileSagas","loadProfileMock","saveProfileMock","changePasswordMock","profileSagasMock","mfaSagas","enrollMfaMock","verifyMfaMock","token","verifyMfaAfterForceMock","disableMfaMock","mfaSagasMock","forgotPasswordSagas","strategy","shouldSetPassword","activatingForm","redirectLocation","ACTIVATION_LINK","resendActivationEmailFunction","activateSagas","invalid","pending","failed","acceptInvitationSagas","TeamStateKeys","selectTeamState","_","silentLoading","USERS","items","totalItems","loadAvailableRoles","loadAvailablePermissions","_e","_metadata","loadAllUsers","ROLES_AND_PERMISSIONS","res","userWithoutRoleIds","role","newUser","addUserToTenantAndSubTenants","oldUserData","find","UPDATE_USER","item","updatedUser","newTenants","tenant","subTenantsRoles","roleUpdate","roleId","removeUserFromTenantAndSubTenants","RESEND_ACTIVATE_LINK","RESEND_INVITATION_LINK","resendInvitationLinkToAllTenants","getInvitationLinkConfig","CONFIG_TOKEN_LINK","invitationLinkConfig","getInviteLinkConfiguration","inviteTokenState","GET_TOKEN_LINK","getInviteUserLink","CREATE_TOKEN_LINK","createInviteUserLink","expiresInMinutes","shouldSendEmail","UPDATE_TOKEN_LINK","updateInviteUserLink","DELETE_TOKEN_LINK","deleteInviteUserLink","onClose","teamSagas","loadUsersMock","loadAllSubTenantsUsersMock","loadRolesMock","addUserMock","addUserToSubTenantsMock","updateUserMock","deleteUserMock","deleteUserFromSubTenantsMock","resendActivationLinkMock","resendInvitationLinkMock","resendInvitationLinkToAllSubTenantsMock","teamSagasMock","loadSocialLoginsConfigurations","socialLoginsConfig","getSocialLoginProviders","loadSocialLoginsConfigurationsV2","socialLoginsConfigV2","getSocialLoginProvidersV2","socialLoginsConfigWithFullUrl","authorizationUrl","config","SOCIAL_LOGIN","socialProvider","socialLoginsSaga","ApiStateKeys","loadApiTokensData","LOAD_API_TOKENS","apiTokensData","getUserApiTokensData","apiTenantTokensData","getTenantApiTokensData","ADD_API_TOKEN","updateUserApiTokensData","updateTenantApiTokensData","DELETE_API_TOKEN","tokenId","apiTokensSaga","loadApiTokensDataMock","addTenantApiTokenMock","newToken","deleteTenantApiTokenMock","loadApiTokensMock","apiTokensSagaMock","accountSettings","updateSettings","getSettings","accountSettingsSaga","saveAccountSettingsMock","loadAccountSettingsMock","accountSettingsSagaMock","callbackConsumed","getTenants","getSubTenants","getSubTenantsAsTree","tenantsSagas","loadTenantsMock","tenantsSagasMock","getRoles","getPermissions","getPermissionCategories","permission","rolesSagas","changePhoneNumberToken","ChangePhoneNumber","resetPhoneNumberSagas","loadCurrentUserSessions","getCurrentUserSessions","session","getCurrentUserSession","currentSession","deleteSessionForUser","revokeSessionsForUser","deleteAllSessionsForUser","sessionsSaga","loadCurrentUserSessionsMock","deleteUserSessionMock","currentSessions","newSessions","s","deleteAllUserSessionsMock","sessionsSagaMock","loadSessionPolicyState","sessionsPolicy","getSessionConfigurations","rest","createOrUpdateSessionConfigrations","sessionsPolicySaga","loadSessionPolicyStateMock","createOrUpdateSessionsPolicyMock","sessionsPolicySagaMock","sagas","mockSagas","authStore","storeName","acceptInvitationActions","acceptInvitationReducers","accountSettingsActions","accountSettingsReducers","activateAccountActions","activateAccountReducers","apiTokensActions","apiTokensReducers","authActions","authInitialState","authMockSagas","authReducers","authSagas","default","forgotPasswordActions","forgotPasswordReducers","loginActions","loginReducers","mfaActions","mfaReducers","profileActions","profileReducers","resetPhoneNumberActions","resetPhoneNumberReducers","rolesActions","rolesReducers","securityPolicyActions","securityPolicyReducers","sessionsActions","sessionsPolicyActions","sessionsPolicyReducers","sessionsReducers","signUpActions","signUpReducers","socialLoginsActions","socialLoginsReducer","ssoActions","ssoReducers","teamActions","teamReducers","tenantsActions","tenantsReducers"],"mappings":"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","sourcesContent":["import { createAction, createSlice } from '@reduxjs/toolkit';\nimport { a as authStoreName, F as FRONTEGG_AFTER_AUTH_REDIRECT_URL, H as HOSTED_LOGIN_VERIFIER_KEY } from '../constants-4d9682b2.js';\nexport { a as authStoreName } from '../constants-4d9682b2.js';\nimport { __awaiter, __rest } from 'tslib';\nimport { takeLeading, put, select, call, takeEvery, delay as delay$1, all, retry, takeLatest } from 'redux-saga/effects';\nimport { AuthStrategyEnum, api, ContextHolder, fetch } from '@frontegg/rest-api';\nexport { AuthStrategyEnum } from '@frontegg/rest-api';\nimport { l as loadVendorPublicInfo } from '../saga-b6529ffb.js';\nimport { v4 } from 'uuid';\n\nconst resetStateByKey = (key, initialState) => (state) => (Object.assign(Object.assign({}, state), { [key]: initialState[key] }));\r\nconst typeReducer = (key) => (state, { payload }) => (Object.assign(Object.assign({}, state), { [key]: payload }));\r\nconst typeReducerForKey = (key) => ({\r\n    prepare: (payload) => ({ payload }),\r\n    reducer: (state, { payload }) => {\r\n        return Object.assign(Object.assign({}, state), { [key]: Object.assign(Object.assign({}, state[key]), payload) });\r\n    },\r\n});\r\nconst typeReducerNestedKey = (key, nestedKey) => ({\r\n    prepare: (payload) => ({ payload }),\r\n    reducer: (state, { payload }) => {\r\n        var _a;\r\n        return Object.assign(Object.assign({}, state), { [key]: Object.assign(Object.assign({}, state[key]), { [nestedKey]: Object.assign(Object.assign({}, (_a = state === null || state === void 0 ? void 0 : state[key]) === null || _a === void 0 ? void 0 : _a[nestedKey]), payload) }) });\r\n    },\r\n});\r\nconst loadersReducerForKey = (key) => ({\r\n    prepare: (payload) => ({ payload }),\r\n    reducer: (state, { payload }) => {\r\n        var _a;\r\n        return (Object.assign(Object.assign({}, state), { [key]: Object.assign(Object.assign({}, state[key]), { loaders: Object.assign(Object.assign({}, state[key].loaders), { [payload.key]: (_a = payload.value) !== null && _a !== void 0 ? _a : true }) }) }));\r\n    },\r\n});\r\nconst errorsReducerForKey = (key) => ({\r\n    prepare: (payload) => ({ payload }),\r\n    reducer: (state, { payload }) => {\r\n        var _a;\r\n        return (Object.assign(Object.assign({}, state), { [key]: Object.assign(Object.assign({}, state[key]), { errors: Object.assign(Object.assign({}, state[key].errors), { [payload.key]: (_a = payload.value) !== null && _a !== void 0 ? _a : true }) }) }));\r\n    },\r\n});\r\nconst delay = (delayTime = 500) => new Promise((resolve) => setTimeout(resolve, delayTime));\r\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';\r\nconst lookup = new Uint8Array(256);\r\nfor (let i = 0; i < chars.length; i++) {\r\n    lookup[chars.charCodeAt(i)] = i;\r\n}\r\nconst base64urlEncode = (arraybuffer) => {\r\n    const bytes = new Uint8Array(arraybuffer);\r\n    const len = bytes.length;\r\n    let i;\r\n    let base64url = '';\r\n    for (i = 0; i < len; i += 3) {\r\n        base64url += chars[bytes[i] >> 2];\r\n        base64url += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\r\n        base64url += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\r\n        base64url += chars[bytes[i + 2] & 63];\r\n    }\r\n    if (len % 3 === 2) {\r\n        base64url = base64url.substring(0, base64url.length - 1);\r\n    }\r\n    else if (len % 3 === 1) {\r\n        base64url = base64url.substring(0, base64url.length - 2);\r\n    }\r\n    return base64url;\r\n};\r\nconst base64urlDecode = (base64string) => {\r\n    const bufferLength = base64string.length * 0.75;\r\n    let len = base64string.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\r\n    const bytes = new Uint8Array(bufferLength);\r\n    for (i = 0; i < len; i += 4) {\r\n        encoded1 = lookup[base64string.charCodeAt(i)];\r\n        encoded2 = lookup[base64string.charCodeAt(i + 1)];\r\n        encoded3 = lookup[base64string.charCodeAt(i + 2)];\r\n        encoded4 = lookup[base64string.charCodeAt(i + 3)];\r\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\r\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\r\n    }\r\n    return bytes.buffer;\r\n};\r\nconst publicKeyCredentialToJSON = (pubKeyCred) => {\r\n    if (pubKeyCred instanceof Array) {\r\n        const arr = [];\r\n        for (const i of pubKeyCred) {\r\n            arr.push(publicKeyCredentialToJSON(i));\r\n        }\r\n        return arr;\r\n    }\r\n    else if (pubKeyCred instanceof ArrayBuffer) {\r\n        return base64urlEncode(pubKeyCred);\r\n    }\r\n    else if (pubKeyCred instanceof Object) {\r\n        const obj = {};\r\n        for (const key in pubKeyCred) {\r\n            obj[key] = publicKeyCredentialToJSON(pubKeyCred[key]);\r\n        }\r\n        return obj;\r\n    }\r\n    return pubKeyCred;\r\n};\n\nvar LoginStep;\r\n(function (LoginStep) {\r\n    LoginStep[\"preLogin\"] = \"preLogin\";\r\n    LoginStep[\"magicLinkPreLoginSuccess\"] = \"magicLinkPreLoginSuccess\";\r\n    LoginStep[\"loginWithSmsOtc\"] = \"loginWithSmsOtc\";\r\n    LoginStep[\"loginWithQuickSmsOtc\"] = \"loginWithQuickSmsOtc\";\r\n    LoginStep[\"loginWithOtc\"] = \"loginWithOtc\";\r\n    LoginStep[\"loginWithPassword\"] = \"loginWithPassword\";\r\n    LoginStep[\"loginWithTwoFactor\"] = \"loginWithTwoFactor\";\r\n    LoginStep[\"redirectToSSO\"] = \"redirectToSSO\";\r\n    LoginStep[\"loginWithSSOFailed\"] = \"loginWithSSOFailed\";\r\n    LoginStep[\"success\"] = \"success\";\r\n    LoginStep[\"forceTwoFactor\"] = \"forceTwoFactor\";\r\n    LoginStep[\"recoverTwoFactor\"] = \"recoverTwoFactor\";\r\n})(LoginStep || (LoginStep = {}));\r\nvar LoginFlow;\r\n(function (LoginFlow) {\r\n    LoginFlow[\"Login\"] = \"login\";\r\n    LoginFlow[\"RegisterQuickLogin\"] = \"registerQuickLogin\";\r\n})(LoginFlow || (LoginFlow = {}));\r\nvar QuickLoginStrategy;\r\n(function (QuickLoginStrategy) {\r\n    QuickLoginStrategy[\"Internal\"] = \"internal\";\r\n    QuickLoginStrategy[\"UsbKey\"] = \"usb-key\";\r\n    QuickLoginStrategy[\"Android\"] = \"android\";\r\n    QuickLoginStrategy[\"Sms\"] = \"sms\";\r\n})(QuickLoginStrategy || (QuickLoginStrategy = {}));\n\nconst loginState = {\r\n    flow: LoginFlow.Login,\r\n    step: LoginStep.preLogin,\r\n    loading: false,\r\n    email: '',\r\n    tenants: [],\r\n};\r\nconst reducers$h = {\r\n    setLoginState: typeReducerForKey('loginState'),\r\n    resetLoginState: resetStateByKey('loginState', { loginState }),\r\n};\r\nconst actions$i = {\r\n    requestAuthorize: createAction(`${authStoreName}/requestAuthorize`, (payload = false) => ({ payload })),\r\n    requestAuthorizeSSR: createAction(`${authStoreName}/requestAuthorizeSSR`, (payload) => ({ payload })),\r\n    requestHostedLoginAuthorize: createAction(`${authStoreName}/requestHostedLoginAuthorize`),\r\n    handleHostedLoginCallback: createAction(`${authStoreName}/handleHostedLoginCallback`, (payload) => ({ payload })),\r\n    afterAuthNavigation: createAction(`${authStoreName}/afterAuthNavigation`),\r\n    preLogin: createAction(`${authStoreName}/preLogin`, (payload) => ({ payload })),\r\n    postLogin: createAction(`${authStoreName}/postLogin`, (payload) => ({ payload })),\r\n    login: createAction(`${authStoreName}/login`, (payload) => ({ payload })),\r\n    loginWithMfa: createAction(`${authStoreName}/loginWithMfa`, (payload) => ({ payload })),\r\n    recoverMfa: createAction(`${authStoreName}/recoverMfa`, (payload) => ({ payload })),\r\n    logout: createAction(`${authStoreName}/logout`, (payload) => ({ payload })),\r\n    silentLogout: createAction(`${authStoreName}/silentLogout`, (payload) => ({ payload })),\r\n    checkIfAllowToRememberMfaDevice: createAction(`${authStoreName}/checkIfAllowToRememberMfaDevice`, (payload) => ({ payload })),\r\n    changePhoneNumberWithVerification: createAction(`${authStoreName}/changePhoneNumberWithVerification`, (payload) => ({ payload })),\r\n    verifyChangePhoneNumber: createAction(`${authStoreName}/verifyChangePhoneNumber`, (payload) => ({ payload })),\r\n    quickSmsPasswordlessPreLogin: createAction(`${authStoreName}/quickSmsPasswordlessPreLogin`, (payload) => ({ payload })),\r\n    passwordlessPreLogin: createAction(`${authStoreName}/passwordlessPreLogin`, (payload) => ({ payload })),\r\n    passwordlessPostLogin: createAction(`${authStoreName}/passwordlessPostLogin`, (payload) => ({ payload })),\r\n    verifyInviteToken: createAction(`${authStoreName}/verifyInviteToken`, (payload) => ({ payload })),\r\n    webAuthnPrelogin: createAction(`${authStoreName}/webAuthnPrelogin`, (payload) => ({ payload })),\r\n    webAuthnPostLogin: createAction(`${authStoreName}/webAuthnPostLogin`, (payload) => ({ payload })),\r\n    webAuthnCreateNewDeviceSession: createAction(`${authStoreName}/webAuthnCreateNewDeviceSession`, (payload) => ({ payload })),\r\n    webAuthnVerifyNewDeviceSession: createAction(`${authStoreName}/webAuthnVerifyNewDeviceSession`, (payload) => ({ payload })),\r\n};\n\nvar ActivateAccountStep;\r\n(function (ActivateAccountStep) {\r\n    ActivateAccountStep[\"activating\"] = \"activating\";\r\n    ActivateAccountStep[\"success\"] = \"success\";\r\n    ActivateAccountStep[\"resend\"] = \"resend\";\r\n    ActivateAccountStep[\"activatingForm\"] = \"activatingForm\";\r\n})(ActivateAccountStep || (ActivateAccountStep = {}));\n\nconst activateState = {\r\n    step: ActivateAccountStep.activating,\r\n    loading: false,\r\n    resentEmail: false,\r\n    activationStrategy: {\r\n        loading: false,\r\n    },\r\n};\r\nconst reducers$g = {\r\n    setActivateState: typeReducerForKey('activateState'),\r\n    resetActivateState: resetStateByKey('activateState', { activateState }),\r\n    setActivateStrategyState: typeReducerNestedKey('activateState', 'activationStrategy'),\r\n};\r\nconst actions$h = {\r\n    activateAccount: createAction(`${authStoreName}/activateAccount`, (payload) => ({ payload })),\r\n    preActivateAccount: createAction(`${authStoreName}/preActivateAccount`, (payload) => ({ payload })),\r\n    getActivateAccountStrategy: createAction(`${authStoreName}/getActivateAccountStrategy`, (payload) => ({ payload })),\r\n    resendActivationEmail: createAction(`${authStoreName}/resendActivationEmail`, (payload) => ({\r\n        payload,\r\n    })),\r\n};\n\nvar AcceptInvitationStep;\r\n(function (AcceptInvitationStep) {\r\n    AcceptInvitationStep[\"validate\"] = \"validate\";\r\n    AcceptInvitationStep[\"invalid\"] = \"invalid\";\r\n    AcceptInvitationStep[\"pending\"] = \"pending\";\r\n    AcceptInvitationStep[\"success\"] = \"success\";\r\n    AcceptInvitationStep[\"failed\"] = \"failed\";\r\n})(AcceptInvitationStep || (AcceptInvitationStep = {}));\n\nconst acceptInvitationState = {\r\n    step: AcceptInvitationStep.validate,\r\n};\r\nconst reducers$f = {\r\n    setAcceptInvitationState: typeReducerForKey('acceptInvitationState'),\r\n    resetAcceptInvitationState: resetStateByKey('acceptInvitationState', {\r\n        acceptInvitationState,\r\n    }),\r\n};\r\nconst actions$g = {\r\n    acceptInvitation: createAction(`${authStoreName}/acceptInvitation`, (payload) => ({ payload })),\r\n};\n\nvar ForgotPasswordStep;\r\n(function (ForgotPasswordStep) {\r\n    ForgotPasswordStep[\"forgotPassword\"] = \"forgotPassword\";\r\n    ForgotPasswordStep[\"success\"] = \"success\";\r\n})(ForgotPasswordStep || (ForgotPasswordStep = {}));\n\nconst forgotPasswordState = {\r\n    step: ForgotPasswordStep.forgotPassword,\r\n    loading: false,\r\n    email: '',\r\n    passwordConfig: null,\r\n};\r\nconst reducers$e = {\r\n    setForgotPasswordState: typeReducerForKey('forgotPasswordState'),\r\n    resetForgotPasswordState: resetStateByKey('forgotPasswordState', { forgotPasswordState }),\r\n};\r\nconst actions$f = {\r\n    forgotPassword: createAction(`${authStoreName}/forgotPassword`, (payload) => ({ payload })),\r\n    resetPassword: createAction(`${authStoreName}/resetPassword`, (payload) => ({ payload })),\r\n    loadPasswordConfig: createAction(`${authStoreName}/loadPasswordConfig`, (payload) => ({\r\n        payload,\r\n    })),\r\n};\n\nvar ResetPhoneNumberStep;\r\n(function (ResetPhoneNumberStep) {\r\n    ResetPhoneNumberStep[\"ResetPhoneNumber\"] = \"ResetPhoneNumber\";\r\n    ResetPhoneNumberStep[\"VerifyResetPhoneNumber\"] = \"VerifyResetPhoneNumber\";\r\n    ResetPhoneNumberStep[\"ChangePhoneNumber\"] = \"ChangePhoneNumber\";\r\n})(ResetPhoneNumberStep || (ResetPhoneNumberStep = {}));\n\nconst resetPhoneNumberState = {\r\n    step: ResetPhoneNumberStep.ResetPhoneNumber,\r\n    loading: false,\r\n};\r\nconst reducers$d = {\r\n    setResetPhoneNumberState: typeReducerForKey('resetPhoneNumberState'),\r\n    resetResetPhoneNumberState: resetStateByKey('resetPhoneNumberState', { resetPhoneNumberState }),\r\n};\r\nconst actions$e = {\r\n    resetPhoneNumber: createAction(`${authStoreName}/resetPhoneNumber`, (payload) => ({ payload })),\r\n    verifyResetPhoneNumber: createAction(`${authStoreName}/verifyResetPhoneNumber`, (payload) => ({ payload })),\r\n    changePhoneNumber: createAction(`${authStoreName}/changePhoneNumber`, (payload) => ({ payload })),\r\n};\n\nconst ssoState = {\r\n    firstLoad: true,\r\n    loading: true,\r\n    saving: false,\r\n    errors: {},\r\n    loaders: {},\r\n    ssoConfigurations: []\r\n};\r\nconst reducers$c = {\r\n    setSSOLoader: loadersReducerForKey('ssoState'),\r\n    setSSOError: errorsReducerForKey('ssoState'),\r\n    setSSOState: typeReducerForKey('ssoState'),\r\n    resetSSOState: resetStateByKey('ssoState', { ssoState }),\r\n};\r\nconst actions$d = {\r\n    loadSSOConfigurationsV2: createAction(`${authStoreName}/loadSSOConfigurationsV2`),\r\n    saveSSOConfigurationV2: createAction(`${authStoreName}/saveSSOConfigurationV2`, (payload) => ({ payload })),\r\n    updateSSOConfiguration: createAction(`${authStoreName}/updateSSOConfiguration`, (payload) => ({ payload })),\r\n    deleteSSOConfiguration: createAction(`${authStoreName}/deleteSSOConfiguration`, (payload) => ({ payload })),\r\n    saveSSODomain: createAction(`${authStoreName}/saveSSODomain`, (payload) => ({ payload })),\r\n    deleteSSODomain: createAction(`${authStoreName}/deleteSSODomain`, (payload) => ({ payload })),\r\n    validateSSODomainV2: createAction(`${authStoreName}/validateSSODomainV2`, (payload) => ({ payload })),\r\n    setSSODefaultRoles: createAction(`${authStoreName}/setSSODefaultRoles`, (payload) => ({ payload })),\r\n    setSSOGroups: createAction(`${authStoreName}/setSSOGroups`, (payload) => ({ payload })),\r\n    updateSSOGroups: createAction(`${authStoreName}/updateSSOGroups`, (payload) => ({ payload })),\r\n    saveSSOConfigurationByMetadata: createAction(`${authStoreName}/saveSSOConfigurationByMetadata`, (payload) => ({ payload })),\r\n    updateSSOConfigurationByMetadata: createAction(`${authStoreName}/updateSSOConfigurationByMetadata`, (payload) => ({ payload })),\r\n    loadSSOConfigurations: createAction(`${authStoreName}/loadSSOConfigurations`),\r\n    loadSSOAuthorizationRoles: createAction(`${authStoreName}/loadSSOAuthorizationRoles`),\r\n    saveSSOConfigurations: createAction(`${authStoreName}/saveSSOConfigurations`, (payload) => ({ payload })),\r\n    // NOTE: use withCallback in case of promise response\r\n    saveSSOConfigurationsFile: createAction(`${authStoreName}/saveSSOConfigurationsFile`, (payload) => ({\r\n        payload,\r\n    })),\r\n    saveSSOConfigurationsFileWithCallback: createAction(`${authStoreName}/saveSSOConfigurationsFileWithCallback`, (payload) => ({ payload })),\r\n    validateSSODomain: createAction(`${authStoreName}/validateSSODomain`, (payload) => ({ payload })),\r\n    updateSSOAuthorizationRoles: createAction(`${authStoreName}/updateSSOAuthorizationRoles`, (payload) => ({ payload })),\r\n    deleteSamlGroup: createAction(`${authStoreName}/deleteSamlGroup`, (payload) => ({ payload })),\r\n    createSamlGroup: createAction(`${authStoreName}/createSamlGroup`, (payload) => ({ payload })),\r\n    oidcPostlogin: createAction(`${authStoreName}/oidcPostlogin`, (payload) => ({\r\n        payload,\r\n    })),\r\n};\n\nconst profileState = {\r\n    loading: false,\r\n    error: null,\r\n};\r\nconst reducers$b = {\r\n    setProfileState: typeReducerForKey('profileState'),\r\n    resetProfileState: resetStateByKey('profileState', { profileState }),\r\n};\r\nconst actions$c = {\r\n    loadProfile: createAction(`${authStoreName}/loadProfile`),\r\n    saveProfile: createAction(`${authStoreName}/saveProfile`, (payload) => ({ payload })),\r\n    changePassword: createAction(`${authStoreName}/changePassword`, (payload) => ({\r\n        payload,\r\n    })),\r\n};\n\nvar MFAStep;\r\n(function (MFAStep) {\r\n    MFAStep[\"verify\"] = \"verify\";\r\n    MFAStep[\"recoveryCode\"] = \"recoveryCode\";\r\n})(MFAStep || (MFAStep = {}));\n\nconst mfaState = {\r\n    step: MFAStep.verify,\r\n    loading: false,\r\n};\r\nconst reducers$a = {\r\n    setMfaState: typeReducerForKey('mfaState'),\r\n    resetMfaState: resetStateByKey('mfaState', { mfaState }),\r\n};\r\nconst actions$b = {\r\n    enrollMfa: createAction(`${authStoreName}/enrollMfa`),\r\n    verifyMfa: createAction(`${authStoreName}/verifyMfa`, (payload) => ({\r\n        payload,\r\n    })),\r\n    verifyMfaAfterForce: createAction(`${authStoreName}/verifyMfaAfterForce`, (payload) => ({\r\n        payload,\r\n    })),\r\n    disableMfa: createAction(`${authStoreName}/disableMfa`, (payload) => ({ payload })),\r\n};\n\nconst teamState = {\r\n    loaders: {},\r\n    pageOffset: 0,\r\n    pageSize: 20,\r\n    errors: {},\r\n    users: [],\r\n    allUsers: [],\r\n    roles: [],\r\n    permissions: [],\r\n    totalPages: 0,\r\n    filter: [],\r\n    sort: [],\r\n    allUsersQueryParams: {\r\n        _filter: null,\r\n        _offset: 0,\r\n        _limit: 20,\r\n        _order: 'DESC',\r\n        _sortBy: 'name',\r\n    },\r\n    addUserDialogState: {\r\n        loading: false,\r\n        open: false,\r\n    },\r\n    deleteUserDialogState: {\r\n        loading: false,\r\n        open: false,\r\n    },\r\n    lockUserDialogState: {\r\n        loading: false,\r\n        open: false,\r\n    },\r\n};\r\nconst reducers$9 = {\r\n    setTeamLoader: loadersReducerForKey('teamState'),\r\n    setTeamError: errorsReducerForKey('teamState'),\r\n    setTeamState: typeReducerForKey('teamState'),\r\n    resetTeamState: resetStateByKey('teamState', { teamState }),\r\n};\r\nconst actions$a = {\r\n    loadUsers: createAction(`${authStoreName}/loadUsers`, (payload) => ({ payload })),\r\n    loadAllSubTenantsUsers: createAction(`${authStoreName}/loadAllSubTenantsUsers`, (payload) => ({ payload })),\r\n    loadRoles: createAction(`${authStoreName}/loadRoles`, (payload) => ({ payload })),\r\n    addUser: createAction(`${authStoreName}/addUser`, (payload) => ({ payload })),\r\n    addUserToSubTenants: createAction(`${authStoreName}/addUserToSubTenants`, (payload) => ({ payload })),\r\n    updateUser: createAction(`${authStoreName}/updateUser`, (payload) => ({\r\n        payload,\r\n    })),\r\n    deleteUser: createAction(`${authStoreName}/deleteUser`, (payload) => ({ payload })),\r\n    setUserRolesForSubTenants: createAction(`${authStoreName}/setUserRolesForSubTenants`, (payload) => ({ payload })),\r\n    deleteUserFromSubTenants: createAction(`${authStoreName}/deleteUserFromSubTenants`, (payload) => ({ payload })),\r\n    lockUser: createAction(`${authStoreName}/lockUser`, (payload) => ({ payload })),\r\n    resendActivationLink: createAction(`${authStoreName}/resendActivationLink`, (payload) => ({ payload })),\r\n    resendInvitationLink: createAction(`${authStoreName}/resendInvitationLink`, (payload) => ({ payload })),\r\n    resendInvitationLinkToAllSubTenants: createAction(`${authStoreName}/resendInvitationLinkToAllSubTenants`, (payload) => ({ payload })),\r\n    getInvitationLink: createAction(`${authStoreName}/getInvitationLink`),\r\n    createInvitationLink: createAction(`${authStoreName}/createInvitationLink`, (payload) => ({ payload })),\r\n    updateInvitationLink: createAction(`${authStoreName}/updateInvitationLink`, (payload) => ({ payload })),\r\n    deleteInvitationLink: createAction(`${authStoreName}/deleteInvitationLink`, (payload) => ({ payload })),\r\n    openAddUserDialog: createAction(`${authStoreName}/openAddUserDialog`, (payload) => ({ payload })),\r\n    closeAddUserDialog: createAction(`${authStoreName}/closeAddUserDialog`, (payload) => ({ payload })),\r\n    openDeleteUserDialog: createAction(`${authStoreName}/openDeleteUserDialog`, (payload) => ({\r\n        payload,\r\n    })),\r\n    closeDeleteUserDialog: createAction(`${authStoreName}/closeDeleteUserDialog`, (payload) => ({ payload })),\r\n    openLockUserDialog: createAction(`${authStoreName}/openLockUserDialog`, (payload) => ({\r\n        payload,\r\n    })),\r\n    closeLockUserDialog: createAction(`${authStoreName}/closeLockUserDialog`, (payload) => ({ payload })),\r\n};\n\nconst socialLoginState = {\r\n    firstLoad: true,\r\n    loading: false,\r\n    error: '',\r\n};\r\nconst reducers$8 = {\r\n    setSocialLoginsState: typeReducerForKey('socialLoginState'),\r\n    resetSocialLoginsState: resetStateByKey('socialLoginState', { socialLoginState }),\r\n};\r\nconst actions$9 = {\r\n    loadSocialLoginsConfiguration: createAction(`${authStoreName}/loadSocialLoginsConfiguration`),\r\n    loadSocialLoginsConfigurationV2: createAction(`${authStoreName}/loadSocialLoginsConfigurationV2`),\r\n    loginViaSocialLogin: createAction(`${authStoreName}/loginViaSocialLogin`, (payload) => ({\r\n        payload,\r\n    })),\r\n    setSocialLoginError: createAction(`${authStoreName}/setSocialLoginError`, (payload) => ({\r\n        payload,\r\n    })),\r\n};\n\nvar SignUpStage;\r\n(function (SignUpStage) {\r\n    SignUpStage[\"SignUp\"] = \"SignUp\";\r\n    SignUpStage[\"SignUpSuccess\"] = \"SignUpSuccess\";\r\n})(SignUpStage || (SignUpStage = {}));\n\nconst signUpState = {\r\n    loading: false,\r\n    allowSignUps: false,\r\n    allowNotVerifiedUsersLogin: false,\r\n    firstLoad: true,\r\n    stage: SignUpStage.SignUp,\r\n};\r\nconst reducers$7 = {\r\n    setSignUpState: typeReducerForKey('signUpState'),\r\n    resetSignUpState: resetStateByKey('signUpState', { signUpState }),\r\n};\r\nconst actions$8 = {\r\n    signUpUser: createAction(`${authStoreName}/signUpUser`, (payload) => ({ payload })),\r\n    resetSignUpStateSoft: createAction(`${authStoreName}/resetSignUpStateSoft`),\r\n};\n\nconst apiTokensState = {\r\n    apiTokenType: null,\r\n    searchValue: '',\r\n    showAddTokenDialog: false,\r\n    createdByUserIdColumn: 'show',\r\n    deleteTokenDialog: {\r\n        open: false,\r\n        clientId: '',\r\n    },\r\n    successDialog: {\r\n        open: false,\r\n        secret: '',\r\n        clientId: '',\r\n    },\r\n    loaders: {},\r\n    apiTokensDataTenant: [],\r\n    apiTokensDataUser: [],\r\n    roles: [],\r\n    permissions: [],\r\n    errors: {},\r\n};\r\nconst reducers$6 = {\r\n    setApiTokensLoader: loadersReducerForKey('apiTokensState'),\r\n    setApiTokensError: errorsReducerForKey('apiTokensState'),\r\n    setApiTokensState: typeReducerForKey('apiTokensState'),\r\n    resetApiTokensState: resetStateByKey('apiTokensState', { apiTokensState }),\r\n};\r\nconst actions$7 = {\r\n    loadApiTokens: createAction(`${authStoreName}/loadApiTokens`, (payload) => ({\r\n        payload,\r\n    })),\r\n    initApiTokensData: createAction(`${authStoreName}/initApiTokensData`, (payload) => ({ payload })),\r\n    addTenantApiToken: createAction(`${authStoreName}/addTenantApiToken`, (payload) => ({\r\n        payload,\r\n    })),\r\n    addUserApiToken: createAction(`${authStoreName}/addUserApiToken`, (payload) => ({ payload })),\r\n    deleteUserApiToken: createAction(`${authStoreName}/deleteUserApiToken`, (payload) => ({ payload })),\r\n    deleteTenantApiToken: createAction(`${authStoreName}/deleteTenantApiToken`, (payload) => ({ payload })),\r\n};\n\nconst securityPolicyState = {\r\n    globalPolicy: {\r\n        loading: true,\r\n    },\r\n    publicPolicy: {\r\n        loading: false,\r\n    },\r\n    vendorMfaPolicy: {\r\n        loading: true,\r\n    },\r\n    mfaPolicy: {\r\n        loading: true,\r\n    },\r\n    lockoutPolicy: {\r\n        loading: true,\r\n    },\r\n    captchaPolicy: {\r\n        loading: true,\r\n    },\r\n    passwordHistoryPolicy: {\r\n        loading: true,\r\n    },\r\n    passwordPolicy: {\r\n        loading: true,\r\n    },\r\n    publicAuthStrategyPolicy: {\r\n        loading: true,\r\n    },\r\n};\r\nconst reducers$5 = {\r\n    setSecurityPolicyState: typeReducerForKey('securityPolicyState'),\r\n    setSecurityPolicyGlobalState: typeReducerNestedKey('securityPolicyState', 'globalPolicy'),\r\n    setSecurityPolicyPublicState: typeReducerNestedKey('securityPolicyState', 'publicPolicy'),\r\n    setSecurityPolicyAuthStrategyPublicState: typeReducerNestedKey('securityPolicyState', 'publicAuthStrategyPolicy'),\r\n    setSecurityPolicyMfaState: typeReducerNestedKey('securityPolicyState', 'mfaPolicy'),\r\n    setSecurityPolicyVendorMfaState: typeReducerNestedKey('securityPolicyState', 'vendorMfaPolicy'),\r\n    setSecurityPolicyLockoutState: typeReducerNestedKey('securityPolicyState', 'lockoutPolicy'),\r\n    setSecurityPolicyCaptchaState: typeReducerNestedKey('securityPolicyState', 'captchaPolicy'),\r\n    setSecurityPolicyPasswordHistoryState: typeReducerNestedKey('securityPolicyState', 'passwordHistoryPolicy'),\r\n    setSecurityPolicyPasswordState: typeReducerNestedKey('securityPolicyState', 'passwordPolicy'),\r\n    resetSecurityPolicyState: resetStateByKey('securityPolicyState', { securityPolicyState }),\r\n};\r\nconst actions$6 = {\r\n    loadSecurityPolicy: createAction(`${authStoreName}/loadSecurityPolicy`),\r\n    loadPublicSecurityPolicy: createAction(`${authStoreName}/loadPublicSecurityPolicy`),\r\n    loadSecurityPolicyMfa: createAction(`${authStoreName}/loadSecurityPolicyMfa`),\r\n    loadSecurityPolicyVendorMfa: createAction(`${authStoreName}/loadSecurityPolicyVendorMfa`),\r\n    saveSecurityPolicyMfa: createAction(`${authStoreName}/saveSecurityPolicyMfa`, (payload) => ({ payload })),\r\n    loadSecurityPolicyLockout: createAction(`${authStoreName}/loadSecurityPolicyLockout`),\r\n    saveSecurityPolicyLockout: createAction(`${authStoreName}/saveSecurityPolicyLockout`, (payload) => ({ payload })),\r\n    loadSecurityPolicyCaptcha: createAction(`${authStoreName}/loadSecurityPolicyCaptcha`),\r\n    loadSecurityPolicyPasswordHistory: createAction(`${authStoreName}/loadSecurityPolicyPasswordHistory`),\r\n    saveSecurityPolicyPasswordHistory: createAction(`${authStoreName}/saveSecurityPolicyPasswordHistory`, (payload) => ({ payload })),\r\n    loadVendorPasswordConfig: createAction(`${authStoreName}/loadVendorPasswordConfig`),\r\n    loadPublicAuthStrategiesPolicy: createAction(`${authStoreName}/loadPublicAuthStrategiesPolicy`),\r\n};\n\nconst accountSettingsState = {\r\n    loading: false,\r\n};\r\nconst reducers$4 = {\r\n    setAccountSettingsState: typeReducerForKey('accountSettingsState'),\r\n    resetAccountSettingsState: resetStateByKey('accountSettingsState', { accountSettingsState }),\r\n};\r\nconst actions$5 = {\r\n    loadAccountSettings: createAction(`${authStoreName}/loadAccountSettings`, (payload) => ({ payload })),\r\n    saveAccountSettings: createAction(`${authStoreName}/saveAccountSettings`, (payload) => ({ payload })),\r\n};\n\nconst tenantsState = {\r\n    tenants: [],\r\n    subTenants: [],\r\n    loading: true,\r\n    tenantTree: null,\r\n};\r\nconst reducers$3 = {\r\n    setTenantsState: typeReducerForKey('tenantsState'),\r\n    resetTenantsState: resetStateByKey('tenantsState', { tenantsState }),\r\n};\r\nconst actions$4 = {\r\n    switchTenant: createAction(`${authStoreName}/switchTenant`, (payload) => ({ payload })),\r\n    loadTenants: createAction(`${authStoreName}/loadTenants`, (payload) => ({\r\n        payload,\r\n    })),\r\n    loadSubTenants: createAction(`${authStoreName}/loadSubTenants`, (payload) => ({\r\n        payload,\r\n    })),\r\n    loadSubTenantsTree: createAction(`${authStoreName}/loadSubTenantsTree`, (payload) => ({\r\n        payload,\r\n    })),\r\n};\n\nconst rolesState = {\r\n    loading: false,\r\n    roles: [],\r\n    permissions: [],\r\n    permissionCategories: [],\r\n};\r\nconst reducers$2 = {\r\n    setRolesState: typeReducerForKey('rolesState'),\r\n    resetRolesState: resetStateByKey('rolesState', { rolesState }),\r\n};\r\nconst actions$3 = {\r\n    loadRolesAndPermissions: createAction(`${authStoreName}/loadRoles`, (payload) => ({ payload })),\r\n    addRole: createAction(`${authStoreName}/addRole`, (payload) => ({ payload })),\r\n    updateRole: createAction(`${authStoreName}/updateRole`, (payload) => ({ payload })),\r\n    deleteRole: createAction(`${authStoreName}/deleteRole`, (payload) => ({ payload })),\r\n    attachPermissionsToRole: createAction(`${authStoreName}/attachPermissionsToRole`, (payload) => ({ payload })),\r\n    attachPermissionToRoles: createAction(`${authStoreName}/attachPermissionToRoles`, (payload) => ({ payload })),\r\n};\n\nconst sessionsState = {\r\n    loading: false,\r\n    sessions: [],\r\n};\r\nconst reducers$1 = {\r\n    setSessionsState: typeReducerForKey('sessionsState'),\r\n    resetSessionsState: resetStateByKey('sessionsState', { sessionsState }),\r\n};\r\nconst actions$2 = {\r\n    loadUserSessions: createAction(`${authStoreName}/loadUserSessions`),\r\n    loadCurrentUserSession: createAction(`${authStoreName}/loadCurrentUserSession`),\r\n    deleteUserSession: createAction(`${authStoreName}/deleteUserSession`, (payload) => ({ payload })),\r\n    deleteAllUserSessions: createAction(`${authStoreName}/deleteAllUserSessions`),\r\n    revokeUserSessions: createAction(`${authStoreName}/revokeUserSessions`, (payload) => ({ payload })),\r\n};\n\nconst sessionsPolicyState = {\r\n    loading: false,\r\n    configurations: {},\r\n};\r\nconst reducers = {\r\n    setSessionsPolicyState: typeReducerForKey('sessionsPolicyState'),\r\n    resetSessionsPolicyState: resetStateByKey('sessionsPolicyState', { sessionsPolicyState }),\r\n};\r\nconst actions$1 = {\r\n    loadSessionsPolicy: createAction(`${authStoreName}/loadSessionsPolicy`),\r\n    createOrUpdateSessionsPolicy: createAction(`${authStoreName}/createOrUpdateSessionsPolicy`, (payload) => ({ payload })),\r\n};\n\nconst reinitializeState = {\r\n    isAuthenticated: false,\r\n    isLoading: true,\r\n    isSSOAuth: false,\r\n    user: null,\r\n    signUpState,\r\n    loginState,\r\n    activateState,\r\n    acceptInvitationState,\r\n    forgotPasswordState,\r\n    ssoState,\r\n    profileState,\r\n    mfaState,\r\n    teamState,\r\n    socialLoginState,\r\n    apiTokensState,\r\n    securityPolicyState,\r\n    accountSettingsState,\r\n    tenantsState,\r\n    rolesState,\r\n    resetPhoneNumberState,\r\n    sessionsState,\r\n    sessionsPolicyState,\r\n};\r\nconst initialState = Object.assign({ routes: {\r\n        authenticatedUrl: '/',\r\n        loginUrl: '/account/login',\r\n        logoutUrl: '/account/logout',\r\n        activateUrl: '/account/activate',\r\n        acceptInvitationUrl: '/account/invitation/accept',\r\n        forgetPasswordUrl: '/account/forget-password',\r\n        resetPhoneNumberUrl: '/account/reset-phone-number',\r\n        resetPasswordUrl: '/account/reset-password',\r\n        socialLoginCallbackUrl: '/account/social/success',\r\n        signUpUrl: '/account/sign-up',\r\n        oidcRedirectUrl: '/account/oidc/callback',\r\n        samlCallbackUrl: '/account/saml/callback',\r\n        magicLinkCallbackUrl: '/account/login/magic-link',\r\n        hostedLoginRedirectUrl: '/oauth/callback'\r\n    }, onRedirectTo: () => { } }, reinitializeState);\n\nconst { reducer, actions: sliceActions } = createSlice({\r\n    name: authStoreName,\r\n    initialState,\r\n    reducers: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ resetState: (state) => (Object.assign(Object.assign({}, state), reinitializeState)), setState: (state, { payload }) => (Object.assign(Object.assign({}, state), payload)), setUser: typeReducer('user') }, reducers$h), reducers$8), reducers$g), reducers$f), reducers$e), reducers$d), reducers$7), reducers$b), reducers$c), reducers$a), reducers$9), reducers$6), reducers$5), reducers$4), reducers$3), reducers$2), reducers$1), reducers),\r\n});\r\nconst actions = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, sliceActions), actions$i), actions$9), actions$h), actions$g), actions$f), actions$e), actions$8), actions$c), actions$d), actions$b), actions$a), actions$7), actions$6), actions$5), actions$4), actions$3), actions$2), actions$1);\n\nvar SSOStateKeys;\r\n(function (SSOStateKeys) {\r\n    SSOStateKeys[\"LOAD_SSO_CONFIGURATIONS\"] = \"LOAD_SSO_CONFIGURATIONS\";\r\n    SSOStateKeys[\"SAVE_SSO_CONFIGURATION\"] = \"SAVE_SSO_CONFIGURATION\";\r\n    SSOStateKeys[\"UPDATE_SSO_CONFIGURATION\"] = \"UPDATE_SSO_CONFIGURATION\";\r\n    SSOStateKeys[\"SAVE_SSO_CONFIGURATION_BY_METADATA\"] = \"SAVE_SSO_CONFIGURATION_BY_METADATA\";\r\n    SSOStateKeys[\"UPDATE_SSO_CONFIGURATION_BY_METADATA\"] = \"UPDATE_SSO_CONFIGURATION\";\r\n    SSOStateKeys[\"DELETE_SSO_CONFIGURATION\"] = \"DELETE_SSO_CONFIGURATION\";\r\n    SSOStateKeys[\"SAVE_SSO_DOMAIN\"] = \"SAVE_SSO_DOMAIN\";\r\n    SSOStateKeys[\"DELETE_SSO_DOMAIN\"] = \"DELETE_SSO_DOMAIN\";\r\n    SSOStateKeys[\"VALIDATE_SSO_DOMAIN\"] = \"VALIDATE_SSO_DOMAIN\";\r\n    SSOStateKeys[\"UPDATE_SSO_DEFAULT_ROLES\"] = \"UPDATE_SSO_DEFAULT_ROLES\";\r\n    SSOStateKeys[\"DELETE_SSO_GROUPS\"] = \"DELETE_SSO_GROUPS\";\r\n    SSOStateKeys[\"SAVE_SSO_GROUPS\"] = \"SAVE_SSO_GROUPS\";\r\n    SSOStateKeys[\"GET_SSO_AUTHORIZATION_ROLES\"] = \"GET_SSO_AUTHORIZATION_ROLES\";\r\n})(SSOStateKeys || (SSOStateKeys = {}));\r\nvar SamlVendors;\r\n(function (SamlVendors) {\r\n    SamlVendors[\"Saml\"] = \"saml\";\r\n    SamlVendors[\"Okta\"] = \"okta\";\r\n    SamlVendors[\"Azure\"] = \"azure\";\r\n    SamlVendors[\"Google\"] = \"google\";\r\n    SamlVendors[\"Oidc\"] = \"oidc\";\r\n})(SamlVendors || (SamlVendors = {}));\n\nfunction omitProps(props, keys) {\r\n    const newProps = Object.assign({}, props);\r\n    keys.forEach((key) => {\r\n        delete newProps[key];\r\n    });\r\n    return newProps;\r\n}\r\nfunction generateCodeChallenge(codeVerifier) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const digest = yield crypto.subtle.digest('SHA-256', new TextEncoder().encode(codeVerifier));\r\n        // @ts-ignore\r\n        return btoa(String.fromCharCode(...new Uint8Array(digest)))\r\n            .replace(/=/g, '')\r\n            .replace(/\\+/g, '-')\r\n            .replace(/\\//g, '_');\r\n    });\r\n}\r\nfunction createRandomString(length = 16) {\r\n    let text = '';\r\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (let i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return text;\r\n}\r\nconst readFileAsText = (file) => new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = reject;\r\n});\n\nconst apiTokensDataDemo = {\r\n    clientId: 'CLIENT_ID_16806d3d-8fc3-4450-be97-abdaf66b723e',\r\n    secret: 'SECRET_16806d3d-8fc3-4450-be97-abdaf66b723e',\r\n    createdAt: 'createdAt',\r\n    description: 'Demo API Token (preview only)',\r\n};\r\nconst apiTokensDataTenantDemo = Object.assign(Object.assign({}, apiTokensDataDemo), { roleIds: [], tenantId: 'my-tenant-id', createdByUserId: 'createdByUserId' });\r\nconst roleDemo = [\r\n    {\r\n        id: 'roleId',\r\n        key: 'admin',\r\n        isDefault: false,\r\n        name: 'Admin',\r\n        description: null,\r\n        permissions: ['adminPermissionId'],\r\n        tenantId: 'tenantId',\r\n        vendorId: 'vendorId',\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n    },\r\n];\r\nconst rolePermissionDemo = [\r\n    {\r\n        id: 'adminPermissionId',\r\n        key: 'fe.*',\r\n        name: 'General Admin',\r\n        description: undefined,\r\n        categoryId: 'category',\r\n        fePermission: true,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n    },\r\n];\r\nconst userProfileDemo = {\r\n    id: 'testId',\r\n    name: 'Demo User Name',\r\n    email: 'demo-user@frontegg.com',\r\n    mfaEnrolled: true,\r\n    profileImage: undefined,\r\n    profilePictureUrl: 'https://www.gravatar.com/avatar/42b2ad2bad6fc9b9db5086dfcf8072ac?d=https://ui-avatars.com/api/fe/128/random?t=1617261890875?t=1617261917434',\r\n    roles: roleDemo,\r\n    permissions: rolePermissionDemo,\r\n    tenantId: 'my-tenant-id',\r\n    tenantIds: ['my-tenant-id'],\r\n    activatedForTenant: true,\r\n    metadata: JSON.stringify({\r\n        phoneNumber: '+972-54123456',\r\n        jobTitle: 'Developer',\r\n        address: {\r\n            city: 'Tel Aviv',\r\n            country: 'Israel',\r\n        },\r\n    }),\r\n    roleIds: undefined,\r\n    verified: undefined,\r\n};\r\nconst userDemo = Object.assign(Object.assign({}, userProfileDemo), { accessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MTY5YmY0Zi02YmI5LTQ5NGMtOGNkZS05MDc4NDQ0NWY4MDciLCJuYW1lIjoiRHVtbXkgVXNlciIsImVtYWlsIjoiZHVtbXlAZnJvbnRlZ2cuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm1ldGFkYXRhIjp7fSwicm9sZXMiOlsiYWRtaW4iXSwicGVybWlzc2lvbnMiOlsiZmUuKiJdLCJ0ZW5hbnRJZCI6Im15LXRlbmFudC1pZCIsInRlbmFudElkcyI6WyJteS10ZW5hbnQtaWQiXSwicHJvZmlsZVBpY3R1cmVVcmwiOiJodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLzQyYjJhZDJiYWQ2ZmM5YjlkYjUwODZkZmNmODA3MmFjP2Q9aHR0cHM6Ly91aS1hdmF0YXJzLmNvbS9hcGkvZmUvMTI4L3JhbmRvbT90PTE2MTcyNjE4OTA4NzU_dD0xNjE3MjYxOTE3NDM0IiwidHlwZSI6InVzZXJUb2tlbiIsImlhdCI6MTYxNzkwNjMyNCwiZXhwIjoxNjE3OTkyNzI0LCJpc3MiOiJmcm9udGVnZyJ9.paaXLkpWEWbQmUtoK2P8IwXCxK4WJp7XhXonvzF8g1I', expiresIn: 86400, mfaRequired: false, refreshToken: 'refresh-token-dummy-de39dc9c-9d22-4852-b7f5-c3c0aa613b58', type: 'userToken', iat: 1617906324, exp: 1617992724, iss: 'frontegg', email_verified: true });\r\nconst profileStateDemo = {\r\n    loading: false,\r\n    error: undefined,\r\n    saving: true,\r\n    profile: userProfileDemo,\r\n};\r\nconst policyDemo = {\r\n    id: 'id',\r\n    enforceMFAType: 'DontForce',\r\n    createdAt: new Date(),\r\n    updatedAt: new Date(),\r\n    allowOverrideEnforcePasswordHistory: true,\r\n    allowOverridePasswordComplexity: false,\r\n    allowOverridePasswordExpiration: false,\r\n    allowSignups: true,\r\n    apiTokensEnabled: true,\r\n    cookieSameSite: 'cookieSameSite',\r\n    defaultRefreshTokenExpiration: 0,\r\n    defaultTokenExpiration: 1,\r\n    publicKey: 'publicKey',\r\n};\r\nconst publicSecurityPolicy = {\r\n    allowSignups: true,\r\n    allowNotVerifiedUsersLogin: false,\r\n    apiTokensEnabled: true,\r\n    forcePermissions: false,\r\n    authStrategy: AuthStrategyEnum.EmailAndPassword,\r\n};\r\nconst policyMfaDemo = {\r\n    id: 'id',\r\n    enforceMFAType: 'DontForce',\r\n    createdAt: new Date(),\r\n    updatedAt: new Date(),\r\n};\r\nconst policyLockoutDemo = {\r\n    id: 'id',\r\n    enabled: true,\r\n    maxAttempts: 1,\r\n    createdAt: new Date(),\r\n    updatedAt: new Date(),\r\n};\r\nconst policyPasswordHistoryDemo = {\r\n    id: 'id',\r\n    enabled: true,\r\n    historySize: 1,\r\n    createdAt: new Date(),\r\n    updatedAt: new Date(),\r\n};\r\nconst samlConfigurationDemo = {\r\n    enabled: true,\r\n    domain: 'domain',\r\n    validated: true,\r\n    generatedVerification: 'generatedVerification',\r\n    ssoEndpoint: 'ssoEndpoint',\r\n    publicCertificate: 'publicCertificate',\r\n    signRequest: true,\r\n    createdAt: new Date(),\r\n    updatedAt: new Date(),\r\n    acsUrl: undefined,\r\n    spEntityId: undefined,\r\n    oidcClientId: undefined,\r\n    oidcSecret: undefined,\r\n    type: undefined,\r\n};\r\nconst samlMetadataDemo = {\r\n    id: 'id',\r\n    createdAt: 'createdAt',\r\n    updatedAt: 'updatedAt',\r\n    properties: [],\r\n    vendorId: 'vendorId',\r\n    entityName: 'saml',\r\n    isActive: true,\r\n    configuration: {\r\n        acsUrl: 'acsUrl',\r\n        spEntityId: 'spEntityId',\r\n    },\r\n};\r\nconst rolesDemo = [\r\n    {\r\n        id: 'id',\r\n        description: 'description',\r\n        key: 'key',\r\n        name: 'name',\r\n        permissions: [],\r\n        permissionLevel: 1,\r\n    },\r\n];\r\nconst ssoStateDemo = {\r\n    firstLoad: false,\r\n    loading: false,\r\n    error: undefined,\r\n    saving: false,\r\n    samlConfiguration: samlConfigurationDemo,\r\n    roles: rolesDemo,\r\n    authorizationRoles: [],\r\n    errors: {},\r\n    loaders: {},\r\n    ssoConfigurations: [],\r\n};\r\nconst permissionsDemo = [\r\n    {\r\n        description: 'string',\r\n        fePermission: true,\r\n        id: 'id',\r\n        key: 'key',\r\n        name: 'name',\r\n        roleIds: [],\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        categoryId: 'categoryId',\r\n    },\r\n];\r\nconst userTeamDemo2 = {\r\n    id: 'id2',\r\n    email: 'demo-user2@frontegg.com',\r\n    name: 'Demo User Name2',\r\n    phone: undefined,\r\n    profileImage: undefined,\r\n    profileImageUrl: undefined,\r\n    tenantId: 'tenantId',\r\n    vendorId: 'vendorId',\r\n    roleIds: [],\r\n    activatedForTenant: true,\r\n    verified: false,\r\n    createdAt: new Date().toISOString(),\r\n    customData: undefined,\r\n    lastLogin: undefined,\r\n    mfaEnabled: undefined,\r\n    roles: [],\r\n}; // TODO add verified to ITeamUser\r\nconst userTeamDemo = {\r\n    id: 'id',\r\n    email: 'demo-user@frontegg.com',\r\n    name: 'Demo User Name',\r\n    phone: undefined,\r\n    profileImage: undefined,\r\n    profileImageUrl: undefined,\r\n    tenantId: 'tenantId',\r\n    vendorId: 'vendorId',\r\n    roleIds: [],\r\n    activatedForTenant: true,\r\n    createdAt: new Date(2022, 4, 1).toISOString(),\r\n    verified: true,\r\n    customData: undefined,\r\n    lastLogin: new Date(2022, 5, 25).toISOString(),\r\n    mfaEnabled: undefined,\r\n    roles: [],\r\n};\r\nconst userSubTenantDemo = {\r\n    metadata: '',\r\n    mfaEnrolled: false,\r\n    provider: '',\r\n    sub: '',\r\n    tenantIds: [],\r\n    tenants: [],\r\n    verified: false,\r\n    id: 'id',\r\n    email: 'email',\r\n    name: 'name',\r\n    tenantId: 'tenantId',\r\n    createdAt: new Date(),\r\n};\r\nconst usersDemo = [userTeamDemo, userTeamDemo2];\r\nconst allUsersDemo = [userSubTenantDemo];\r\nconst tenantsDemo = [\r\n    {\r\n        id: 'my-tenant-id',\r\n        isReseller: false,\r\n        name: 'Frontegg demo',\r\n        deletedAt: null,\r\n        metadata: undefined,\r\n        tenantId: 'my-tenant-id',\r\n        vendorId: 'vendorId',\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        address: undefined,\r\n        timezone: undefined,\r\n        dateFormat: undefined,\r\n        timeFormat: undefined,\r\n        currency: undefined,\r\n        logo: undefined,\r\n    },\r\n];\r\nconst sessionsMock = [\r\n    {\r\n        id: `laptop`,\r\n        userAgent: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15\",\r\n        createdAt: new Date(),\r\n        ipAddress: \"190.194.88.251\",\r\n        current: true,\r\n    },\r\n    {\r\n        id: `iphone`,\r\n        userAgent: \"Mozilla/5.0 (iPhone; CPU iPhone OS 15_2_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.2 Mobile/15E148 Safari/604.1\",\r\n        createdAt: new Date(Date.now() - 10000),\r\n        ipAddress: \"191.49.203.21\",\r\n    },\r\n    {\r\n        id: `tablet`,\r\n        userAgent: \"Mozilla/5.0 (Linux; Android 6.0.1; SGP771 Build/32.2.A.0.253; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/52.0.2743.98 Safari/537.36\",\r\n        createdAt: new Date(Date.now() - 30000),\r\n        ipAddress: \"130.19.196.136\",\r\n    },\r\n    {\r\n        id: `anotherlaptop`,\r\n        userAgent: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15\",\r\n        createdAt: new Date(Date.now() - 1002232300),\r\n        ipAddress: \"2.228.163.92\",\r\n    }\r\n];\r\nconst sessionsConfigDummies = {\r\n    sessionConcurrentConfiguration: {\r\n        isActive: true,\r\n        maxSessions: 10,\r\n    },\r\n    sessionIdleTimeoutConfiguration: {\r\n        isActive: true,\r\n        timeout: 300\r\n    },\r\n    sessionTimeoutConfiguration: {\r\n        isActive: true,\r\n        timeout: 86400\r\n    },\r\n};\n\nvar UserVeirifedOriginTypes;\r\n(function (UserVeirifedOriginTypes) {\r\n    UserVeirifedOriginTypes[\"SOCIAL_LOGIN\"] = \"SOCIAL_LOGIN\";\r\n    UserVeirifedOriginTypes[\"PASSWORDLESS\"] = \"PASSWORDLESS\";\r\n    UserVeirifedOriginTypes[\"ACTIVATION_LINK\"] = \"ACTIVATION_LINK\";\r\n})(UserVeirifedOriginTypes || (UserVeirifedOriginTypes = {}));\r\nvar AuthenticationTypes;\r\n(function (AuthenticationTypes) {\r\n    AuthenticationTypes[\"SOCIAL_LOGIN\"] = \"SOCIAL_LOGIN\";\r\n    AuthenticationTypes[\"PASSWORD\"] = \"PASSWORD\";\r\n})(AuthenticationTypes || (AuthenticationTypes = {}));\r\nvar AdminPortalPagesForEvents;\r\n(function (AdminPortalPagesForEvents) {\r\n    AdminPortalPagesForEvents[\"profile\"] = \"profile\";\r\n    AdminPortalPagesForEvents[\"privacy\"] = \"privacy\";\r\n    AdminPortalPagesForEvents[\"personalApiTokens\"] = \"personalApiTokens\";\r\n    AdminPortalPagesForEvents[\"account\"] = \"account\";\r\n    AdminPortalPagesForEvents[\"users\"] = \"users\";\r\n    AdminPortalPagesForEvents[\"security\"] = \"security\";\r\n    AdminPortalPagesForEvents[\"sso\"] = \"sso\";\r\n    AdminPortalPagesForEvents[\"audits\"] = \"audits\";\r\n    AdminPortalPagesForEvents[\"webhooks\"] = \"webhooks\";\r\n    AdminPortalPagesForEvents[\"apiTokens\"] = \"apiTokens\";\r\n    AdminPortalPagesForEvents[\"roles\"] = \"roles\";\r\n    AdminPortalPagesForEvents[\"subscriptions\"] = \"subscription\";\r\n})(AdminPortalPagesForEvents || (AdminPortalPagesForEvents = {}));\r\nconst AdminPortalPages = {\r\n    profile: AdminPortalPagesForEvents.profile,\r\n    privacy: AdminPortalPagesForEvents.privacy,\r\n    personalApiTokens: AdminPortalPagesForEvents.personalApiTokens,\r\n    account: AdminPortalPagesForEvents.account,\r\n    users: AdminPortalPagesForEvents.users,\r\n    security: AdminPortalPagesForEvents.security,\r\n    sso: AdminPortalPagesForEvents.sso,\r\n    audits: AdminPortalPagesForEvents.audits,\r\n    webhooks: AdminPortalPagesForEvents.webhooks,\r\n    apiTokens: AdminPortalPagesForEvents.apiTokens,\r\n    roles: AdminPortalPagesForEvents.roles,\r\n    subscriptions: AdminPortalPagesForEvents.subscriptions,\r\n};\n\nfunction* loadAllowSignUps() {\r\n    yield put(actions.setSignUpState({ loading: true }));\r\n    try {\r\n        const policy = yield call(api.auth.getVendorConfig);\r\n        const { allowSignups: allowSignUps, allowNotVerifiedUsersLogin } = policy;\r\n        yield put(actions.setSignUpState({ loading: false, allowSignUps, allowNotVerifiedUsersLogin, firstLoad: false }));\r\n        yield put(actions.setSecurityPolicyPublicState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSignUpState({ loading: false, error: e.message, firstLoad: false }));\r\n    }\r\n}\r\nfunction* signUpUser(_a) {\r\n    var _b;\r\n    var _c = _a.payload, { events, url } = _c, payload = __rest(_c, [\"events\", \"url\"]);\r\n    yield put(actions.setSignUpState({ loading: true }));\r\n    try {\r\n        const { routes, onRedirectTo } = yield select((state) => state.auth);\r\n        const { shouldActivate, user, tenantId, userId } = yield call(api.auth.signUpUser, payload);\r\n        if (!payload.invitationToken) {\r\n            const { email, name, companyName } = payload;\r\n            (_b = events === null || events === void 0 ? void 0 : events.signUpComplete) === null || _b === void 0 ? void 0 : _b.call(events, {\r\n                email,\r\n                name,\r\n                companyName,\r\n                url,\r\n                authenticationType: AuthenticationTypes.PASSWORD,\r\n                id: userId,\r\n                tenantId,\r\n                createdAt: new Date(),\r\n            });\r\n        }\r\n        ContextHolder.setAccessToken(user === null || user === void 0 ? void 0 : user.accessToken);\r\n        ContextHolder.setUser(user);\r\n        if (!shouldActivate && (user === null || user === void 0 ? void 0 : user.mfaRequired) && (user === null || user === void 0 ? void 0 : user.mfaToken)) {\r\n            let step = LoginStep.loginWithTwoFactor;\r\n            if (user.hasOwnProperty('mfaEnrolled') && !user.mfaEnrolled) {\r\n                yield put(actions.setMfaState({\r\n                    step: MFAStep.verify,\r\n                    qrCode: user.qrCode,\r\n                    recoveryCode: user.recoveryCode,\r\n                    mfaToken: user.mfaToken,\r\n                    loading: false,\r\n                }));\r\n                step = LoginStep.forceTwoFactor;\r\n            }\r\n            yield put(actions.setLoginState({ step }));\r\n            onRedirectTo(routes.loginUrl);\r\n        }\r\n        else {\r\n            yield put(actions.setSignUpState({ loading: false, shouldActivate, stage: SignUpStage.SignUpSuccess }));\r\n            yield put(actions.setState({\r\n                user,\r\n                isAuthenticated: !!(user === null || user === void 0 ? void 0 : user.accessToken),\r\n            }));\r\n            if (!shouldActivate) {\r\n                yield put(actions.loadTenants());\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        yield put(actions.setSignUpState({ loading: false, error: e.message }));\r\n    }\r\n    yield put(actions.setSignUpState({ loading: false }));\r\n}\r\nfunction* resetSignUpStateSoft() {\r\n    const { allowSignUps, allowNotVerifiedUsersLogin } = yield select((state) => state.auth.signUpState);\r\n    yield put(actions.resetSignUpState());\r\n    yield put(actions.setSignUpState({ allowSignUps, allowNotVerifiedUsersLogin }));\r\n}\r\nfunction* signUpSaga() {\r\n    yield takeLeading(actions.signUpUser, signUpUser);\r\n    yield takeLeading(actions.resetSignUpStateSoft, resetSignUpStateSoft);\r\n}\n\nfunction* loadSecurityPolicy() {\r\n    yield put(actions.setSecurityPolicyGlobalState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getGlobalSecurityPolicy);\r\n        yield put(actions.setSecurityPolicyGlobalState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyGlobalState({ error: e.message, loading: false }));\r\n    }\r\n    yield put(actions.loadSecurityPolicyMfa());\r\n    yield put(actions.loadSecurityPolicyVendorMfa());\r\n    yield put(actions.loadSecurityPolicyLockout());\r\n    yield put(actions.loadSecurityPolicyCaptcha());\r\n    yield put(actions.loadPublicAuthStrategiesPolicy());\r\n}\r\nfunction* loadPublicSecurityPolicy() {\r\n    yield put(actions.setSecurityPolicyPublicState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getVendorConfig);\r\n        yield put(actions.setSecurityPolicyPublicState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyPublicState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* loadPublicAuthStrategiesPolicy() {\r\n    yield put(actions.setSecurityPolicyAuthStrategyPublicState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getVendorPublicAuthStrategiesConfig);\r\n        yield put(actions.setSecurityPolicyAuthStrategyPublicState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyAuthStrategyPublicState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* loadSecurityPolicyMfa() {\r\n    yield put(actions.setSecurityPolicyMfaState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getMfaPolicy);\r\n        yield put(actions.setSecurityPolicyMfaState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyMfaState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* loadSecurityPolicyVendorMfa() {\r\n    yield put(actions.setSecurityPolicyMfaState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getVendorMfaPolicy);\r\n        yield put(actions.setSecurityPolicyVendorMfaState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyVendorMfaState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* saveSecurityPolicyMfa(_a) {\r\n    var _b = _a.payload, { callback } = _b, newSecurityPolicy = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setSecurityPolicyMfaState({ saving: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.saveMfaPolicy, newSecurityPolicy);\r\n        yield put(actions.setSecurityPolicyMfaState({ policy, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(policy);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyMfaState({ saving: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* loadSecurityPolicyLockout() {\r\n    yield put(actions.setSecurityPolicyLockoutState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getLockoutPolicy);\r\n        yield put(actions.setSecurityPolicyLockoutState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyLockoutState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* saveSecurityPolicyLockout(_a) {\r\n    var _b = _a.payload, { callback } = _b, newSecurityPolicy = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setSecurityPolicyLockoutState({ saving: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.saveLockoutPolicy, newSecurityPolicy);\r\n        yield put(actions.setSecurityPolicyLockoutState({ policy, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(policy);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyLockoutState({ saving: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* loadSecurityPolicyCaptcha() {\r\n    yield put(actions.setSecurityPolicyLockoutState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getCaptchaPolicy);\r\n        yield put(actions.setSecurityPolicyCaptchaState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyCaptchaState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* loadSecurityPolicyPasswordHistory() {\r\n    yield put(actions.setSecurityPolicyPasswordHistoryState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getPasswordHistoryPolicy);\r\n        yield put(actions.setSecurityPolicyPasswordHistoryState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyPasswordHistoryState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* saveSecurityPolicyPasswordHistory(_a) {\r\n    var _b = _a.payload, { callback } = _b, newSecurityPolicy = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setSecurityPolicyPasswordHistoryState({ saving: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.savePasswordHistoryPolicy, newSecurityPolicy);\r\n        yield put(actions.setSecurityPolicyPasswordHistoryState({ policy, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(policy);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyPasswordHistoryState({ saving: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* loadVendorPasswordConfig() {\r\n    yield put(actions.setSecurityPolicyPasswordState({ loading: true, error: null }));\r\n    try {\r\n        const policy = yield call(api.auth.getPasswordConfigPolicy);\r\n        yield put(actions.setSecurityPolicyPasswordState({ policy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyPasswordState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* securityPolicySagas() {\r\n    yield takeLeading(actions.loadSecurityPolicy, loadSecurityPolicy);\r\n    yield takeEvery(actions.saveSecurityPolicyMfa, saveSecurityPolicyMfa);\r\n    yield takeEvery(actions.loadSecurityPolicyMfa, loadSecurityPolicyMfa);\r\n    yield takeEvery(actions.loadSecurityPolicyVendorMfa, loadSecurityPolicyVendorMfa);\r\n    yield takeEvery(actions.saveSecurityPolicyLockout, saveSecurityPolicyLockout);\r\n    yield takeEvery(actions.loadSecurityPolicyLockout, loadSecurityPolicyLockout);\r\n    yield takeEvery(actions.loadSecurityPolicyCaptcha, loadSecurityPolicyCaptcha);\r\n    yield takeEvery(actions.saveSecurityPolicyPasswordHistory, saveSecurityPolicyPasswordHistory);\r\n    yield takeEvery(actions.loadSecurityPolicyPasswordHistory, loadSecurityPolicyPasswordHistory);\r\n    yield takeEvery(actions.loadVendorPasswordConfig, loadVendorPasswordConfig);\r\n    yield takeEvery(actions.loadPublicSecurityPolicy, loadPublicSecurityPolicy);\r\n    yield takeEvery(actions.loadPublicAuthStrategiesPolicy, loadPublicAuthStrategiesPolicy);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* loadPublicSecurityPolicyMock() {\r\n    yield put(actions.setSecurityPolicyPublicState({ loading: true, error: null }));\r\n    try {\r\n        yield put(actions.setSecurityPolicyPublicState({ policy: publicSecurityPolicy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSecurityPolicyPublicState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* loadSecurityPolicyMock() {\r\n    yield put(actions.setSecurityPolicyGlobalState({ loading: true, error: null }));\r\n    yield delay();\r\n    yield put(actions.setSecurityPolicyGlobalState({ policy: policyDemo, loading: false }));\r\n    yield put(actions.loadSecurityPolicyMfa());\r\n    yield put(actions.loadSecurityPolicyVendorMfa());\r\n    yield put(actions.loadSecurityPolicyLockout());\r\n    yield put(actions.loadSecurityPolicyCaptcha());\r\n}\r\nfunction* loadSecurityPolicyMfaMock() {\r\n    yield put(actions.setSecurityPolicyMfaState({ loading: true, error: null }));\r\n    yield delay();\r\n    yield put(actions.setSecurityPolicyMfaState({ policy: policyMfaDemo, loading: false }));\r\n}\r\nfunction* loadSecurityPolicyVendorMfaMock() {\r\n    yield put(actions.setSecurityPolicyVendorMfaState({ loading: true, error: null }));\r\n    yield delay();\r\n    yield put(actions.setSecurityPolicyVendorMfaState({ policy: policyMfaDemo, loading: false }));\r\n}\r\nfunction* saveSecurityPolicyMfaMock(_a) {\r\n    var _b;\r\n    var _c = _a.payload, { callback } = _c, newSecurityPolicy = __rest(_c, [\"callback\"]);\r\n    yield put(actions.setSecurityPolicyMfaState({ saving: true, error: null }));\r\n    const policy = Object.assign(Object.assign({}, policyLockoutDemo), { id: (_b = newSecurityPolicy.id) !== null && _b !== void 0 ? _b : policyLockoutDemo.id, enforceMFAType: newSecurityPolicy.enforceMFAType });\r\n    yield delay();\r\n    yield put(actions.setSecurityPolicyMfaState({ policy, saving: false }));\r\n    callback === null || callback === void 0 ? void 0 : callback(policy);\r\n}\r\nfunction* loadSecurityPolicyLockoutMock() {\r\n    yield put(actions.setSecurityPolicyLockoutState({ loading: true, error: null }));\r\n    yield delay();\r\n    yield put(actions.setSecurityPolicyLockoutState({ policy: policyLockoutDemo, loading: false }));\r\n}\r\nfunction* saveSecurityPolicyLockoutMock(_a) {\r\n    var _b = _a.payload, { callback } = _b, newSecurityPolicy = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setSecurityPolicyLockoutState({ saving: true, error: null }));\r\n    yield delay();\r\n    const policy = Object.assign(Object.assign(Object.assign({}, newSecurityPolicy), policyLockoutDemo), { id: newSecurityPolicy.id ? newSecurityPolicy.id : policyLockoutDemo.id });\r\n    callback === null || callback === void 0 ? void 0 : callback(policy);\r\n    yield put(actions.setSecurityPolicyLockoutState({ policy, saving: false }));\r\n}\r\nfunction* loadSecurityPolicyCaptchaMock() {\r\n    yield put(actions.setSecurityPolicyLockoutState({ loading: true, error: null }));\r\n    yield delay();\r\n    yield put(actions.setSecurityPolicyLockoutState({ policy: policyLockoutDemo, loading: false }));\r\n}\r\nfunction* loadSecurityPolicyPasswordHistoryMock() {\r\n    yield put(actions.setSecurityPolicyPasswordHistoryState({ loading: true, error: null }));\r\n    yield delay();\r\n    yield put(actions.setSecurityPolicyPasswordHistoryState({ policy: policyPasswordHistoryDemo, loading: false }));\r\n}\r\nfunction* saveSecurityPolicyPasswordHistoryMock(_a) {\r\n    var _b = _a.payload, { callback } = _b, newSecurityPolicy = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setSecurityPolicyPasswordHistoryState({ saving: true, error: null }));\r\n    yield delay();\r\n    const policy = Object.assign(Object.assign(Object.assign({}, newSecurityPolicy), policyPasswordHistoryDemo), { id: newSecurityPolicy.id ? newSecurityPolicy.id : policyPasswordHistoryDemo.id });\r\n    callback === null || callback === void 0 ? void 0 : callback(policy);\r\n    yield put(actions.setSecurityPolicyPasswordHistoryState({ policy, saving: false }));\r\n}\r\nfunction* securityPolicySagasMock() {\r\n    yield takeLeading(actions.loadSecurityPolicy, loadSecurityPolicyMock);\r\n    yield takeEvery(actions.loadPublicSecurityPolicy, loadPublicSecurityPolicyMock);\r\n    yield takeEvery(actions.saveSecurityPolicyMfa, saveSecurityPolicyMfaMock);\r\n    yield takeEvery(actions.loadSecurityPolicyMfa, loadSecurityPolicyMfaMock);\r\n    yield takeEvery(actions.loadSecurityPolicyVendorMfa, loadSecurityPolicyVendorMfaMock);\r\n    yield takeEvery(actions.saveSecurityPolicyLockout, saveSecurityPolicyLockoutMock);\r\n    yield takeEvery(actions.loadSecurityPolicyLockout, loadSecurityPolicyLockoutMock);\r\n    yield takeEvery(actions.loadSecurityPolicyCaptcha, loadSecurityPolicyCaptchaMock);\r\n    yield takeEvery(actions.saveSecurityPolicyPasswordHistory, saveSecurityPolicyPasswordHistoryMock);\r\n    yield takeEvery(actions.loadSecurityPolicyPasswordHistory, loadSecurityPolicyPasswordHistoryMock);\r\n}\n\nconst authStrategyLoginStepMap = {\r\n    [AuthStrategyEnum.Code]: LoginStep.loginWithOtc,\r\n    [AuthStrategyEnum.EmailAndPassword]: LoginStep.loginWithPassword,\r\n    [AuthStrategyEnum.MagicLink]: LoginStep.magicLinkPreLoginSuccess,\r\n    [AuthStrategyEnum.SmsCode]: LoginStep.loginWithSmsOtc,\r\n};\r\nfunction* afterAuthNavigation() {\r\n    var _a;\r\n    const onRedirectTo = ContextHolder.onRedirectTo;\r\n    const { routes, includeQueryParam } = yield select((state) => state.auth);\r\n    const { loginUrl, logoutUrl, socialLoginCallbackUrl, activateUrl } = routes;\r\n    let { authenticatedUrl } = routes;\r\n    const afterAuthRedirect = window.localStorage.getItem(FRONTEGG_AFTER_AUTH_REDIRECT_URL);\r\n    if (afterAuthRedirect && ![loginUrl, logoutUrl, socialLoginCallbackUrl, activateUrl].includes(afterAuthRedirect)) {\r\n        authenticatedUrl = afterAuthRedirect;\r\n    }\r\n    window.localStorage.removeItem(FRONTEGG_AFTER_AUTH_REDIRECT_URL);\r\n    yield delay$1(200);\r\n    put(actions.resetLoginState());\r\n    const url = new URL(window === null || window === void 0 ? void 0 : window.location.href);\r\n    let redirectUrl = authenticatedUrl;\r\n    if (url.searchParams.get('redirectUrl')) {\r\n        redirectUrl = (_a = url.searchParams.get('redirectUrl')) !== null && _a !== void 0 ? _a : authenticatedUrl;\r\n    }\r\n    else if (includeQueryParam) {\r\n        redirectUrl += window.location.search;\r\n    }\r\n    onRedirectTo(redirectUrl, { refresh: redirectUrl.startsWith('http') });\r\n}\r\nfunction* refreshMetadata() {\r\n    var _a;\r\n    let ssoACS;\r\n    try {\r\n        const metadata = yield call(api.metadata.getSamlMetadata);\r\n        ssoACS = (_a = metadata === null || metadata === void 0 ? void 0 : metadata.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n    }\r\n    yield put(actions.setState({ ssoACS }));\r\n}\r\nfunction* loadSSOPublicConfigurationFunction() {\r\n    try {\r\n        const { isActive } = yield call(api.auth.getSSOPublicConfiguration);\r\n        yield put(actions.setState({ isSSOAuth: isActive }));\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n    }\r\n}\r\nconst isMfaRequired = (user) => {\r\n    if (user.mfaRequired && user.mfaToken) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        return true;\r\n    }\r\n    else {\r\n        ContextHolder.setAccessToken(user.accessToken);\r\n        ContextHolder.setUser(user);\r\n        return false;\r\n    }\r\n};\r\nfunction* getMfaRequiredState(user) {\r\n    let setMfaState = {};\r\n    let step = LoginStep.loginWithTwoFactor;\r\n    const { loginState } = yield select((state) => state.auth);\r\n    const { isAllowedToRemember, mfaDeviceExpiration } = yield call(api.auth.checkIfAllowToRememberMfaDevice, user.mfaToken);\r\n    if (user.hasOwnProperty('mfaEnrolled') && !user.mfaEnrolled) {\r\n        setMfaState = {\r\n            mfaState: {\r\n                step: MFAStep.verify,\r\n                qrCode: user.qrCode,\r\n                recoveryCode: user.recoveryCode,\r\n                loading: false,\r\n                mfaToken: user.mfaToken,\r\n            },\r\n        };\r\n        step = LoginStep.forceTwoFactor;\r\n    }\r\n    let quickLoginState = {};\r\n    const quickLoginToRegister = localStorage.getItem('register-quick-login');\r\n    if (quickLoginToRegister) {\r\n        quickLoginState = {\r\n            quickLoginToRegister,\r\n            flow: LoginFlow.RegisterQuickLogin\r\n        };\r\n    }\r\n    return Object.assign(Object.assign({ user: undefined, isAuthenticated: false }, setMfaState), { loginState: Object.assign(Object.assign(Object.assign({}, loginState), quickLoginState), { mfaToken: user.mfaToken, mfaRequired: user.mfaRequired, loading: false, error: undefined, step, tenantsLoading: true, email: user.userEmail, tenants: [], allowRememberMfaDevice: isAllowedToRemember, mfaDeviceExpiration }) });\r\n}\r\nfunction* refreshToken() {\r\n    const { hostedLoginBox } = yield select((state) => state.auth);\r\n    if (hostedLoginBox) {\r\n        yield call(refreshTokenHosted);\r\n    }\r\n    else {\r\n        yield call(refreshTokenEmbedded);\r\n    }\r\n}\r\nfunction* refreshTokenHosted() {\r\n    const { user } = yield select((state) => state.auth);\r\n    if (!(user === null || user === void 0 ? void 0 : user.refreshToken)) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        yield put(actions.setState({ isAuthenticated: false }));\r\n        return;\r\n    }\r\n    try {\r\n        const body = {\r\n            grant_type: 'refresh_token',\r\n            refresh_token: user === null || user === void 0 ? void 0 : user.refreshToken\r\n        };\r\n        const authenticatedUser = yield call(api.auth.exchangeOAuthTokens, body);\r\n        yield put(actions.setState({ user: authenticatedUser, isAuthenticated: true }));\r\n        yield put(actions.loadTenants());\r\n    }\r\n    catch (e) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        yield put(actions.setState({ isAuthenticated: false }));\r\n    }\r\n}\r\nfunction* refreshTokenEmbedded() {\r\n    var _a;\r\n    try {\r\n        const onRedirectTo = ContextHolder.onRedirectTo;\r\n        const { routes, loginState } = yield select((state) => state.auth);\r\n        const { user, tenants } = yield call(api.auth.refreshTokenV2);\r\n        if (isMfaRequired(user)) {\r\n            const mfaRequiredState = yield getMfaRequiredState(user);\r\n            yield put(actions.setState(mfaRequiredState));\r\n            onRedirectTo(routes.loginUrl, { preserveQueryParams: true });\r\n        }\r\n        else {\r\n            if (user.email) {\r\n                localStorage.setItem('email', user.email);\r\n                localStorage.setItem('name', user.name);\r\n            }\r\n            const quickLoginToRegister = (_a = localStorage.getItem('register-quick-login')) !== null && _a !== void 0 ? _a : loginState.quickLoginToRegister;\r\n            const shouldNavigateToRegisterQuicKLogin = quickLoginToRegister && localStorage.getItem(`${user.email}-${quickLoginToRegister}`) !== 'true' && !window.location.pathname.endsWith(routes.logoutUrl);\r\n            yield put(actions.setTenantsState({ tenants, loading: false }));\r\n            yield put(actions.setState({\r\n                user,\r\n                isAuthenticated: true,\r\n                loginState: Object.assign(Object.assign({}, loginState), { quickLoginToRegister, flow: shouldNavigateToRegisterQuicKLogin ? LoginFlow.RegisterQuickLogin : LoginFlow.Login })\r\n            }));\r\n            if (shouldNavigateToRegisterQuicKLogin) {\r\n                onRedirectTo(routes.loginUrl);\r\n            }\r\n            else if ([routes.loginUrl, routes.socialLoginCallbackUrl, routes.signUpUrl, routes.oidcRedirectUrl, routes.samlCallbackUrl]\r\n                .some(url => url && window.location.pathname.endsWith(url))) {\r\n                if (loginState.isNewUser && routes.signUpSuccessUrl && routes.socialLoginCallbackUrl === window.location.pathname) {\r\n                    onRedirectTo(routes.signUpSuccessUrl, { refresh: routes.signUpSuccessUrl.startsWith('http') });\r\n                }\r\n                else {\r\n                    yield afterAuthNavigation();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        yield put(actions.setState({ user: undefined, isAuthenticated: false }));\r\n    }\r\n}\r\nfunction* requestAuthorize({ payload: firstTime }) {\r\n    const calls = [];\r\n    if (firstTime) {\r\n        yield put(actions.setState({ isLoading: true }));\r\n        yield put(actions.loadSocialLoginsConfigurationV2());\r\n        calls.push(call(loadAllowSignUps));\r\n        calls.push(call(loadPublicAuthStrategiesPolicy));\r\n        calls.push(call(loadSSOPublicConfigurationFunction));\r\n        calls.push(call(loadVendorPublicInfo));\r\n        calls.push(call(refreshMetadata));\r\n    }\r\n    calls.push(call(refreshToken));\r\n    yield all(calls);\r\n    yield put(actions.setState({ isLoading: false }));\r\n}\r\nfunction* refreshTokenSSR(accessToken) {\r\n    if (!accessToken) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        yield put(actions.setState({ user: undefined, isAuthenticated: false }));\r\n        return;\r\n    }\r\n    try {\r\n        const onRedirectTo = ContextHolder.onRedirectTo;\r\n        const { routes } = yield select((state) => state.auth);\r\n        const { user, tenants } = yield call(api.auth.generateLoginResponseV2, { accessToken });\r\n        if (isMfaRequired(user)) {\r\n            const mfaRequiredState = yield getMfaRequiredState(user);\r\n            yield put(actions.setState(mfaRequiredState));\r\n            onRedirectTo(routes.loginUrl, { preserveQueryParams: true });\r\n        }\r\n        else {\r\n            yield put(actions.setTenantsState({ tenants, loading: false }));\r\n            yield put(actions.setState({ user, isAuthenticated: true }));\r\n        }\r\n    }\r\n    catch (e) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        yield put(actions.setState({ user: undefined, isAuthenticated: false }));\r\n    }\r\n}\r\nfunction* requestAuthorizeSSR({ payload: accessToken }) {\r\n    const calls = [];\r\n    yield put(actions.setState({ isLoading: true }));\r\n    yield put(actions.loadSocialLoginsConfigurationV2());\r\n    calls.push(call(loadAllowSignUps));\r\n    calls.push(call(loadSSOPublicConfigurationFunction));\r\n    calls.push(call(loadVendorPublicInfo));\r\n    calls.push(call(refreshMetadata));\r\n    calls.push(call(refreshTokenSSR, accessToken));\r\n    yield all(calls);\r\n    yield put(actions.setState({ isLoading: false }));\r\n}\r\nfunction* requestHostedLoginAuthorize() {\r\n    const { routes, context, onRedirectTo } = yield select((state) => ({\r\n        routes: state.auth.routes,\r\n        onRedirectTo: state.auth.onRedirectTo,\r\n        context: state.root.context,\r\n    }));\r\n    // Generate the relevant params for the redirect\r\n    const nonce = createRandomString();\r\n    const code_verifier = createRandomString();\r\n    const code_challenge = yield call(generateCodeChallenge, code_verifier);\r\n    // We are saving the verifier in session storage to be able to validate the response\r\n    localStorage.setItem(HOSTED_LOGIN_VERIFIER_KEY, code_verifier);\r\n    const redirectUrl = `${window.location.origin}${routes.hostedLoginRedirectUrl}`;\r\n    const baseUrl = fetch.getBaseUrl(context, '/oauth/authorize');\r\n    // Hard coded for now\r\n    const oauthUrl = `${baseUrl}/oauth/authorize`;\r\n    const params = {\r\n        response_type: 'code',\r\n        client_id: context.clientId || 'INVALID-CLIENT-ID',\r\n        scope: 'openid email profile',\r\n        redirect_uri: redirectUrl,\r\n        code_challenge: code_challenge,\r\n        code_challenge_method: 'S256',\r\n        nonce,\r\n    };\r\n    const searchParams = new URLSearchParams(params);\r\n    const url = `${oauthUrl}?${searchParams.toString()}`;\r\n    onRedirectTo(url, { refresh: true });\r\n}\r\nfunction* handleHostedLoginCallback({ payload }) {\r\n    // Hard coded for now\r\n    const code_verifier = localStorage.getItem(HOSTED_LOGIN_VERIFIER_KEY) || 'INVALID-CODE-VERIFIER';\r\n    const routes = yield select((state) => state.auth.routes);\r\n    const redirectUrl = `${window.location.origin}${routes.hostedLoginRedirectUrl}`;\r\n    const body = {\r\n        code: payload.code,\r\n        redirect_uri: redirectUrl,\r\n        code_verifier,\r\n        grant_type: 'authorization_code',\r\n    };\r\n    const user = yield call(api.auth.exchangeOAuthTokens, body);\r\n    // TODO: Validate nonce and aud\r\n    yield put(actions.setState({ user, isAuthenticated: true }));\r\n    yield put(actions.loadTenants());\r\n    yield afterAuthNavigation();\r\n}\r\nfunction* changePhoneNumberWithVerification(_a) {\r\n    var _b = _a.payload, { callback } = _b, payload = __rest(_b, [\"callback\"]);\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const changePhoneRes = yield call(api.auth.changePhoneNumberWithVerification, payload);\r\n        yield put(actions.setLoginState({ phoneNumber: payload.phoneNumber, loading: false, changePhoneId: changePhoneRes.changePhoneId, step: LoginStep.loginWithQuickSmsOtc, error: undefined }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* verifyChangePhoneNumber(_a) {\r\n    var _b = _a.payload, { callback } = _b, payload = __rest(_b, [\"callback\"]);\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        yield call(api.auth.verifyChangePhoneNumber, payload);\r\n        yield put(actions.setLoginState({ loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* quickSmsPasswordlessPreLogin(_a) {\r\n    var _b = _a.payload, { callback } = _b, payload = __rest(_b, [\"callback\"]);\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const preloginRes = yield call(api.auth.passwordlessPreLogin, Object.assign(Object.assign({}, payload), { type: AuthStrategyEnum.SmsCode }));\r\n        yield put(actions.setLoginState({\r\n            step: LoginStep.loginWithQuickSmsOtc,\r\n            loading: false,\r\n            email: payload.email,\r\n            phoneNumber: preloginRes === null || preloginRes === void 0 ? void 0 : preloginRes.phoneNumber,\r\n            error: undefined,\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message, loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(e);\r\n    }\r\n}\r\nfunction* passwordlessPreLogin(_a) {\r\n    var _b = _a.payload, { callback } = _b, payload = __rest(_b, [\"callback\"]);\r\n    try {\r\n        const { onRedirectTo, routes } = yield select(({ auth: { onRedirectTo, routes } }) => ({ onRedirectTo, routes }));\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const preloginRes = yield call(api.auth.passwordlessPreLogin, payload);\r\n        const step = authStrategyLoginStepMap[payload.type];\r\n        if (step === LoginStep.loginWithSmsOtc && preloginRes.resetPhoneNumberToken) {\r\n            yield put(actions.setResetPhoneNumberState({\r\n                resetPhoneNumberToken: preloginRes.resetPhoneNumberToken,\r\n                step: ResetPhoneNumberStep.VerifyResetPhoneNumber,\r\n            }));\r\n            onRedirectTo(routes.resetPhoneNumberUrl);\r\n            return;\r\n        }\r\n        yield put(actions.setLoginState({\r\n            step,\r\n            loading: false,\r\n            email: payload.email,\r\n            phoneNumber: preloginRes === null || preloginRes === void 0 ? void 0 : preloginRes.phoneNumber,\r\n            error: undefined\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback();\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message, loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback();\r\n    }\r\n}\r\nfunction* passwordlessPostLogin(_a) {\r\n    var _b, _c;\r\n    var _d = _a.payload, { callback, events } = _d, payload = __rest(_d, [\"callback\", \"events\"]);\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const data = yield call(api.auth.passwordlessPostLogin, payload);\r\n        const onRedirectTo = ContextHolder.onRedirectTo;\r\n        const { routes } = yield select((state) => state.auth);\r\n        if (isMfaRequired(data)) {\r\n            const mfaRequiredState = yield getMfaRequiredState(data);\r\n            yield put(actions.setState(mfaRequiredState));\r\n            onRedirectTo(routes.loginUrl, { preserveQueryParams: true });\r\n        }\r\n        else {\r\n            const { loginState } = yield select((state) => state.auth);\r\n            const user = yield call(api.auth.generateLoginResponse, data);\r\n            if (data.emailVerified) {\r\n                (_b = events === null || events === void 0 ? void 0 : events.userVerified) === null || _b === void 0 ? void 0 : _b.call(events, {\r\n                    email: user.email,\r\n                    origin: UserVeirifedOriginTypes.PASSWORDLESS,\r\n                    id: user.id,\r\n                    tenantId: user.tenantId,\r\n                    createdAt: new Date(),\r\n                    name: user.name,\r\n                });\r\n            }\r\n            if (user.email) {\r\n                localStorage.setItem('email', user.email);\r\n                localStorage.setItem('name', user.name);\r\n            }\r\n            yield put(actions.setState({ user, isAuthenticated: true }));\r\n            yield put(actions.setLoginState({ error: undefined }));\r\n            yield put(actions.loadTenants());\r\n            if (loginState.flow === LoginFlow.Login) {\r\n                yield afterAuthNavigation();\r\n            }\r\n            else {\r\n                onRedirectTo(routes.loginUrl, { preserveQueryParams: true });\r\n            }\r\n            localStorage.removeItem('register-quick-login');\r\n            callback === null || callback === void 0 ? void 0 : callback(true);\r\n        }\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: (_c = e.message) !== null && _c !== void 0 ? _c : 'Failed to authenticate' }));\r\n    }\r\n    finally {\r\n        yield put(actions.setLoginState({ loading: false }));\r\n    }\r\n}\r\nfunction* verifyInviteToken({ payload }) {\r\n    var _a;\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const { name: inviteTokenTenantName } = yield call(api.auth.verifyInviteToken, payload);\r\n        yield put(actions.setLoginState({ inviteTokenTenantName }));\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n        yield put(actions.setLoginState({ inviteTokenError: (_a = e.message) !== null && _a !== void 0 ? _a : `We couldn't verify your invitation` }));\r\n    }\r\n    finally {\r\n        yield put(actions.setLoginState({ loading: false }));\r\n    }\r\n}\r\nfunction* preLogin({ payload: { email, recaptchaToken, invitationToken, callback, }, }) {\r\n    yield put(actions.setLoginState({ loading: true }));\r\n    try {\r\n        const onRedirectTo = yield select(({ auth: { onRedirectTo } }) => onRedirectTo);\r\n        let { address, idpType } = yield call(api.auth.preLoginV2, { email });\r\n        if (address) {\r\n            if (idpType === SamlVendors.Oidc && !address.includes('redirect_uri')) {\r\n                const { routes: { oidcRedirectUrl } } = yield select(({ auth: { routes } }) => ({ routes }));\r\n                address += `&redirect_uri=${window.location.origin}${oidcRedirectUrl}`;\r\n            }\r\n            yield put(actions.setLoginState({ step: LoginStep.redirectToSSO, loading: false, ssoRedirectUrl: address }));\r\n            setTimeout(() => {\r\n                onRedirectTo(address, { refresh: true });\r\n            }, 2000);\r\n        }\r\n        else {\r\n            yield ssoPreloginFailed({ email, recaptchaToken, callback, invitationToken });\r\n        }\r\n    }\r\n    catch (e) {\r\n        yield ssoPreloginFailed({ email, recaptchaToken, callback, invitationToken });\r\n    }\r\n}\r\nfunction* ssoPreloginFailed(_a) {\r\n    var { callback } = _a, body = __rest(_a, [\"callback\"]);\r\n    const publicPolicy = yield select(({ auth: { securityPolicyState: { publicPolicy: { policy: publicPolicy } } } }) => publicPolicy);\r\n    if (!(publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy)) {\r\n        yield put(actions.setLoginState({ step: LoginStep.loginWithPassword, loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback();\r\n        return;\r\n    }\r\n    if ((publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy) === AuthStrategyEnum.EmailAndPassword) {\r\n        yield put(actions.setLoginState({ step: LoginStep.loginWithPassword, loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback();\r\n    }\r\n    else if ([AuthStrategyEnum.MagicLink, AuthStrategyEnum.Code, AuthStrategyEnum.SmsCode].includes(publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy)) {\r\n        yield put(actions.passwordlessPreLogin(Object.assign(Object.assign({}, body), { type: publicPolicy === null || publicPolicy === void 0 ? void 0 : publicPolicy.authStrategy, callback })));\r\n    }\r\n    else {\r\n        yield put(actions.setLoginState({ step: LoginStep.loginWithPassword, loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback();\r\n    }\r\n}\r\nfunction* webAuthnCreateNewDeviceSession({ payload: { callback } }) {\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const { options } = yield call(api.auth.webAuthnCreateNewDeviceSession);\r\n        options.user.id = base64urlDecode(options.user.id);\r\n        options.challenge = base64urlDecode(options.challenge);\r\n        options.excludeCredentials = [];\r\n        callback === null || callback === void 0 ? void 0 : callback(options);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null);\r\n    }\r\n    finally {\r\n        yield put(actions.setLoginState({ loading: false }));\r\n    }\r\n}\r\nfunction* webAuthnVerifyNewDeviceSession(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const publicKey = publicKeyCredentialToJSON(body.publicKey);\r\n        yield call(api.auth.verifyNewDeviceSession, {\r\n            id: publicKey.id,\r\n            response: publicKey.response\r\n        });\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null);\r\n    }\r\n    finally {\r\n        yield put(actions.setLoginState({ loading: false }));\r\n    }\r\n}\r\nfunction* webAuthnPrelogin(_a) {\r\n    var _b;\r\n    var _c = _a.payload, { callback } = _c, body = __rest(_c, [\"callback\"]);\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const { options } = yield call(api.auth.webAuthnPreLogin, body);\r\n        options.challenge = base64urlDecode(options.challenge);\r\n        options.allowCredentials = (_b = options.allowCredentials) === null || _b === void 0 ? void 0 : _b.map((credentials) => (Object.assign(Object.assign({}, credentials), { id: base64urlDecode(credentials.id) })));\r\n        yield put(actions.setLoginState({ error: undefined }));\r\n        callback === null || callback === void 0 ? void 0 : callback(options);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null);\r\n    }\r\n    finally {\r\n        yield put(actions.setLoginState({ loading: false }));\r\n    }\r\n}\r\nfunction* webAuthnPostLogin(_a) {\r\n    var _b;\r\n    var _c = _a.payload, { callback } = _c, body = __rest(_c, [\"callback\"]);\r\n    try {\r\n        yield put(actions.setLoginState({ loading: true }));\r\n        const publicKey = publicKeyCredentialToJSON(body.publicKey);\r\n        const data = yield call(api.auth.webAuthnPostLogin, Object.assign(Object.assign({}, publicKey), { response: Object.assign(Object.assign({}, publicKey.response), { userHandle: (_b = publicKey.response.userHandle) !== null && _b !== void 0 ? _b : undefined }), recaptchaToken: body.recaptchaToken, invitationToken: body.invitationToken }));\r\n        if (isMfaRequired(data)) {\r\n            const onRedirectTo = ContextHolder.onRedirectTo;\r\n            const { routes } = yield select((state) => state.auth);\r\n            const mfaRequiredState = yield getMfaRequiredState(data);\r\n            yield put(actions.setState(mfaRequiredState));\r\n            onRedirectTo(routes.loginUrl, { preserveQueryParams: true });\r\n        }\r\n        else {\r\n            const user = yield call(api.auth.generateLoginResponse, data);\r\n            if (user.email) {\r\n                localStorage.setItem('email', user.email);\r\n                localStorage.setItem('name', user.name);\r\n            }\r\n            yield put(actions.loadTenants());\r\n            yield put(actions.setState({ user, isAuthenticated: true }));\r\n            yield put(actions.setLoginState({ error: undefined }));\r\n            yield afterAuthNavigation();\r\n            callback === null || callback === void 0 ? void 0 : callback(true);\r\n        }\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null);\r\n    }\r\n    finally {\r\n        yield put(actions.setLoginState({ loading: false }));\r\n    }\r\n}\r\nfunction* postLogin({ payload }) {\r\n    const { onRedirectTo, routes } = yield select(({ auth: { onRedirectTo, routes } }) => ({ onRedirectTo, routes }));\r\n    yield put(actions.setLoginState({ loading: true }));\r\n    try {\r\n        const user = yield call(api.auth.postLogin, payload);\r\n        ContextHolder.setAccessToken(user.accessToken);\r\n        ContextHolder.setUser(user);\r\n        yield put(actions.setState({\r\n            user: !!user.accessToken ? user : undefined,\r\n            isAuthenticated: !!user.accessToken,\r\n        }));\r\n        yield afterAuthNavigation();\r\n    }\r\n    catch (e) {\r\n        setTimeout(() => {\r\n            onRedirectTo(routes.authenticatedUrl);\r\n        }, 1000);\r\n        yield put(actions.setLoginState({ step: LoginStep.loginWithSSOFailed, loading: false }));\r\n    }\r\n}\r\nfunction* login({ payload: { email, password, recaptchaToken, invitationToken, callback, }, }) {\r\n    yield put(actions.setLoginState({ loading: true }));\r\n    try {\r\n        const user = yield call(api.auth.login, {\r\n            email,\r\n            password,\r\n            recaptchaToken,\r\n            invitationToken,\r\n        });\r\n        ContextHolder.setAccessToken(user.accessToken);\r\n        ContextHolder.setUser(user);\r\n        let setMfaState = {};\r\n        let step = LoginStep.success;\r\n        if (user.mfaRequired && user.mfaToken) {\r\n            step = LoginStep.loginWithTwoFactor;\r\n            if (user.hasOwnProperty('mfaEnrolled') && !user.mfaEnrolled) {\r\n                setMfaState = {\r\n                    mfaState: {\r\n                        step: MFAStep.verify,\r\n                        qrCode: user.qrCode,\r\n                        recoveryCode: user.recoveryCode,\r\n                        mfaToken: user.mfaToken,\r\n                        loading: false,\r\n                    },\r\n                };\r\n                step = LoginStep.forceTwoFactor;\r\n            }\r\n        }\r\n        const { loginState } = yield select((state) => state.auth);\r\n        const isLoginSucceeded = step === LoginStep.success;\r\n        const isAuthenticated = isLoginSucceeded && !!user.accessToken;\r\n        const loggedInUser = isLoginSucceeded ? user : undefined;\r\n        let allowRememberDevice = { isAllowedToRemember: false, mfaDeviceExpiration: 0 };\r\n        if (user.mfaRequired && user.mfaToken) {\r\n            allowRememberDevice = yield call(api.auth.checkIfAllowToRememberMfaDevice, user.mfaToken);\r\n        }\r\n        const { isAllowedToRemember, mfaDeviceExpiration } = allowRememberDevice;\r\n        if (user.email) {\r\n            localStorage.setItem('email', user.email);\r\n            localStorage.setItem('name', user.name);\r\n        }\r\n        yield put(actions.setState(Object.assign(Object.assign({ user: loggedInUser, isAuthenticated }, setMfaState), { loginState: {\r\n                flow: loginState.flow,\r\n                quickLoginToRegister: loginState.quickLoginToRegister,\r\n                email,\r\n                loading: false,\r\n                error: undefined,\r\n                mfaToken: user.mfaToken,\r\n                step: (!isLoginSucceeded || loginState.flow === LoginFlow.Login) ? step : loginState.step,\r\n                tenants: [],\r\n                tenantsLoading: true,\r\n                allowRememberMfaDevice: isAllowedToRemember,\r\n                mfaDeviceExpiration,\r\n            } })));\r\n        if (isLoginSucceeded) {\r\n            yield put(actions.loadTenants());\r\n        }\r\n        if (isAuthenticated && loginState.flow === LoginFlow.Login) {\r\n            yield afterAuthNavigation();\r\n        }\r\n        localStorage.removeItem('register-quick-login');\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        ContextHolder.setAccessToken(null);\r\n        ContextHolder.setUser(null);\r\n        yield put(actions.setLoginState({\r\n            email,\r\n            error: e.message,\r\n            loading: false,\r\n        }));\r\n    }\r\n}\r\nfunction* loginWithMfa({ payload: { mfaToken, value, rememberDevice, callback }, }) {\r\n    yield put(actions.setLoginState({ loading: true }));\r\n    try {\r\n        const user = yield call(api.auth.loginWithMfa, { mfaToken, value, rememberDevice });\r\n        const { loginState } = yield select((state) => state.auth);\r\n        const step = loginState.flow === LoginFlow.Login ? LoginStep.success : loginState.step;\r\n        yield put(actions.setState({\r\n            loginState: { flow: loginState.flow, quickLoginToRegister: loginState.quickLoginToRegister, loading: false, step, error: undefined, tenantsLoading: true, tenants: [] },\r\n            user,\r\n            isAuthenticated: true,\r\n        }));\r\n        if (user.email) {\r\n            localStorage.setItem('email', user.email);\r\n            localStorage.setItem('name', user.name);\r\n        }\r\n        yield put(actions.loadTenants());\r\n        yield put(actions.setLoginState({ error: undefined, loading: false }));\r\n        if (loginState.flow === LoginFlow.Login) {\r\n            yield afterAuthNavigation();\r\n        }\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message, loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(false, e);\r\n    }\r\n}\r\nfunction* recoverMfa({ payload }) {\r\n    yield put(actions.setLoginState({ loading: true }));\r\n    try {\r\n        yield call(api.auth.recoverMfaToken, payload);\r\n        yield put(actions.setLoginState({ loading: false, error: undefined, step: LoginStep.preLogin }));\r\n        yield put(actions.setState({ user: undefined, isAuthenticated: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setLoginState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* logout({ payload }) {\r\n    yield put(actions.setState({ isLoading: true }));\r\n    try {\r\n        yield call(api.auth.logout);\r\n    }\r\n    catch (_a) {\r\n    }\r\n    yield put(actions.resetState());\r\n    yield put(actions.requestAuthorize(true));\r\n    payload === null || payload === void 0 ? void 0 : payload();\r\n}\r\nfunction* silentLogout({ payload }) {\r\n    try {\r\n        yield call(api.auth.logout);\r\n    }\r\n    catch (_a) {\r\n    }\r\n    setTimeout(() => payload === null || payload === void 0 ? void 0 : payload(), 500);\r\n}\r\nfunction* loginSagas() {\r\n    yield takeLeading(actions.requestAuthorize, requestAuthorize);\r\n    yield takeLeading(actions.requestAuthorizeSSR, requestAuthorizeSSR);\r\n    yield takeLeading(actions.requestHostedLoginAuthorize, requestHostedLoginAuthorize);\r\n    yield takeLeading(actions.handleHostedLoginCallback, handleHostedLoginCallback);\r\n    yield takeLeading(actions.preLogin, preLogin);\r\n    yield takeLeading(actions.postLogin, postLogin);\r\n    yield takeLeading(actions.login, login);\r\n    yield takeLeading(actions.logout, logout);\r\n    yield takeLeading(actions.silentLogout, silentLogout);\r\n    yield takeLeading(actions.loginWithMfa, loginWithMfa);\r\n    yield takeLeading(actions.recoverMfa, recoverMfa);\r\n    yield takeLeading(actions.quickSmsPasswordlessPreLogin, quickSmsPasswordlessPreLogin);\r\n    yield takeLeading(actions.changePhoneNumberWithVerification, changePhoneNumberWithVerification);\r\n    yield takeLeading(actions.verifyChangePhoneNumber, verifyChangePhoneNumber);\r\n    yield takeLeading(actions.passwordlessPreLogin, passwordlessPreLogin);\r\n    yield takeLeading(actions.passwordlessPostLogin, passwordlessPostLogin);\r\n    yield takeLeading(actions.verifyInviteToken, verifyInviteToken);\r\n    yield takeLeading(actions.webAuthnPrelogin, webAuthnPrelogin);\r\n    yield takeLeading(actions.webAuthnPostLogin, webAuthnPostLogin);\r\n    yield takeLeading(actions.webAuthnCreateNewDeviceSession, webAuthnCreateNewDeviceSession);\r\n    yield takeLeading(actions.webAuthnVerifyNewDeviceSession, webAuthnVerifyNewDeviceSession);\r\n    yield takeLeading(actions.afterAuthNavigation, afterAuthNavigation);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* requestAuthorizeMock({ payload: firstTime }) {\r\n    if (firstTime) {\r\n        yield put(actions.setState({ isLoading: true }));\r\n    }\r\n    const user = userDemo;\r\n    yield put(actions.loadTenants());\r\n    yield put(actions.setState({ user, isAuthenticated: true, isLoading: false }));\r\n}\r\nfunction* loginSagasMock() {\r\n    yield takeLeading(actions.requestAuthorize, requestAuthorizeMock);\r\n    yield takeLeading(actions.afterAuthNavigation, afterAuthNavigation);\r\n}\n\nfunction* loadSSOConfigurations() {\r\n    var _a, _b;\r\n    try {\r\n        yield put(actions.setSSOState({ loading: true }));\r\n        const samlConfiguration = yield call(api.auth.getSamlConfiguration);\r\n        const oidcConfiguration = yield call(api.auth.getOidcConfiguration);\r\n        const samlMetadata = yield call(api.metadata.getSamlMetadata);\r\n        samlConfiguration.acsUrl = (_a = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\r\n        samlConfiguration.spEntityId = (_b = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _b === void 0 ? void 0 : _b.spEntityId;\r\n        samlConfiguration.isSamlActive = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.isActive;\r\n        yield put(actions.setSSOState({ samlConfiguration, oidcConfiguration, loading: false, firstLoad: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* saveSSOConfigurationsFile({ payload: configFile }) {\r\n    const oldSamlConfiguration = yield select((state) => state.auth.ssoState.samlConfiguration);\r\n    const loaderKey = 'saving';\r\n    yield put(actions.setSSOState({ error: undefined, [loaderKey]: true }));\r\n    try {\r\n        const metadata = yield readFileAsText(configFile[0]);\r\n        const newSamlConfiguration = yield call(api.auth.updateSamlVendorMetadata, { metadata });\r\n        newSamlConfiguration.isSamlActive = oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.isSamlActive;\r\n        yield put(actions.setSSOState({ samlConfiguration: newSamlConfiguration, error: undefined, [loaderKey]: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({ samlConfiguration: oldSamlConfiguration, error: e.message, [loaderKey]: false }));\r\n    }\r\n}\r\nfunction* saveSSOConfigurationsFileWithCallback({ payload }) {\r\n    const { configFile, callback } = payload;\r\n    const oldSamlConfiguration = yield select((state) => state.auth.ssoState.samlConfiguration);\r\n    const loaderKey = 'saving';\r\n    yield put(actions.setSSOState({ error: undefined, [loaderKey]: true }));\r\n    try {\r\n        const metadata = yield readFileAsText(configFile);\r\n        const newSamlConfiguration = yield call(api.auth.updateSamlVendorMetadata, { metadata });\r\n        newSamlConfiguration.isSamlActive = oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.isSamlActive;\r\n        yield put(actions.setSSOState({ samlConfiguration: newSamlConfiguration, error: undefined, [loaderKey]: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({ samlConfiguration: oldSamlConfiguration, error: e.message, [loaderKey]: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* saveSSOConfigurations({ payload }) {\r\n    var _a, _b;\r\n    const { callback, samlVendor } = payload, newSamlConfiguration = __rest(payload, [\"callback\", \"samlVendor\"]);\r\n    const oldSamlConfiguration = yield select((state) => state.auth.ssoState.samlConfiguration);\r\n    const samlConfiguration = Object.assign(Object.assign({}, oldSamlConfiguration), newSamlConfiguration);\r\n    let loaderKey = 'saving';\r\n    if ((samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.enabled) !== oldSamlConfiguration.enabled) {\r\n        loaderKey = 'loading';\r\n    }\r\n    try {\r\n        const firstTimeConfigure = !(samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.domain);\r\n        if (firstTimeConfigure) {\r\n            yield put(actions.setSSOState({ samlConfiguration: Object.assign(Object.assign({}, oldSamlConfiguration), samlConfiguration) }));\r\n            return;\r\n        }\r\n        else {\r\n            yield put(actions.setSSOState({ error: undefined, [loaderKey]: true }));\r\n        }\r\n        if (payload.type === SamlVendors.Saml) {\r\n            const samlMetadata = yield call(api.metadata.getSamlMetadata);\r\n            samlConfiguration.acsUrl = (_a = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\r\n            samlConfiguration.spEntityId = (_b = samlMetadata === null || samlMetadata === void 0 ? void 0 : samlMetadata.configuration) === null || _b === void 0 ? void 0 : _b.spEntityId;\r\n        }\r\n        const updateSamlConfiguration = omitProps(samlConfiguration, [\r\n            'validated',\r\n            'generatedVerification',\r\n            'createdAt',\r\n            'updatedAt',\r\n        ]);\r\n        if ((oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.domain) !== (updateSamlConfiguration === null || updateSamlConfiguration === void 0 ? void 0 : updateSamlConfiguration.domain)) {\r\n            updateSamlConfiguration.ssoEndpoint = '';\r\n            updateSamlConfiguration.publicCertificate = '';\r\n            updateSamlConfiguration.signRequest = false;\r\n        }\r\n        updateSamlConfiguration.type = samlVendor === null || samlVendor === void 0 ? void 0 : samlVendor.toLowerCase();\r\n        const newSamlConfiguration = yield call(api.auth.updateSamlConfiguration, updateSamlConfiguration);\r\n        newSamlConfiguration.isSamlActive = oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.isSamlActive;\r\n        yield put(actions.setSSOState({ samlConfiguration: newSamlConfiguration, error: undefined, [loaderKey]: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({ samlConfiguration: oldSamlConfiguration, error: e.message, [loaderKey]: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* validateSSODomain({ payload: { callback } = {} }) {\r\n    const samlConfiguration = yield select((state) => state.auth.ssoState.samlConfiguration);\r\n    try {\r\n        yield put(actions.setSSOState({ error: undefined, saving: true }));\r\n        yield call(api.auth.validateSamlDomain);\r\n        yield put(actions.setSSOState({\r\n            samlConfiguration: Object.assign(Object.assign({}, samlConfiguration), { validated: true }),\r\n            error: undefined,\r\n            saving: false,\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({\r\n            samlConfiguration: Object.assign(Object.assign({}, samlConfiguration), { validated: false }),\r\n            error: e.message,\r\n            saving: false,\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* getAuthorizationRoles() {\r\n    try {\r\n        const data = yield call(api.auth.getSamlRoles);\r\n        const groupsData = yield call(api.auth.getSamlRolesGroups);\r\n        yield put(actions.setSSOState({\r\n            authorizationRoles: data.roleIds,\r\n            rolesGroups: groupsData,\r\n            error: undefined,\r\n        }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({\r\n            error: e.message,\r\n        }));\r\n    }\r\n}\r\nfunction* updateRolesGroups(groups) {\r\n    try {\r\n        yield all(groups.map((group) => call(api.auth.updateSamlGroup, { id: group.id, roleIds: group.roleIds, group: group.group })));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({\r\n            error: e.message,\r\n        }));\r\n    }\r\n}\r\nfunction* updateAuthorizationRoles({ payload: { callback, authorizationRoles, groups }, }) {\r\n    try {\r\n        yield put(actions.setSSOState({ error: undefined, saving: true }));\r\n        yield call(api.auth.updateSamlRoles, { roleIds: authorizationRoles });\r\n        if (groups) {\r\n            yield updateRolesGroups(groups);\r\n        }\r\n        yield getAuthorizationRoles();\r\n        yield put(actions.setSSOState({ error: undefined, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({\r\n            error: e.message,\r\n            saving: false,\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* deleteSamlGroupFunction({ payload: { callback, id } }) {\r\n    try {\r\n        yield put(actions.setSSOState({ error: undefined, saving: true }));\r\n        yield call(api.auth.deleteSamlGroup, { id });\r\n        yield getAuthorizationRoles();\r\n        yield put(actions.setSSOState({ error: undefined, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({\r\n            error: e.message,\r\n            saving: false,\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* createSamlGroupFunction({ payload: { group, roleIds, callback } }) {\r\n    try {\r\n        yield put(actions.setSSOState({ error: undefined, saving: true }));\r\n        yield call(api.auth.createSamlGroup, { group, roleIds });\r\n        yield getAuthorizationRoles();\r\n        yield put(actions.setSSOState({ error: undefined, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({\r\n            error: e.message,\r\n            saving: false,\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* oidcPostloginFunction({ payload }) {\r\n    var _a;\r\n    const data = { code: payload.code, redirectUri: payload.redirectUri, RelayState: payload.state };\r\n    try {\r\n        yield put(actions.setSSOState({ loading: true }));\r\n        yield call(api.auth.oidcPostLoginV2, data);\r\n        yield refreshToken();\r\n        yield put(actions.setSSOState({ loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSSOState({ loading: false, error: (_a = e.message) !== null && _a !== void 0 ? _a : 'Failed to authenticate', firstLoad: false }));\r\n    }\r\n}\r\nfunction* ssoSagas$1() {\r\n    yield takeEvery(actions.loadSSOConfigurations, loadSSOConfigurations);\r\n    yield takeEvery(actions.saveSSOConfigurations, saveSSOConfigurations);\r\n    yield takeEvery(actions.saveSSOConfigurationsFile, saveSSOConfigurationsFile);\r\n    yield takeEvery(actions.saveSSOConfigurationsFileWithCallback, saveSSOConfigurationsFileWithCallback);\r\n    yield takeEvery(actions.validateSSODomain, validateSSODomain);\r\n    yield takeEvery(actions.loadSSOAuthorizationRoles, getAuthorizationRoles);\r\n    yield takeEvery(actions.updateSSOAuthorizationRoles, updateAuthorizationRoles);\r\n    yield takeEvery(actions.deleteSamlGroup, deleteSamlGroupFunction);\r\n    yield takeEvery(actions.createSamlGroup, createSamlGroupFunction);\r\n    yield takeEvery(actions.oidcPostlogin, oidcPostloginFunction);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* loadSSOConfigurationsMock() {\r\n    yield put(actions.setSSOState({ loading: true }));\r\n    yield delay();\r\n    yield put(actions.setSSOState({ samlConfiguration: samlConfigurationDemo, loading: false, firstLoad: false }));\r\n}\r\nfunction* saveSSOConfigurationsFileMock({ payload: configFile }) {\r\n    const loaderKey = 'saving';\r\n    yield put(actions.setSSOState({ error: undefined, [loaderKey]: true }));\r\n    const oldSamlConfiguration = yield select((state) => state.auth.ssoState.samlConfiguration);\r\n    const newSamlConfiguration = Object.assign(Object.assign(Object.assign({}, oldSamlConfiguration), { enabled: true }), configFile[0]);\r\n    yield put(actions.setSSOState({ samlConfiguration: newSamlConfiguration, error: undefined, [loaderKey]: false }));\r\n}\r\nfunction* saveSSOConfigurationsMock({ payload }) {\r\n    var _a, _b;\r\n    const { callback, samlVendor } = payload, newSamlConfiguration = __rest(payload, [\"callback\", \"samlVendor\"]);\r\n    const oldSamlConfiguration = ssoStateDemo.samlConfiguration;\r\n    const samlConfiguration = Object.assign(Object.assign({}, oldSamlConfiguration), newSamlConfiguration);\r\n    let loaderKey = 'saving';\r\n    if ((samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.enabled) !== oldSamlConfiguration.enabled) {\r\n        loaderKey = 'loading';\r\n    }\r\n    const firstTimeConfigure = !(samlConfiguration === null || samlConfiguration === void 0 ? void 0 : samlConfiguration.domain);\r\n    if (firstTimeConfigure) {\r\n        yield put(actions.setSSOState({ samlConfiguration: Object.assign(Object.assign({}, oldSamlConfiguration), samlConfiguration) }));\r\n        return;\r\n    }\r\n    else {\r\n        yield put(actions.setSSOState({ error: undefined, [loaderKey]: true }));\r\n    }\r\n    yield delay();\r\n    samlConfiguration.acsUrl = (_a = samlMetadataDemo === null || samlMetadataDemo === void 0 ? void 0 : samlMetadataDemo.configuration) === null || _a === void 0 ? void 0 : _a.acsUrl;\r\n    samlConfiguration.spEntityId = (_b = samlMetadataDemo === null || samlMetadataDemo === void 0 ? void 0 : samlMetadataDemo.configuration) === null || _b === void 0 ? void 0 : _b.spEntityId;\r\n    const updateSamlConfiguration = omitProps(samlConfiguration, [\r\n        'validated',\r\n        'generatedVerification',\r\n        'createdAt',\r\n        'updatedAt',\r\n    ]);\r\n    if ((oldSamlConfiguration === null || oldSamlConfiguration === void 0 ? void 0 : oldSamlConfiguration.domain) !== (updateSamlConfiguration === null || updateSamlConfiguration === void 0 ? void 0 : updateSamlConfiguration.domain)) {\r\n        updateSamlConfiguration.ssoEndpoint = '';\r\n        updateSamlConfiguration.publicCertificate = '';\r\n        updateSamlConfiguration.signRequest = false;\r\n    }\r\n    updateSamlConfiguration.type = samlVendor === null || samlVendor === void 0 ? void 0 : samlVendor.toLowerCase();\r\n    yield delay();\r\n    yield put(actions.setSSOState({ samlConfiguration: updateSamlConfiguration, error: undefined, [loaderKey]: false }));\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n}\r\nfunction* validateSSODomainMock({ payload: { callback } = {} }) {\r\n    const samlConfiguration = ssoStateDemo.samlConfiguration;\r\n    yield put(actions.setSSOState({ error: undefined, saving: true }));\r\n    yield delay();\r\n    yield put(actions.setSSOState({\r\n        samlConfiguration: Object.assign(Object.assign({}, samlConfiguration), { validated: true }),\r\n        error: undefined,\r\n        saving: false,\r\n    }));\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n}\r\nfunction* getAuthorizationRolesMock() {\r\n    yield delay();\r\n    const data = { roleIds: ['1', '2', '3'] };\r\n    yield put(actions.setSSOState({\r\n        authorizationRoles: data.roleIds,\r\n        error: undefined,\r\n    }));\r\n}\r\nfunction* updateAuthorizationRolesMock({ payload: { callback, authorizationRoles }, }) {\r\n    yield put(actions.setSSOState({ error: undefined, saving: true }));\r\n    yield delay();\r\n    yield put(actions.setSSOState({ authorizationRoles, error: undefined, saving: false }));\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n}\r\nfunction* ssoSagasMock() {\r\n    yield takeEvery(actions.loadSSOConfigurations, loadSSOConfigurationsMock);\r\n    yield takeEvery(actions.saveSSOConfigurations, saveSSOConfigurationsMock);\r\n    yield takeEvery(actions.saveSSOConfigurationsFile, saveSSOConfigurationsFileMock);\r\n    yield takeEvery(actions.validateSSODomain, validateSSODomainMock);\r\n    yield takeEvery(actions.loadSSOAuthorizationRoles, getAuthorizationRolesMock);\r\n    yield takeEvery(actions.updateSSOAuthorizationRoles, updateAuthorizationRolesMock);\r\n}\n\nfunction* loadOidc() {\r\n    try {\r\n        const oidcConfiguration = yield call(api.auth.getOidcConfiguration);\r\n        return oidcConfiguration;\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\nfunction* loadSaml() {\r\n    try {\r\n        const samlMetadata = yield call(api.metadata.getSamlMetadata);\r\n        return samlMetadata;\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\nfunction* loadSSOConfigurationsV2() {\r\n    try {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.LOAD_SSO_CONFIGURATIONS, value: true }));\r\n        const [oidcConfiguration, samlMetadata] = yield all([call(loadOidc), call(loadSaml)]);\r\n        const ssoConfigurations = yield call(api.auth.getSSOConfigurations);\r\n        yield put(actions.setSSOState({\r\n            ssoConfigurations,\r\n            oidcConfiguration,\r\n            samlMetadata\r\n        }));\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.LOAD_SSO_CONFIGURATIONS, value: error.message }));\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.LOAD_SSO_CONFIGURATIONS, value: false }));\r\n    }\r\n}\r\nfunction* saveSSOConfigurationV2({ payload }) {\r\n    var _a;\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_CONFIGURATION, value: true }));\r\n    const { callback } = payload, ssoConfiguration = __rest(payload, [\"callback\"]);\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        const newSsoConfiguration = yield call(api.auth.createSSOConfiguration, Object.assign(Object.assign({}, ssoConfiguration), { enabled: (_a = ssoConfiguration.enabled) !== null && _a !== void 0 ? _a : false }));\r\n        yield put(actions.setSSOState({ ssoConfigurations: [...ssoConfigurations, newSsoConfiguration] }));\r\n        callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.SAVE_SSO_CONFIGURATION, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_CONFIGURATION, value: false }));\r\n    }\r\n}\r\nfunction* saveSSOConfigurationByMetadata({ payload }) {\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_CONFIGURATION_BY_METADATA, value: true }));\r\n    const { configFile, callback } = payload;\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        const metadata = yield readFileAsText(configFile);\r\n        const newSsoConfiguration = yield call(api.auth.createSSOConfigurationByMetadata, { metadata });\r\n        yield put(actions.setSSOState({ ssoConfigurations: [...ssoConfigurations, newSsoConfiguration] }));\r\n        callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.SAVE_SSO_CONFIGURATION_BY_METADATA, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_CONFIGURATION_BY_METADATA, value: false }));\r\n    }\r\n}\r\nfunction* updateSSOConfiguration({ payload }) {\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.UPDATE_SSO_CONFIGURATION, value: true }));\r\n    const { callback, ssoConfigId } = payload, ssoConfiguration = __rest(payload, [\"callback\", \"ssoConfigId\"]);\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        const newSsoConfiguration = yield call(api.auth.updateSSOConfiguration, ssoConfigId, ssoConfiguration);\r\n        const newSsoConfigurations = ssoConfigurations.map((ssoConfig) => ssoConfig.id === ssoConfigId ? newSsoConfiguration : ssoConfig);\r\n        yield put(actions.setSSOState({ ssoConfigurations: newSsoConfigurations }));\r\n        callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.UPDATE_SSO_CONFIGURATION, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.UPDATE_SSO_CONFIGURATION, value: false }));\r\n    }\r\n}\r\nfunction* updateSSOConfigurationByMetadata({ payload }) {\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.UPDATE_SSO_CONFIGURATION_BY_METADATA, value: true }));\r\n    const { callback, ssoConfigId, configFile } = payload;\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        const metadata = yield readFileAsText(configFile);\r\n        const newSsoConfiguration = yield call(api.auth.updateSSOConfigurationByMetadata, ssoConfigId, { metadata });\r\n        const newSsoConfigurations = ssoConfigurations.map((ssoConfig) => ssoConfig.id === ssoConfigId ? newSsoConfiguration : ssoConfig);\r\n        yield put(actions.setSSOState({ ssoConfigurations: newSsoConfigurations }));\r\n        callback === null || callback === void 0 ? void 0 : callback(newSsoConfiguration);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.UPDATE_SSO_CONFIGURATION, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.UPDATE_SSO_CONFIGURATION, value: false }));\r\n    }\r\n}\r\nfunction* deleteSSOConfiguration({ payload }) {\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.DELETE_SSO_CONFIGURATION, value: true }));\r\n    const { ssoConfigId, callback } = payload;\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        yield call(api.auth.deleteSSOConfiguration, ssoConfigId);\r\n        yield put(actions.setSSOState({ ssoConfigurations: ssoConfigurations.filter(({ id }) => id !== ssoConfigId) }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.DELETE_SSO_CONFIGURATION, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.DELETE_SSO_CONFIGURATION, value: false }));\r\n    }\r\n}\r\nfunction* saveSSODomain({ payload }) {\r\n    const { callback, ssoConfigId } = payload, body = __rest(payload, [\"callback\", \"ssoConfigId\"]);\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_DOMAIN, value: true }));\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        const domain = yield call(api.auth.createSSODomain, ssoConfigId, body);\r\n        const newSsoConfigurations = ssoConfigurations.map((ssoConfig) => {\r\n            if (ssoConfig.id === ssoConfigId) {\r\n                return Object.assign(Object.assign({}, ssoConfig), { domains: [...ssoConfig.domains, domain] });\r\n            }\r\n            return ssoConfig;\r\n        });\r\n        yield put(actions.setSSOState({ ssoConfigurations: newSsoConfigurations }));\r\n        callback === null || callback === void 0 ? void 0 : callback(domain);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.SAVE_SSO_DOMAIN, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_DOMAIN, value: false }));\r\n    }\r\n}\r\nfunction* deleteSSODomain({ payload }) {\r\n    const { ssoConfigId, domainId, callback } = payload;\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.DELETE_SSO_DOMAIN, value: true }));\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        yield call(api.auth.deleteSSODomain, ssoConfigId, domainId);\r\n        const newSsoConfigurations = ssoConfigurations.map((ssoConfig) => {\r\n            if (ssoConfig.id === ssoConfigId) {\r\n                return Object.assign(Object.assign({}, ssoConfig), { domains: ssoConfig.domains.filter(({ id }) => id !== domainId) });\r\n            }\r\n            return ssoConfig;\r\n        });\r\n        yield put(actions.setSSOState({ ssoConfigurations: newSsoConfigurations }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.DELETE_SSO_DOMAIN, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.DELETE_SSO_DOMAIN, value: false }));\r\n    }\r\n}\r\nfunction* validateSSODomainV2({ payload }) {\r\n    const { callback, domainId, ssoConfigId } = payload;\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.VALIDATE_SSO_DOMAIN, value: true }));\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        yield call(api.auth.validateSSODomain, ssoConfigId, domainId);\r\n        const newSsoConfigurations = ssoConfigurations.map((ssoConfig) => {\r\n            if (ssoConfig.id === ssoConfigId) {\r\n                return Object.assign(Object.assign({}, ssoConfig), { domains: ssoConfig.domains.map((ssoDomain) => ssoDomain.id === domainId ? Object.assign(Object.assign({}, ssoDomain), { validated: true }) : ssoDomain) });\r\n            }\r\n            return ssoConfig;\r\n        });\r\n        yield put(actions.setSSOState({ ssoConfigurations: newSsoConfigurations }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.VALIDATE_SSO_DOMAIN, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.VALIDATE_SSO_DOMAIN, value: false }));\r\n    }\r\n}\r\nfunction* setSSODefaultRoles({ payload: { callback, ssoConfigId, roleIds }, }) {\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.UPDATE_SSO_DEFAULT_ROLES, value: true }));\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        yield call(api.auth.setSSODefaultRoles, ssoConfigId, { roleIds });\r\n        const newSsoConfigurations = ssoConfigurations.map((ssoConfig) => {\r\n            if (ssoConfig.id === ssoConfigId) {\r\n                return Object.assign(Object.assign({}, ssoConfig), { roleIds });\r\n            }\r\n            return ssoConfig;\r\n        });\r\n        yield put(actions.setSSOState({ ssoConfigurations: newSsoConfigurations }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.UPDATE_SSO_DEFAULT_ROLES, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.UPDATE_SSO_DEFAULT_ROLES, value: false }));\r\n    }\r\n}\r\nfunction* setSSOGroups({ payload: { groupsToAdd, groupsToDelete, ssoConfigId, callback } }) {\r\n    yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_GROUPS, value: true }));\r\n    const ssoConfigurations = yield select((state) => state.auth.ssoState.ssoConfigurations);\r\n    try {\r\n        yield all(groupsToDelete.map((groupId) => call(api.auth.deleteSSOGroup, ssoConfigId, groupId)));\r\n        yield all(groupsToAdd.map((group) => call(api.auth.createSSOGroup, ssoConfigId, group)));\r\n        const groups = yield call(api.auth.getSSOGroups, ssoConfigId);\r\n        const newSsoConfigurations = ssoConfigurations.map((ssoConfig) => {\r\n            if (ssoConfig.id === ssoConfigId) {\r\n                return Object.assign(Object.assign({}, ssoConfig), { groups });\r\n            }\r\n            return ssoConfig;\r\n        });\r\n        yield put(actions.setSSOState({ ssoConfigurations: newSsoConfigurations }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.SAVE_SSO_GROUPS, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_GROUPS, value: false }));\r\n    }\r\n}\r\nfunction* updateSSOGroups({ payload: { ssoConfigId, changedGroups, callback } }) {\r\n    try {\r\n        yield all(changedGroups.map((group) => call(api.auth.updateSSOGroup, ssoConfigId, group)));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (error) {\r\n        yield put(actions.setSSOError({ key: SSOStateKeys.SAVE_SSO_GROUPS, value: error.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, error);\r\n    }\r\n    finally {\r\n        yield put(actions.setSSOLoader({ key: SSOStateKeys.SAVE_SSO_GROUPS, value: false }));\r\n    }\r\n}\r\nfunction* ssoSagas() {\r\n    yield takeEvery(actions.loadSSOConfigurationsV2, loadSSOConfigurationsV2);\r\n    yield takeEvery(actions.saveSSOConfigurationV2, saveSSOConfigurationV2);\r\n    yield takeEvery(actions.saveSSODomain, saveSSODomain);\r\n    yield takeEvery(actions.deleteSSODomain, deleteSSODomain);\r\n    yield takeEvery(actions.validateSSODomainV2, validateSSODomainV2);\r\n    yield takeEvery(actions.updateSSOConfiguration, updateSSOConfiguration);\r\n    yield takeEvery(actions.deleteSSOConfiguration, deleteSSOConfiguration);\r\n    yield takeEvery(actions.setSSOGroups, setSSOGroups);\r\n    yield takeEvery(actions.updateSSOGroups, updateSSOGroups);\r\n    yield takeEvery(actions.setSSODefaultRoles, setSSODefaultRoles);\r\n    yield takeEvery(actions.saveSSOConfigurationByMetadata, saveSSOConfigurationByMetadata);\r\n    yield takeEvery(actions.updateSSOConfigurationByMetadata, updateSSOConfigurationByMetadata);\r\n}\n\nfunction* loadProfile() {\r\n    yield put(actions.setProfileState({ loading: true }));\r\n    try {\r\n        const profile = yield retry(3, 2000, api.teams.getProfile);\r\n        const currentUser = yield select((state) => state.auth.user);\r\n        actions.setUser(Object.assign(Object.assign({}, currentUser), profile));\r\n        yield put(actions.setProfileState({ profile, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setProfileState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction b64toBlob(base64, contentType) {\r\n    const sliceSize = 512;\r\n    const byteCharacters = atob(base64);\r\n    const byteArrays = [];\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n        const byteNumbers = new Array(slice.length);\r\n        for (let i = 0; i < slice.length; i++) {\r\n            byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n        byteArrays.push(new Uint8Array(byteNumbers));\r\n    }\r\n    return new Blob(byteArrays, { type: contentType });\r\n}\r\nfunction base64ToFormData(base64, key = 'file') {\r\n    const matchResult = base64.match(/^data:image\\/([A-Za-z-+\\/]+);base64,(.+)$/);\r\n    if (matchResult == null) {\r\n        return null;\r\n    }\r\n    // Get the content type of the image\r\n    const contentType = `image/${matchResult[1]}`;\r\n    // get the real base64 content of the file\r\n    const data = matchResult[2];\r\n    // Convert it to a blob to upload\r\n    const blob = b64toBlob(data, contentType);\r\n    // Create a FormData and append the file with \"image\" as parameter name\r\n    const formDataToUpload = new FormData();\r\n    formDataToUpload.append(key, new File([blob], key, { type: contentType }));\r\n    return formDataToUpload;\r\n}\r\nfunction* saveProfile(_a) {\r\n    var _b = _a.payload, { callback, profilePictureUrl } = _b, payload = __rest(_b, [\"callback\", \"profilePictureUrl\"]);\r\n    yield put(actions.setProfileState({ saving: true, error: null }));\r\n    try {\r\n        const oldProfileData = yield select((state) => state.auth.profileState.profile);\r\n        let newProfilePictureUrl = oldProfileData.profilePictureUrl;\r\n        if (profilePictureUrl !== oldProfileData.profilePictureUrl && profilePictureUrl) {\r\n            const matchResult = (profilePictureUrl || '').match(/^data:image\\/([A-Za-z-+\\/]+);base64,(.+)$/);\r\n            if (matchResult) {\r\n                const profileImage = base64ToFormData(profilePictureUrl, 'image');\r\n                if (profileImage) {\r\n                    newProfilePictureUrl = yield call(api.teams.updateProfileImage, profileImage);\r\n                    const imageTimeStamp = Date.now().toString();\r\n                    const urlTemplate = new URL(newProfilePictureUrl);\r\n                    urlTemplate.searchParams.set('t', imageTimeStamp);\r\n                    newProfilePictureUrl = urlTemplate.href;\r\n                }\r\n            }\r\n        }\r\n        const newProfileData = Object.assign(Object.assign(Object.assign({}, oldProfileData), payload), { profilePictureUrl: newProfilePictureUrl });\r\n        const profile = yield call(api.teams.updateProfile, newProfileData);\r\n        const currentUser = yield select((state) => state.auth.user);\r\n        yield put(actions.setUser(Object.assign(Object.assign({}, currentUser), profile)));\r\n        yield put(actions.setProfileState({ profile, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(newProfileData);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setProfileState({ saving: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* changePassword({ payload }) {\r\n    var _a, _b;\r\n    yield put(actions.setProfileState({ loading: true }));\r\n    try {\r\n        yield call(api.teams.changePassword, payload);\r\n        yield put(actions.setProfileState({ loading: false, error: undefined }));\r\n        (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setProfileState({ loading: false, error: e.message }));\r\n        (_b = payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\r\n    }\r\n}\r\nfunction* profileSagas() {\r\n    yield takeLeading(actions.loadProfile, loadProfile);\r\n    yield takeEvery(actions.saveProfile, saveProfile);\r\n    yield takeEvery(actions.changePassword, changePassword);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* loadProfileMock() {\r\n    yield put(actions.setProfileState({ loading: true }));\r\n    yield delay();\r\n    yield put(actions.setUser(Object.assign(Object.assign({}, (userDemo)), userProfileDemo)));\r\n    yield put(actions.setProfileState({ loading: false, profile: userProfileDemo }));\r\n}\r\nfunction* saveProfileMock(_a) {\r\n    var _b = _a.payload, { callback, profilePictureUrl } = _b, payload = __rest(_b, [\"callback\", \"profilePictureUrl\"]);\r\n    yield put(actions.setProfileState({ saving: true, error: null }));\r\n    const oldProfileData = profileStateDemo;\r\n    let newProfilePictureUrl = oldProfileData.profile.profilePictureUrl;\r\n    if (profilePictureUrl !== oldProfileData.profile.profilePictureUrl && profilePictureUrl) {\r\n        const matchResult = (profilePictureUrl || '').match(/^data:image\\/([A-Za-z-+\\/]+);base64,(.+)$/);\r\n        if (matchResult) {\r\n            newProfilePictureUrl = profilePictureUrl;\r\n        }\r\n    }\r\n    const newProfileData = Object.assign(Object.assign(Object.assign({}, oldProfileData.profile), payload), { profilePictureUrl: newProfilePictureUrl });\r\n    const currentUser = userDemo;\r\n    yield delay();\r\n    yield put(actions.setUser(Object.assign(Object.assign({}, currentUser), newProfileData)));\r\n    yield put(actions.setProfileState({ loading: false, error: null, saving: false, profile: newProfileData }));\r\n    callback === null || callback === void 0 ? void 0 : callback(newProfileData);\r\n}\r\nfunction* changePasswordMock({ payload }) {\r\n    var _a;\r\n    yield put(actions.setProfileState({ loading: true }));\r\n    yield delay();\r\n    yield put(actions.setProfileState({ loading: false, error: undefined }));\r\n    (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n}\r\nfunction* profileSagasMock() {\r\n    yield takeLeading(actions.loadProfile, loadProfileMock);\r\n    yield takeEvery(actions.saveProfile, saveProfileMock);\r\n    yield takeEvery(actions.changePassword, changePasswordMock);\r\n}\n\nfunction* enrollMfa() {\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    try {\r\n        const { qrCode } = yield call(api.auth.enrollMfa);\r\n        yield put(actions.setMfaState({ loading: false, error: undefined, qrCode }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setMfaState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction* verifyMfa(_a) {\r\n    var _b = _a.payload, { callback } = _b, payload = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    try {\r\n        const user = yield select((state) => state.auth.user);\r\n        const data = yield call(api.auth.verifyMfa, payload);\r\n        const mfaState = {\r\n            step: MFAStep.recoveryCode,\r\n            loading: false,\r\n            error: undefined,\r\n        };\r\n        if (data === null || data === void 0 ? void 0 : data.recoveryCode) {\r\n            mfaState.recoveryCode = data.recoveryCode;\r\n        }\r\n        yield put(actions.setMfaState(mfaState));\r\n        yield put(actions.setUser(Object.assign(Object.assign({}, user), { mfaEnrolled: true })));\r\n        callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setMfaState({ loading: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* verifyMfaAfterForce(_a) {\r\n    var _b = _a.payload, { callback } = _b, payload = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    try {\r\n        const user = yield call(api.auth.loginWithMfa, payload);\r\n        const mfaState = {\r\n            step: MFAStep.recoveryCode,\r\n            loading: false,\r\n            error: undefined,\r\n        };\r\n        if (user === null || user === void 0 ? void 0 : user.recoveryCode) {\r\n            mfaState.recoveryCode = user.recoveryCode;\r\n        }\r\n        yield put(actions.setMfaState(mfaState));\r\n        yield put(actions.setState({ user }));\r\n        yield put(actions.loadTenants());\r\n        callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setMfaState({ loading: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* disableMfa({ payload }) {\r\n    var _a, _b;\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    try {\r\n        const user = yield select((state) => state.auth.user);\r\n        yield api.auth.disableMfa(payload);\r\n        yield put(actions.setMfaState({ loading: false, error: undefined }));\r\n        yield put(actions.setUser(Object.assign(Object.assign({}, user), { mfaEnrolled: false })));\r\n        (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setMfaState({ loading: false, error: e.message }));\r\n        (_b = payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, false, e);\r\n    }\r\n}\r\nfunction* mfaSagas() {\r\n    yield takeEvery(actions.enrollMfa, enrollMfa);\r\n    yield takeEvery(actions.verifyMfa, verifyMfa);\r\n    yield takeEvery(actions.disableMfa, disableMfa);\r\n    yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForce);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* enrollMfaMock() {\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    const qrCode = 'test';\r\n    yield put(actions.setMfaState({ loading: false, error: undefined, qrCode }));\r\n}\r\nfunction* verifyMfaMock({ payload: { callback }, }) {\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    yield delay();\r\n    const data = { token: 'token', recoveryCode: 'recoveryCode' };\r\n    const mfaState = {\r\n        step: MFAStep.recoveryCode,\r\n        loading: false,\r\n        error: undefined,\r\n    };\r\n    if (data === null || data === void 0 ? void 0 : data.recoveryCode) {\r\n        mfaState.recoveryCode = data.recoveryCode;\r\n    }\r\n    yield put(actions.setMfaState(mfaState));\r\n    yield put(actions.setUser(Object.assign(Object.assign({}, userDemo), { mfaEnrolled: true })));\r\n    callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\r\n}\r\nfunction* verifyMfaAfterForceMock(_a) {\r\n    var _b = _a.payload, { callback } = _b, payload = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    yield delay();\r\n    const data = Object.assign(Object.assign({}, payload), { recoveryCode: 'recoveryCode' });\r\n    const mfaState = {\r\n        step: MFAStep.recoveryCode,\r\n        loading: false,\r\n        error: undefined,\r\n    };\r\n    if (data === null || data === void 0 ? void 0 : data.recoveryCode) {\r\n        mfaState.recoveryCode = data.recoveryCode;\r\n    }\r\n    yield put(actions.setMfaState(mfaState));\r\n    yield delay();\r\n    yield put(actions.setUser(Object.assign(Object.assign({}, userDemo), { mfaEnrolled: true })));\r\n    callback === null || callback === void 0 ? void 0 : callback(mfaState.recoveryCode);\r\n}\r\nfunction* disableMfaMock({ payload }) {\r\n    var _a;\r\n    yield put(actions.setMfaState({ loading: true }));\r\n    yield delay();\r\n    yield put(actions.setMfaState({ loading: false, error: undefined }));\r\n    yield put(actions.setUser(Object.assign(Object.assign({}, userDemo), { mfaEnrolled: false })));\r\n    (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n}\r\nfunction* mfaSagasMock() {\r\n    yield takeEvery(actions.enrollMfa, enrollMfaMock);\r\n    yield takeEvery(actions.verifyMfa, verifyMfaMock);\r\n    yield takeEvery(actions.disableMfa, disableMfaMock);\r\n    yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForceMock);\r\n}\n\nfunction* forgotPassword({ payload }) {\r\n    yield put(actions.setForgotPasswordState({ loading: true }));\r\n    try {\r\n        yield call(api.auth.forgotPassword, payload);\r\n        yield put(actions.setForgotPasswordState({ loading: false, error: undefined, step: ForgotPasswordStep.success }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setForgotPasswordState({ loading: false, error: e.message || 'Unknown error occurred' }));\r\n    }\r\n}\r\nfunction* resetPassword(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setForgotPasswordState({ loading: true }));\r\n    try {\r\n        yield call(api.auth.resetPassword, body);\r\n        yield put(actions.setForgotPasswordState({ loading: false, error: undefined, step: ForgotPasswordStep.success }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setForgotPasswordState({ loading: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(false);\r\n    }\r\n}\r\nfunction* loadPasswordConfig({ payload }) {\r\n    yield put(actions.setForgotPasswordState({ loading: true }));\r\n    try {\r\n        const passwordConfig = yield call(api.auth.loadPasswordConfig, payload);\r\n        yield put(actions.setForgotPasswordState({ loading: false, passwordConfig }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setForgotPasswordState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction* forgotPasswordSagas() {\r\n    yield takeLeading(actions.forgotPassword, forgotPassword);\r\n    yield takeLeading(actions.resetPassword, resetPassword);\r\n    yield takeLeading(actions.loadPasswordConfig, loadPasswordConfig);\r\n}\n\nfunction* preActivateAccount({ payload: { userId, token } }) {\r\n    yield put(actions.setActivateState({ loading: true, step: ActivateAccountStep.activating }));\r\n    try {\r\n        const { isAuthenticated } = yield select((state) => state.auth);\r\n        if (isAuthenticated) {\r\n            yield put(actions.silentLogout());\r\n        }\r\n        const strategy = yield call(api.auth.getActivateAccountStrategy, { userId, token });\r\n        yield put(actions.setActivateStrategyState({ strategy, loading: false, error: undefined }));\r\n        if (strategy.shouldSetPassword) {\r\n            yield put(actions.setActivateState({ loading: false, step: ActivateAccountStep.activatingForm }));\r\n        }\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setActivateState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction* activateAccount(_a) {\r\n    var _b;\r\n    var _c = _a.payload, { callback, events } = _c, payload = __rest(_c, [\"callback\", \"events\"]);\r\n    yield put(actions.setActivateState({ loading: true }));\r\n    try {\r\n        const onRedirectTo = ContextHolder.onRedirectTo;\r\n        const { routes } = yield select((state) => state.auth);\r\n        const data = yield call(api.auth.activateAccount, payload);\r\n        if (data.redirectLocation) {\r\n            window.location.href = data.redirectLocation;\r\n            return;\r\n        }\r\n        if (isMfaRequired(data)) {\r\n            yield put(actions.setActivateState({ step: ActivateAccountStep.success }));\r\n            const mfaRequiredState = yield getMfaRequiredState(data);\r\n            yield put(actions.setState(mfaRequiredState));\r\n            yield delay$1(1000);\r\n            onRedirectTo(routes.loginUrl, { preserveQueryParams: true });\r\n        }\r\n        else {\r\n            yield put(actions.setActivateState({ step: ActivateAccountStep.success }));\r\n            const { user, tenants } = yield call(api.auth.generateLoginResponseV2, data);\r\n            (_b = events === null || events === void 0 ? void 0 : events.userVerified) === null || _b === void 0 ? void 0 : _b.call(events, { email: user.email, origin: UserVeirifedOriginTypes.ACTIVATION_LINK, id: user.id, tenantId: user.tenantId, name: user.name, createdAt: new Date() });\r\n            yield put(actions.setTenantsState({ tenants, loading: false }));\r\n            yield put(actions.setState({ user, isAuthenticated: true }));\r\n            yield delay$1(1000);\r\n            yield afterAuthNavigation();\r\n            yield put(actions.resetActivateState());\r\n        }\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setActivateState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction* getActivateAccountStrategy({ payload, }) {\r\n    const { callback } = payload, params = __rest(payload, [\"callback\"]);\r\n    yield put(actions.setActivateStrategyState({ loading: true }));\r\n    try {\r\n        const strategy = yield call(api.auth.getActivateAccountStrategy, params);\r\n        yield put(actions.setActivateStrategyState({ strategy, loading: false, error: undefined }));\r\n        callback === null || callback === void 0 ? void 0 : callback(strategy);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setActivateStrategyState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction* resendActivationEmailFunction({ payload }) {\r\n    yield put(actions.setActivateState({ loading: true }));\r\n    try {\r\n        yield call(api.auth.resendActivationEmail, { email: payload.email });\r\n        yield put(actions.setActivateState({ loading: false, error: undefined, resentEmail: true }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setActivateState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction* activateSagas() {\r\n    yield takeLeading(actions.activateAccount, activateAccount);\r\n    yield takeLeading(actions.preActivateAccount, preActivateAccount);\r\n    yield takeLeading(actions.getActivateAccountStrategy, getActivateAccountStrategy);\r\n    yield takeLeading(actions.resendActivationEmail, resendActivationEmailFunction);\r\n}\n\nfunction* acceptInvitation({ payload }) {\r\n    if (!payload.token || !payload.userId) {\r\n        yield put(actions.setAcceptInvitationState({ error: undefined, step: AcceptInvitationStep.invalid }));\r\n        return;\r\n    }\r\n    try {\r\n        yield put(actions.setAcceptInvitationState({ error: undefined, step: AcceptInvitationStep.pending }));\r\n        yield call(api.auth.acceptInvitation, payload);\r\n        yield put(actions.setState({\r\n            isAuthenticated: false,\r\n            user: null,\r\n            acceptInvitationState: { error: undefined, step: AcceptInvitationStep.success },\r\n        }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setAcceptInvitationState({ step: AcceptInvitationStep.failed, error: e.message }));\r\n    }\r\n}\r\nfunction* acceptInvitationSagas() {\r\n    yield takeLeading(actions.acceptInvitation, acceptInvitation);\r\n}\n\nvar TeamStateKeys;\r\n(function (TeamStateKeys) {\r\n    TeamStateKeys[\"USERS\"] = \"USERS\";\r\n    TeamStateKeys[\"STATS\"] = \"STATS\";\r\n    TeamStateKeys[\"UPDATE_USER\"] = \"UPDATE_USER\";\r\n    TeamStateKeys[\"DELETE_USER\"] = \"DELETE_USER\";\r\n    TeamStateKeys[\"RESEND_ACTIVATE_LINK\"] = \"RESEND_ACTIVATE_LINK\";\r\n    TeamStateKeys[\"RESEND_INVITATION_LINK\"] = \"RESEND_INVITATION_LINK\";\r\n    TeamStateKeys[\"ROLES_AND_PERMISSIONS\"] = \"ROLES_AND_PERMISSIONS\";\r\n    TeamStateKeys[\"CREATE_TOKEN_LINK\"] = \"CREATE_TOKEN_LINK\";\r\n    TeamStateKeys[\"GET_TOKEN_LINK\"] = \"GET_TOKEN_LINK\";\r\n    TeamStateKeys[\"UPDATE_TOKEN_LINK\"] = \"UPDATE_TOKEN_LINK\";\r\n    TeamStateKeys[\"DELETE_TOKEN_LINK\"] = \"DELETE_TOKEN_LINK\";\r\n    TeamStateKeys[\"CONFIG_TOKEN_LINK\"] = \"CONFIG_TOKEN_LINK\";\r\n})(TeamStateKeys || (TeamStateKeys = {}));\n\nconst selectTeamState = () => select((_) => _[authStoreName].teamState);\r\nfunction* loadUsers({ payload }) {\r\n    var _a, _b, _c, _d;\r\n    const { silentLoading, callback } = payload;\r\n    const teamState = yield selectTeamState();\r\n    const pageSize = (_a = payload.pageSize) !== null && _a !== void 0 ? _a : teamState.pageSize;\r\n    const pageOffset = (_b = payload.pageOffset) !== null && _b !== void 0 ? _b : teamState.pageOffset;\r\n    const filter = (_c = payload.filter) !== null && _c !== void 0 ? _c : teamState.filter;\r\n    const sort = (_d = payload.sort) !== null && _d !== void 0 ? _d : teamState.sort;\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: !silentLoading }));\r\n    yield put(actions.setTeamState({\r\n        pageSize,\r\n        pageOffset,\r\n        filter,\r\n        sort,\r\n    }));\r\n    try {\r\n        const [{ items: users, totalPages, totalItems }, { items: roles }, { items: permissions }] = yield all([\r\n            call(api.teams.loadUsers, {\r\n                pageSize,\r\n                pageOffset,\r\n                filter,\r\n                sort,\r\n            }),\r\n            call(api.teams.loadAvailableRoles),\r\n            call(api.teams.loadAvailablePermissions),\r\n        ]);\r\n        yield put(actions.setTeamState({ users, totalPages, totalItems, roles, permissions }));\r\n        callback === null || callback === void 0 ? void 0 : callback(users);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.USERS, value: e.message }));\r\n        yield put(actions.setTeamState({ totalPages: 0, users: [] }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: false }));\r\n}\r\nfunction* loadAllSubTenantsUsers({ payload, }) {\r\n    var _a, _b, _c, _d, _e;\r\n    const { silentLoading, callback } = payload;\r\n    const teamState = yield selectTeamState();\r\n    const _limit = (_a = payload._limit) !== null && _a !== void 0 ? _a : teamState.allUsersQueryParams._limit;\r\n    const _offset = (_b = payload._offset) !== null && _b !== void 0 ? _b : teamState.allUsersQueryParams._offset;\r\n    const _filter = (_c = payload._filter) !== null && _c !== void 0 ? _c : teamState.allUsersQueryParams._filter;\r\n    const _sortBy = (_d = payload._sortBy) !== null && _d !== void 0 ? _d : teamState.allUsersQueryParams._sortBy;\r\n    const _order = (_e = payload._order) !== null && _e !== void 0 ? _e : teamState.allUsersQueryParams._order;\r\n    const allUsersQueryParams = {\r\n        _limit: _limit || 20,\r\n        _offset: _offset || 0,\r\n        _filter: _filter || '',\r\n        _sortBy: _sortBy || 'name',\r\n        _order: _order || 'DESC',\r\n    };\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: !silentLoading }));\r\n    yield put(actions.setTeamState({\r\n        allUsersQueryParams,\r\n    }));\r\n    try {\r\n        const [{ items: users, _metadata: { totalPages, totalItems }, }, { items: roles }, { items: permissions },] = yield all([\r\n            call(api.subTenants.loadAllUsers, Object.assign({}, allUsersQueryParams)),\r\n            call(api.teams.loadAvailableRoles),\r\n            call(api.teams.loadAvailablePermissions),\r\n        ]);\r\n        yield put(actions.setTeamState({\r\n            allUsers: users,\r\n            totalPages,\r\n            totalItems,\r\n            roles,\r\n            permissions,\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(users);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.USERS, value: e.message }));\r\n        yield put(actions.setTeamState({ totalPages: 0, users: [] }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: false }));\r\n}\r\nfunction* loadRoles({ payload }) {\r\n    var _a, _b;\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.ROLES_AND_PERMISSIONS, value: true }));\r\n    try {\r\n        const [{ items: roles }, { items: permissions }] = yield all([\r\n            call(api.teams.loadAvailableRoles),\r\n            call(api.teams.loadAvailablePermissions),\r\n        ]);\r\n        yield put(actions.setTeamState({ roles, permissions }));\r\n        (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, { roles, permissions });\r\n    }\r\n    catch (e) {\r\n        (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.ROLES_AND_PERMISSIONS, value: e.message }));\r\n    }\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.ROLES_AND_PERMISSIONS, value: true }));\r\n}\r\nfunction* addUser({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }) }));\r\n    try {\r\n        const res = yield call(api.teams.addUser, body);\r\n        const { roles } = res, userWithoutRoleIds = __rest(res, [\"roles\"]);\r\n        const roleIds = roles.map((role) => role.id);\r\n        const newUser = Object.assign(Object.assign({}, userWithoutRoleIds), { roleIds });\r\n        callback === null || callback === void 0 ? void 0 : callback(newUser);\r\n        yield put(actions.setTeamState({\r\n            users: [newUser, ...teamState.users],\r\n            addUserDialogState: { open: false, loading: false },\r\n        }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamState({\r\n            addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: false, error: e.message }),\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* addUserToSubTenants({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }) }));\r\n    try {\r\n        yield call(api.subTenants.addUserToTenantAndSubTenants, body);\r\n        const { items: users, _metadata: { totalPages, totalItems }, } = yield call(api.subTenants.loadAllUsers, {\r\n            _limit: 20,\r\n            _offset: 0,\r\n            _filter: '',\r\n            _sortBy: 'name',\r\n            _order: 'DESC',\r\n        });\r\n        yield put(actions.setTeamState({\r\n            allUsers: users,\r\n            totalPages,\r\n            totalItems,\r\n            addUserDialogState: { open: false, loading: false },\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamState({\r\n            addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: false, error: e.message }),\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* updateUser({ payload }) {\r\n    var _a;\r\n    const { callback, profileImage } = payload, body = __rest(payload, [\"callback\", \"profileImage\"]);\r\n    const { id: userId } = body;\r\n    const teamState = yield selectTeamState();\r\n    const oldUserData = teamState.users.find((user) => user.id === body.id);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.UPDATE_USER, value: userId || '' }));\r\n    yield put(actions.setTeamState({ addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }) }));\r\n    yield put(actions.setTeamState({\r\n        addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }),\r\n        users: teamState.users.map((user) => {\r\n            if (user.id === body.id) {\r\n                return Object.assign(Object.assign({}, user), body);\r\n            }\r\n            return user;\r\n        }),\r\n    }));\r\n    try {\r\n        if (oldUserData.roleIds.length > 0 && ((_a = body.roleIds) === null || _a === void 0 ? void 0 : _a.length) === 0) {\r\n            body.roleIds = [''];\r\n        }\r\n        const { item: newUser } = yield call(api.teams.updateUser, body);\r\n        callback === null || callback === void 0 ? void 0 : callback(newUser);\r\n        yield put(actions.setTeamState({\r\n            users: teamState.users.map((user) => user.id === newUser.id\r\n                ? Object.assign(Object.assign(Object.assign({}, user), newUser), { createdAt: user.createdAt, customData: user.customData, lastLogin: user.lastLogin }) : user),\r\n        }));\r\n        yield put(actions.setTeamLoader({ key: TeamStateKeys.UPDATE_USER, value: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamState({\r\n            addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: false, error: e.message }),\r\n            users: teamState.users.map((user) => (user.id === body.id ? Object.assign(Object.assign({}, user), oldUserData) : user)),\r\n        }));\r\n        yield put(actions.setTeamLoader({ key: TeamStateKeys.UPDATE_USER, value: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* deleteUser({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), { loading: true }) }));\r\n    try {\r\n        yield call(api.teams.deleteUser, body);\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n        yield put(actions.setTeamState({\r\n            users: teamState.users.filter((user) => user.id !== body.userId),\r\n            deleteUserDialogState: { open: false, loading: false },\r\n        }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamState({\r\n            deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), { loading: false, error: e.message }),\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* setUserRolesForSubTenants({ payload, }) {\r\n    const { callback, userId } = payload, body = __rest(payload, [\"callback\", \"userId\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }) }));\r\n    try {\r\n        yield call(api.subTenants.setUserRolesForSubTenants, userId, body);\r\n        const updatedUser = teamState.allUsers.find((user) => user.id === userId);\r\n        let newTenants = [];\r\n        if (updatedUser) {\r\n            newTenants = updatedUser.tenants.map((tenant) => {\r\n                var _a;\r\n                return (Object.assign(Object.assign({}, tenant), { roles: ((_a = body.subTenantsRoles\r\n                        .find((roleUpdate) => roleUpdate.tenantId === tenant.tenantId)) === null || _a === void 0 ? void 0 : _a.roleIds.map((roleId) => {\r\n                        const role = teamState.roles.find(({ id }) => roleId === id);\r\n                        return role;\r\n                    }).filter((role) => role)) || tenant.roles }));\r\n            });\r\n        }\r\n        yield put(actions.setTeamState({\r\n            allUsers: [\r\n                ...teamState.allUsers.filter((user) => user.id !== userId),\r\n                ...(updatedUser ? [Object.assign(Object.assign({}, updatedUser), { tenants: newTenants })] : []),\r\n            ],\r\n            addUserDialogState: { open: false, loading: false },\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamState({\r\n            addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: false, error: e.message }),\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* deleteUserFromSubTenants({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), { loading: true }) }));\r\n    try {\r\n        yield call(api.subTenants.removeUserFromTenantAndSubTenants, body);\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n        yield put(actions.setTeamState({\r\n            allUsers: teamState.allUsers.filter((user) => user.id !== body.userId && user.tenants.length === body.subTenants.length),\r\n            deleteUserDialogState: { open: false, loading: false },\r\n        }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamState({\r\n            deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), { loading: false, error: e.message }),\r\n        }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* resendActivationLink({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_ACTIVATE_LINK, value: body.userId }));\r\n    try {\r\n        yield call(api.teams.resendActivationLink, body);\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.RESEND_ACTIVATE_LINK, value: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_ACTIVATE_LINK, value: false }));\r\n}\r\nfunction* resendInvitationLink({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: body.email }));\r\n    try {\r\n        yield call(api.teams.resendInvitationLink, body);\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: false }));\r\n}\r\nfunction* resendInvitationLinkToAllSubTenants({ payload, }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: body.email }));\r\n    try {\r\n        yield call(api.teams.resendInvitationLinkToAllTenants, body);\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: false }));\r\n}\r\nfunction* getInvitationLinkConfig() {\r\n    yield put(actions.setTeamError({ key: TeamStateKeys.CONFIG_TOKEN_LINK, value: false }));\r\n    try {\r\n        const invitationLinkConfig = yield call(api.teams.getInviteLinkConfiguration);\r\n        yield put(actions.setTeamState({ inviteTokenState: Object.assign({}, invitationLinkConfig) }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.CONFIG_TOKEN_LINK, value: e.message }));\r\n    }\r\n}\r\nfunction* getInvitationLink() {\r\n    yield put(actions.setTeamError({ key: TeamStateKeys.GET_TOKEN_LINK, value: false }));\r\n    try {\r\n        yield call(getInvitationLinkConfig);\r\n        const data = yield call(api.teams.getInviteUserLink);\r\n        const { inviteTokenState } = yield selectTeamState();\r\n        yield put(actions.setTeamState({ inviteTokenState: Object.assign(Object.assign({}, inviteTokenState), data) }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.GET_TOKEN_LINK, value: e.message }));\r\n    }\r\n}\r\nfunction* createInvitationLink({ payload: { callback }, }) {\r\n    yield put(actions.setTeamError({ key: TeamStateKeys.CREATE_TOKEN_LINK, value: false }));\r\n    const { inviteTokenState } = yield selectTeamState();\r\n    try {\r\n        const data = yield call(api.teams.createInviteUserLink, { expiresInMinutes: 43200 });\r\n        yield put(actions.setTeamState({ inviteTokenState: Object.assign(Object.assign({}, inviteTokenState), data) }));\r\n        callback === null || callback === void 0 ? void 0 : callback(data.token);\r\n    }\r\n    catch (e) {\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.CREATE_TOKEN_LINK, value: e.message }));\r\n    }\r\n}\r\nfunction* updateInvitationLink({ payload: { callback, expiresInMinutes, shouldSendEmail }, }) {\r\n    const { inviteTokenState } = yield selectTeamState();\r\n    yield put(actions.setTeamError({ key: TeamStateKeys.UPDATE_TOKEN_LINK, value: false }));\r\n    try {\r\n        const data = yield call(api.teams.updateInviteUserLink, { expiresInMinutes, shouldSendEmail });\r\n        yield put(actions.setTeamState({ inviteTokenState: Object.assign(Object.assign({}, inviteTokenState), data) }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.UPDATE_TOKEN_LINK, value: e.message }));\r\n    }\r\n}\r\nfunction* deleteInvitationLink({ payload }) {\r\n    const { callback } = payload !== null && payload !== void 0 ? payload : {};\r\n    yield put(actions.setTeamError({ key: TeamStateKeys.DELETE_TOKEN_LINK, value: false }));\r\n    try {\r\n        yield call(api.teams.deleteInviteUserLink);\r\n        yield put(actions.setTeamState({ inviteTokenState: undefined }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTeamError({ key: TeamStateKeys.DELETE_TOKEN_LINK, value: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(false, e.message);\r\n    }\r\n}\r\nfunction* openAddUserDialog({ payload }) {\r\n    yield put(actions.setTeamState({\r\n        addUserDialogState: Object.assign({ open: true, loading: false, error: false }, payload),\r\n    }));\r\n}\r\nfunction* closeAddUserDialog({ payload }) {\r\n    const teamState = yield selectTeamState();\r\n    const { addUserDialogState: { onClose }, } = teamState;\r\n    onClose === null || onClose === void 0 ? void 0 : onClose(payload);\r\n    yield put(actions.setTeamState({\r\n        addUserDialogState: {\r\n            loading: false,\r\n            error: false,\r\n            open: false,\r\n        },\r\n    }));\r\n}\r\nfunction* openDeleteUserDialog({ payload }) {\r\n    yield put(actions.setTeamState({\r\n        deleteUserDialogState: Object.assign({ open: true, loading: false, error: false }, payload),\r\n    }));\r\n}\r\nfunction* closeDeleteUserDialog({ payload }) {\r\n    const teamState = yield selectTeamState();\r\n    const { deleteUserDialogState: { onClose }, } = teamState;\r\n    onClose === null || onClose === void 0 ? void 0 : onClose(payload);\r\n    yield put(actions.setTeamState({\r\n        deleteUserDialogState: {\r\n            loading: false,\r\n            error: false,\r\n            open: false,\r\n        },\r\n    }));\r\n}\r\nfunction* teamSagas() {\r\n    yield takeLatest(actions.loadUsers, loadUsers);\r\n    yield takeLatest(actions.loadAllSubTenantsUsers, loadAllSubTenantsUsers);\r\n    yield takeLatest(actions.loadRoles, loadRoles);\r\n    yield takeEvery(actions.addUser, addUser);\r\n    yield takeEvery(actions.addUserToSubTenants, addUserToSubTenants);\r\n    yield takeEvery(actions.updateUser, updateUser);\r\n    yield takeEvery(actions.setUserRolesForSubTenants, setUserRolesForSubTenants);\r\n    yield takeEvery(actions.deleteUser, deleteUser);\r\n    yield takeEvery(actions.deleteUserFromSubTenants, deleteUserFromSubTenants);\r\n    yield takeEvery(actions.resendActivationLink, resendActivationLink);\r\n    yield takeEvery(actions.resendInvitationLink, resendInvitationLink);\r\n    yield takeEvery(actions.resendInvitationLinkToAllSubTenants, resendInvitationLinkToAllSubTenants);\r\n    yield takeEvery(actions.getInvitationLink, getInvitationLink);\r\n    yield takeEvery(actions.createInvitationLink, createInvitationLink);\r\n    yield takeEvery(actions.updateInvitationLink, updateInvitationLink);\r\n    yield takeEvery(actions.deleteInvitationLink, deleteInvitationLink);\r\n    yield takeEvery(actions.openAddUserDialog, openAddUserDialog);\r\n    yield takeEvery(actions.closeAddUserDialog, closeAddUserDialog);\r\n    yield takeEvery(actions.openDeleteUserDialog, openDeleteUserDialog);\r\n    yield takeEvery(actions.closeDeleteUserDialog, closeDeleteUserDialog);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* loadUsersMock({ payload }) {\r\n    var _a, _b, _c, _d;\r\n    const { silentLoading, callback } = payload;\r\n    const teamState = yield selectTeamState();\r\n    const pageSize = (_a = payload.pageSize) !== null && _a !== void 0 ? _a : teamState.pageSize;\r\n    const pageOffset = (_b = payload.pageOffset) !== null && _b !== void 0 ? _b : teamState.pageOffset;\r\n    const filter = (_c = payload.filter) !== null && _c !== void 0 ? _c : teamState.filter;\r\n    const sort = (_d = payload.sort) !== null && _d !== void 0 ? _d : teamState.sort;\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: !silentLoading }));\r\n    yield put(actions.setTeamState({\r\n        pageSize,\r\n        pageOffset,\r\n        filter,\r\n        sort,\r\n    }));\r\n    const totalPages = 2;\r\n    const totalItems = 10;\r\n    yield delay();\r\n    yield put(actions.setTeamState({ users: usersDemo, totalPages, totalItems, roles: rolesDemo, permissions: permissionsDemo }));\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: false }));\r\n    callback === null || callback === void 0 ? void 0 : callback(usersDemo);\r\n}\r\nfunction* loadAllSubTenantsUsersMock({ payload, }) {\r\n    var _a, _b, _c, _d, _e;\r\n    const { silentLoading, callback } = payload;\r\n    const teamState = yield selectTeamState();\r\n    const _limit = (_a = payload._limit) !== null && _a !== void 0 ? _a : teamState.allUsersQueryParams._limit;\r\n    const _offset = (_b = payload._offset) !== null && _b !== void 0 ? _b : teamState.allUsersQueryParams._offset;\r\n    const _filter = (_c = payload._filter) !== null && _c !== void 0 ? _c : teamState.allUsersQueryParams._filter;\r\n    const _sortBy = (_d = payload._sortBy) !== null && _d !== void 0 ? _d : teamState.allUsersQueryParams._sortBy;\r\n    const _order = (_e = payload._order) !== null && _e !== void 0 ? _e : teamState.allUsersQueryParams._order;\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: !silentLoading }));\r\n    yield put(actions.setTeamState({\r\n        allUsersQueryParams: {\r\n            _limit,\r\n            _offset,\r\n            _filter,\r\n            _sortBy,\r\n            _order,\r\n        },\r\n    }));\r\n    const totalPages = 2;\r\n    const totalItems = 10;\r\n    yield delay();\r\n    yield put(actions.setTeamState({\r\n        allUsers: allUsersDemo,\r\n        totalPages,\r\n        totalItems,\r\n        roles: rolesDemo,\r\n        permissions: permissionsDemo,\r\n    }));\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.USERS, value: false }));\r\n    callback === null || callback === void 0 ? void 0 : callback(allUsersDemo);\r\n}\r\nfunction* loadRolesMock({ payload }) {\r\n    var _a;\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.ROLES_AND_PERMISSIONS, value: true }));\r\n    yield delay();\r\n    yield put(actions.setTeamState({ roles: rolesDemo, permissions: permissionsDemo }));\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.ROLES_AND_PERMISSIONS, value: true }));\r\n    (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, { roles: rolesDemo, permissions: permissionsDemo });\r\n}\r\nfunction* addUserMock({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }) }));\r\n    yield delay();\r\n    const newUser = Object.assign(Object.assign(Object.assign({}, userTeamDemo), body), { id: `${v4()}` });\r\n    callback === null || callback === void 0 ? void 0 : callback(newUser);\r\n    yield put(actions.setTeamState({\r\n        users: [newUser, ...teamState.users],\r\n        addUserDialogState: { open: false, loading: false },\r\n    }));\r\n}\r\nfunction* addUserToSubTenantsMock({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }) }));\r\n    yield delay();\r\n    const newUser = Object.assign(Object.assign(Object.assign({}, userTeamDemo), body), { id: `${v4()}` });\r\n    yield put(actions.setTeamState({\r\n        users: [newUser, ...teamState.users],\r\n        addUserDialogState: { open: false, loading: false },\r\n    }));\r\n    callback === null || callback === void 0 ? void 0 : callback(null);\r\n}\r\nfunction* updateUserMock({ payload }) {\r\n    var _a;\r\n    const { callback, profileImage } = payload, body = __rest(payload, [\"callback\", \"profileImage\"]);\r\n    const { id: userId } = body;\r\n    const teamState = yield selectTeamState();\r\n    const oldUserData = teamState.users.find((user) => user.id === body.id);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.UPDATE_USER, value: userId || '' }));\r\n    yield put(actions.setTeamState({ addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }) }));\r\n    yield put(actions.setTeamState({\r\n        addUserDialogState: Object.assign(Object.assign({}, teamState.addUserDialogState), { loading: true }),\r\n        users: teamState.users.map((user) => {\r\n            if (user.id === body.id) {\r\n                return Object.assign(Object.assign({}, user), body);\r\n            }\r\n            return user;\r\n        }),\r\n    }));\r\n    if (oldUserData.roleIds.length > 0 && ((_a = body.roleIds) === null || _a === void 0 ? void 0 : _a.length) === 0) {\r\n        body.roleIds = [''];\r\n    }\r\n    yield delay();\r\n    const newUser = Object.assign(Object.assign({}, oldUserData), body);\r\n    callback === null || callback === void 0 ? void 0 : callback(newUser);\r\n    yield put(actions.setTeamState({\r\n        users: teamState.users.map((user) => user.id === newUser.id\r\n            ? Object.assign(Object.assign(Object.assign({}, user), newUser), { createdAt: user.createdAt, customData: user.customData, lastLogin: user.lastLogin }) : user),\r\n    }));\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.UPDATE_USER, value: false }));\r\n}\r\nfunction* deleteUserMock({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), { loading: true }) }));\r\n    yield delay();\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n    yield put(actions.setTeamState({\r\n        users: teamState.users.filter((user) => user.id !== body.userId),\r\n        deleteUserDialogState: { open: false, loading: false },\r\n    }));\r\n}\r\nfunction* deleteUserFromSubTenantsMock({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    const teamState = yield selectTeamState();\r\n    yield put(actions.setTeamState({ deleteUserDialogState: Object.assign(Object.assign({}, teamState.deleteUserDialogState), { loading: true }) }));\r\n    yield delay();\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n    yield put(actions.setTeamState({\r\n        allUsers: teamState.allUsers.filter((user) => user.id !== body.userId),\r\n        deleteUserDialogState: { open: false, loading: false },\r\n    }));\r\n}\r\nfunction* resendActivationLinkMock({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_ACTIVATE_LINK, value: body.userId }));\r\n    yield delay();\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_ACTIVATE_LINK, value: false }));\r\n}\r\nfunction* resendInvitationLinkMock({ payload }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: body.email }));\r\n    yield delay();\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: false }));\r\n}\r\nfunction* resendInvitationLinkToAllSubTenantsMock({ payload, }) {\r\n    const { callback } = payload, body = __rest(payload, [\"callback\"]);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: body.email }));\r\n    yield delay();\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n    yield put(actions.setTeamLoader({ key: TeamStateKeys.RESEND_INVITATION_LINK, value: false }));\r\n}\r\nfunction* teamSagasMock() {\r\n    yield takeLatest(actions.loadUsers, loadUsersMock);\r\n    yield takeLatest(actions.loadAllSubTenantsUsers, loadAllSubTenantsUsersMock);\r\n    yield takeLatest(actions.loadRoles, loadRolesMock);\r\n    yield takeEvery(actions.addUser, addUserMock);\r\n    yield takeEvery(actions.addUserToSubTenants, addUserToSubTenantsMock);\r\n    yield takeEvery(actions.updateUser, updateUserMock);\r\n    yield takeEvery(actions.deleteUser, deleteUserMock);\r\n    yield takeEvery(actions.deleteUserFromSubTenants, deleteUserFromSubTenantsMock);\r\n    yield takeEvery(actions.resendActivationLink, resendActivationLinkMock);\r\n    yield takeEvery(actions.resendInvitationLink, resendInvitationLinkMock);\r\n    yield takeEvery(actions.resendInvitationLinkToAllSubTenants, resendInvitationLinkToAllSubTenantsMock);\r\n    yield takeEvery(actions.openAddUserDialog, openAddUserDialog);\r\n    yield takeEvery(actions.closeAddUserDialog, closeAddUserDialog);\r\n    yield takeEvery(actions.openDeleteUserDialog, openDeleteUserDialog);\r\n    yield takeEvery(actions.closeDeleteUserDialog, closeDeleteUserDialog);\r\n}\n\nfunction* loadSocialLoginsConfigurations() {\r\n    try {\r\n        yield put(actions.setSocialLoginsState({ loading: true }));\r\n        const socialLoginsConfig = yield call(api.auth.getSocialLoginProviders);\r\n        yield put(actions.setSocialLoginsState({ socialLoginsConfig, loading: false, firstLoad: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSocialLoginsState({ error: e.message, loading: false, firstLoad: false }));\r\n    }\r\n}\r\nfunction* loadSocialLoginsConfigurationsV2() {\r\n    try {\r\n        const context = yield select((state) => state.root.context);\r\n        yield put(actions.setSocialLoginsState({ loading: true }));\r\n        const socialLoginsConfigV2 = yield call(api.auth.getSocialLoginProvidersV2);\r\n        const socialLoginsConfigWithFullUrl = socialLoginsConfigV2.map((_a) => {\r\n            var { authorizationUrl } = _a, config = __rest(_a, [\"authorizationUrl\"]);\r\n            const baseUrl = fetch.getBaseUrl(context, authorizationUrl !== null && authorizationUrl !== void 0 ? authorizationUrl : '');\r\n            return (Object.assign(Object.assign({}, config), { authorizationUrl: authorizationUrl ? `${baseUrl}${authorizationUrl}` : null }));\r\n        });\r\n        yield put(actions.setSocialLoginsState({ socialLoginsConfigV2: socialLoginsConfigWithFullUrl, loading: false, firstLoad: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSocialLoginsState({ error: e.message, loading: false, firstLoad: false }));\r\n    }\r\n}\r\nfunction* loginViaSocialLogin(_a) {\r\n    var _b, _c, _d;\r\n    var _e = _a.payload, { events, url } = _e, payload = __rest(_e, [\"events\", \"url\"]);\r\n    try {\r\n        yield put(actions.setSocialLoginsState({ loading: true }));\r\n        const { email, isNewUser, userId, tenantId, name, } = yield call(api.auth.loginViaSocialLogin, payload);\r\n        if (isNewUser) {\r\n            (_b = events === null || events === void 0 ? void 0 : events.signUpComplete) === null || _b === void 0 ? void 0 : _b.call(events, {\r\n                email,\r\n                url,\r\n                authenticationType: AuthenticationTypes.SOCIAL_LOGIN,\r\n                createdAt: new Date(),\r\n                id: userId,\r\n                socialProvider: payload.provider,\r\n                tenantId,\r\n            });\r\n            (_c = events === null || events === void 0 ? void 0 : events.userVerified) === null || _c === void 0 ? void 0 : _c.call(events, {\r\n                email,\r\n                origin: UserVeirifedOriginTypes.SOCIAL_LOGIN,\r\n                createdAt: new Date(),\r\n                id: userId,\r\n                url,\r\n                tenantId,\r\n                name,\r\n            });\r\n        }\r\n        if (email) {\r\n            localStorage.setItem('email', email);\r\n            localStorage.setItem('name', name);\r\n        }\r\n        yield put(actions.setLoginState({ email, isNewUser }));\r\n        yield refreshToken();\r\n        localStorage.removeItem('register-quick-login');\r\n        yield put(actions.setSocialLoginsState({ loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSocialLoginsState({ loading: false, error: (_d = e.message) !== null && _d !== void 0 ? _d : 'Failed to authenticate', firstLoad: false }));\r\n    }\r\n}\r\nfunction* setSocialLoginError({ payload }) {\r\n    yield put(actions.setSocialLoginsState({ error: payload.error, loading: false, firstLoad: false }));\r\n}\r\nfunction* socialLoginsSaga() {\r\n    yield takeLeading(actions.loadSocialLoginsConfiguration, loadSocialLoginsConfigurations);\r\n    yield takeLeading(actions.loadSocialLoginsConfigurationV2, loadSocialLoginsConfigurationsV2);\r\n    yield takeLeading(actions.loginViaSocialLogin, loginViaSocialLogin);\r\n    yield takeLatest(actions.setSocialLoginError, setSocialLoginError);\r\n}\n\nvar ApiStateKeys;\r\n(function (ApiStateKeys) {\r\n    ApiStateKeys[\"LOAD_API_TOKENS\"] = \"LOAD_API_TOKENS\";\r\n    ApiStateKeys[\"ADD_API_TOKEN\"] = \"ADD_API_TOKEN\";\r\n    ApiStateKeys[\"DELETE_API_TOKEN\"] = \"DELETE_API_TOKEN\";\r\n})(ApiStateKeys || (ApiStateKeys = {}));\n\nfunction* loadApiTokensData({ payload: apiTokenType }) {\r\n    yield put(actions.setApiTokensState({ apiTokenType }));\r\n    try {\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: true }));\r\n        if (apiTokenType === 'user') {\r\n            const apiTokensData = yield call(api.auth.getUserApiTokensData);\r\n            yield put(actions.setApiTokensState({ apiTokensDataUser: apiTokensData !== null && apiTokensData !== void 0 ? apiTokensData : [] }));\r\n        }\r\n        else {\r\n            const apiTenantTokensData = yield call(api.auth.getTenantApiTokensData);\r\n            const { items: roles } = yield call(api.teams.loadAvailableRoles);\r\n            const { items: permissions } = yield call(api.teams.loadAvailablePermissions);\r\n            yield put(actions.setApiTokensState({\r\n                apiTokensDataTenant: apiTenantTokensData !== null && apiTenantTokensData !== void 0 ? apiTenantTokensData : [],\r\n                roles: roles !== null && roles !== void 0 ? roles : [],\r\n                permissions: permissions !== null && permissions !== void 0 ? permissions : [],\r\n            }));\r\n        }\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setApiTokensError({ key: ApiStateKeys.LOAD_API_TOKENS, value: e.message }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: false }));\r\n    }\r\n}\r\nfunction* addUserApiToken({ payload }) {\r\n    const { description, callback } = payload;\r\n    const { apiTokensDataUser } = yield select((state) => state.auth.apiTokensState);\r\n    try {\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: true }));\r\n        const data = yield call(api.auth.updateUserApiTokensData, { description });\r\n        yield put(actions.setApiTokensState({ showAddTokenDialog: false }));\r\n        yield delay$1(200);\r\n        yield put(actions.setApiTokensState({\r\n            apiTokensDataUser: [data, ...apiTokensDataUser],\r\n            successDialog: { open: true, secret: data.secret, clientId: data.clientId },\r\n        }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setApiTokensError({ key: ApiStateKeys.ADD_API_TOKEN, value: e.message }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* addTenantApiToken({ payload }) {\r\n    const { description, roleIds, callback } = payload;\r\n    const { apiTokensDataTenant } = yield select((state) => state.auth.apiTokensState);\r\n    try {\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: true }));\r\n        const data = yield call(api.auth.updateTenantApiTokensData, { description, roleIds });\r\n        yield put(actions.setApiTokensState({ showAddTokenDialog: false }));\r\n        yield delay$1(200);\r\n        yield put(actions.setApiTokensState({\r\n            apiTokensDataTenant: [data, ...apiTokensDataTenant],\r\n            successDialog: { open: true, secret: data.secret, clientId: data.clientId },\r\n        }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setApiTokensError({ key: ApiStateKeys.ADD_API_TOKEN, value: e.message }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e.message);\r\n    }\r\n}\r\nfunction* deleteUserApiToken({ payload }) {\r\n    const { apiTokensDataUser } = yield select((state) => state.auth.apiTokensState);\r\n    try {\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: true }));\r\n        yield call(api.auth.deleteUserApiToken, { tokenId: payload });\r\n        yield put(actions.setApiTokensState({\r\n            apiTokensDataUser: apiTokensDataUser.filter((i) => i.clientId !== payload),\r\n            deleteTokenDialog: { open: false, clientId: payload },\r\n        }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setApiTokensError({ key: ApiStateKeys.DELETE_API_TOKEN, value: e.message }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: false }));\r\n    }\r\n}\r\nfunction* deleteTenantApiToken({ payload }) {\r\n    const { apiTokensDataTenant } = yield select((state) => state.auth.apiTokensState);\r\n    try {\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: true }));\r\n        yield call(api.auth.deleteTenantApiToken, { tokenId: payload });\r\n        yield put(actions.setApiTokensState({\r\n            apiTokensDataTenant: apiTokensDataTenant.filter((i) => i.clientId !== payload),\r\n            deleteTokenDialog: { open: false, clientId: payload },\r\n        }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setApiTokensError({ key: ApiStateKeys.DELETE_API_TOKEN, value: e.message }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: false }));\r\n    }\r\n}\r\nfunction* loadApiTokens({ payload }) {\r\n    var _a, _b;\r\n    if (!(payload === null || payload === void 0 ? void 0 : payload.silentLoading)) {\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: true }));\r\n    }\r\n    try {\r\n        const [apiTokensDataUser = [], apiTokensDataTenant = []] = yield all([\r\n            call(api.auth.getUserApiTokensData),\r\n            call(api.auth.getTenantApiTokensData),\r\n        ]);\r\n        yield put(actions.setApiTokensState({\r\n            apiTokensDataUser,\r\n            apiTokensDataTenant,\r\n        }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: false }));\r\n        (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setApiTokensError({ key: ApiStateKeys.LOAD_API_TOKENS, value: e.message }));\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: false }));\r\n        (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\r\n    }\r\n}\r\nfunction* apiTokensSaga() {\r\n    yield takeLeading(actions.loadApiTokens, loadApiTokens);\r\n    yield takeLeading(actions.initApiTokensData, loadApiTokensData);\r\n    yield takeEvery(actions.addUserApiToken, addUserApiToken);\r\n    yield takeEvery(actions.addTenantApiToken, addTenantApiToken);\r\n    yield takeLatest(actions.deleteTenantApiToken, deleteTenantApiToken);\r\n    yield takeLatest(actions.deleteUserApiToken, deleteUserApiToken);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* loadApiTokensDataMock({ payload: apiTokenType }) {\r\n    var _a;\r\n    yield put(actions.setApiTokensState({ apiTokenType }));\r\n    yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: true }));\r\n    if (apiTokenType === 'user') {\r\n        yield delay$1(200);\r\n        const apiTokensData = [apiTokensDataDemo];\r\n        yield put(actions.setApiTokensState({ apiTokensDataUser: apiTokensData !== null && apiTokensData !== void 0 ? apiTokensData : [] }));\r\n    }\r\n    else {\r\n        yield delay$1(200);\r\n        yield put(actions.setApiTokensState({\r\n            apiTokensDataTenant: (_a = [apiTokensDataTenantDemo]) !== null && _a !== void 0 ? _a : [],\r\n            roles: rolesDemo !== null && rolesDemo !== void 0 ? rolesDemo : [],\r\n            permissions: permissionsDemo !== null && permissionsDemo !== void 0 ? permissionsDemo : [],\r\n        }));\r\n    }\r\n    yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: false }));\r\n}\r\nfunction* addTenantApiTokenMock({ payload }) {\r\n    const { description, roleIds, callback } = payload;\r\n    yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: true }));\r\n    const { apiTokensDataTenant } = yield select((state) => state.auth.apiTokensState);\r\n    const newToken = Object.assign(Object.assign({}, apiTokensDataTenantDemo), { description,\r\n        roleIds, clientId: `CLIENT_ID_${v4()}` });\r\n    yield put(actions.setApiTokensState({ showAddTokenDialog: false }));\r\n    yield delay$1(200);\r\n    yield put(actions.setApiTokensState({\r\n        apiTokensDataTenant: [...apiTokensDataTenant, newToken],\r\n        successDialog: { open: true, secret: newToken.secret, clientId: newToken.clientId },\r\n    }));\r\n    yield delay$1(200);\r\n    yield put(actions.setApiTokensLoader({ key: ApiStateKeys.ADD_API_TOKEN, value: false }));\r\n    callback === null || callback === void 0 ? void 0 : callback(null);\r\n}\r\nfunction* deleteTenantApiTokenMock({ payload }) {\r\n    yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: true }));\r\n    yield delay$1(200);\r\n    const apiTokensDataTenant = [apiTokensDataTenantDemo];\r\n    yield put(actions.setApiTokensState({\r\n        apiTokensDataTenant: apiTokensDataTenant.filter((i) => i.clientId !== payload),\r\n        deleteTokenDialog: { open: false, clientId: payload },\r\n    }));\r\n    yield put(actions.setApiTokensLoader({ key: ApiStateKeys.DELETE_API_TOKEN, value: false }));\r\n}\r\nfunction* loadApiTokensMock({ payload }) {\r\n    var _a;\r\n    if (!(payload === null || payload === void 0 ? void 0 : payload.silentLoading)) {\r\n        yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: true }));\r\n    }\r\n    const apiTokensDataUser = [apiTokensDataDemo];\r\n    const apiTokensDataTenant = [apiTokensDataTenantDemo];\r\n    yield put(actions.setApiTokensState({\r\n        apiTokensDataUser,\r\n        apiTokensDataTenant,\r\n    }));\r\n    yield delay$1(200);\r\n    yield put(actions.setApiTokensLoader({ key: ApiStateKeys.LOAD_API_TOKENS, value: false }));\r\n    (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n}\r\nfunction* apiTokensSagaMock() {\r\n    yield takeLeading(actions.loadApiTokens, loadApiTokensMock);\r\n    yield takeLeading(actions.initApiTokensData, loadApiTokensDataMock);\r\n    yield takeEvery(actions.addTenantApiToken, addTenantApiTokenMock);\r\n    yield takeLatest(actions.deleteTenantApiToken, deleteTenantApiTokenMock);\r\n}\n\nfunction* saveAccountSettings({ payload }) {\r\n    var _a, _b;\r\n    try {\r\n        yield put(actions.setAccountSettingsState({ loading: true }));\r\n        const { accountSettingsState } = yield select((state) => state.auth);\r\n        const { address, timezone, dateFormat, timeFormat, currency, logo } = accountSettingsState;\r\n        const body = yield call(api.accountSettings.updateSettings, Object.assign({ address,\r\n            timezone,\r\n            dateFormat,\r\n            timeFormat,\r\n            currency,\r\n            logo }, payload));\r\n        yield put(actions.setAccountSettingsState(Object.assign(Object.assign({}, body), { loading: false })));\r\n        (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, body);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setAccountSettingsState({ loading: false, error: e.message }));\r\n        (_b = payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\r\n    }\r\n}\r\nfunction* loadAccountSettings({ payload }) {\r\n    yield put(actions.setAccountSettingsState({ loading: !(payload === null || payload === void 0 ? void 0 : payload.silentLoading), error: null }));\r\n    try {\r\n        const body = yield call(api.accountSettings.getSettings);\r\n        yield put(actions.setAccountSettingsState(Object.assign(Object.assign({}, body), { loading: false })));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setAccountSettingsState({ loading: false, error: e.message }));\r\n    }\r\n}\r\nfunction* accountSettingsSaga() {\r\n    yield takeLeading(actions.saveAccountSettings, saveAccountSettings);\r\n    yield takeLeading(actions.loadAccountSettings, loadAccountSettings);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* saveAccountSettingsMock({ payload }) {\r\n    var _a;\r\n    yield put(actions.setAccountSettingsState({ loading: true }));\r\n    yield delay();\r\n    const { accountSettingsState } = yield select((state) => state.auth);\r\n    const { address, timezone, dateFormat, timeFormat, currency, logo } = accountSettingsState;\r\n    const body = Object.assign({ address,\r\n        timezone,\r\n        dateFormat,\r\n        timeFormat,\r\n        currency,\r\n        logo }, payload);\r\n    yield put(actions.setAccountSettingsState(Object.assign(Object.assign({}, body), { loading: false })));\r\n    (_a = payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, body);\r\n}\r\nfunction* loadAccountSettingsMock({ payload }) {\r\n    yield put(actions.setAccountSettingsState({ loading: !(payload === null || payload === void 0 ? void 0 : payload.silentLoading), error: null }));\r\n    yield delay();\r\n    yield put(actions.setAccountSettingsState({\r\n        address: 'Tel-aviv',\r\n        timezone: 'Asia/Jerusalem',\r\n        dateFormat: 'DD/MM/YYYY',\r\n        timeFormat: 'HH:mm',\r\n        currency: 'USD',\r\n        loading: false,\r\n    }));\r\n}\r\nfunction* accountSettingsSagaMock() {\r\n    yield takeLeading(actions.saveAccountSettings, saveAccountSettingsMock);\r\n    yield takeLeading(actions.loadAccountSettings, loadAccountSettingsMock);\r\n}\n\nfunction* switchTenant({ payload: { tenantId, callback } }) {\r\n    yield put(actions.setState({ isLoading: true }));\r\n    try {\r\n        yield call(api.tenants.switchTenant, { tenantId });\r\n        yield call(refreshToken);\r\n        const callbackConsumed = callback === null || callback === void 0 ? void 0 : callback(true);\r\n        if (!callbackConsumed) {\r\n            yield put(actions.setState({ isLoading: false }));\r\n        }\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setState({ isLoading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(false, e);\r\n    }\r\n}\r\nfunction* loadTenants({ payload }) {\r\n    var _a, _b;\r\n    yield put(actions.setTenantsState({ loading: true }));\r\n    try {\r\n        const tenants = yield call(api.tenants.getTenants);\r\n        yield put(actions.setTenantsState({ tenants, loading: false }));\r\n        (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, []);\r\n    }\r\n    catch (e) {\r\n        (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, [], e);\r\n        yield put(actions.setTenantsState({ loading: false }));\r\n    }\r\n}\r\nfunction* loadSubTenants({ payload }) {\r\n    var _a, _b;\r\n    yield put(actions.setTenantsState({ loading: true }));\r\n    try {\r\n        const subTenants = yield call(api.tenants.getSubTenants);\r\n        yield put(actions.setTenantsState({ subTenants, loading: false }));\r\n        (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTenantsState({ loading: false }));\r\n        (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\r\n    }\r\n}\r\nfunction* loadSubTenantsTree({ payload }) {\r\n    var _a, _b;\r\n    yield put(actions.setTenantsState({ loading: true }));\r\n    try {\r\n        const tenantTree = yield call(api.tenants.getSubTenantsAsTree);\r\n        yield put(actions.setTenantsState({ tenantTree, loading: false }));\r\n        (_a = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _a === void 0 ? void 0 : _a.call(payload, true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setTenantsState({ loading: false }));\r\n        (_b = payload === null || payload === void 0 ? void 0 : payload.callback) === null || _b === void 0 ? void 0 : _b.call(payload, null, e);\r\n    }\r\n}\r\nfunction* tenantsSagas() {\r\n    yield takeEvery(actions.loadTenants, loadTenants);\r\n    yield takeEvery(actions.loadSubTenants, loadSubTenants);\r\n    yield takeEvery(actions.switchTenant, switchTenant);\r\n    yield takeEvery(actions.loadSubTenantsTree, loadSubTenantsTree);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* loadTenantsMock({}) {\r\n    yield put(actions.setTenantsState({ loading: true }));\r\n    yield delay();\r\n    yield put(actions.setTenantsState({ tenants: tenantsDemo, loading: false }));\r\n}\r\nfunction* tenantsSagasMock() {\r\n    yield takeEvery(actions.loadTenants, loadTenantsMock);\r\n}\n\nfunction* loadRolesAndPermissions({ payload }) {\r\n    var _a;\r\n    yield put(actions.setRolesState({ loading: !((_a = payload === null || payload === void 0 ? void 0 : payload.silentLoading) !== null && _a !== void 0 ? _a : false), error: null }));\r\n    try {\r\n        const result = yield all([\r\n            call(api.roles.getRoles),\r\n            call(api.roles.getPermissions),\r\n            call(api.roles.getPermissionCategories),\r\n        ]);\r\n        const [roles, permissions, permissionCategories] = result;\r\n        yield put(actions.setRolesState({ roles, permissions, permissionCategories, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setRolesState({ error: e.message, loading: false }));\r\n    }\r\n}\r\nfunction* addRole(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setRolesState({ saving: true }));\r\n    try {\r\n        const role = yield call(api.roles.addRole, body);\r\n        const roles = yield call(api.roles.getRoles);\r\n        yield put(actions.loadRolesAndPermissions({ silentLoading: true }));\r\n        yield put(actions.setRolesState({ roles, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(role);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setRolesState({ error: e.message, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* deleteRole(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setRolesState({ saving: true }));\r\n    try {\r\n        yield call(api.roles.deleteRole, body);\r\n        yield put(actions.loadRolesAndPermissions({ silentLoading: true }));\r\n        yield put(actions.setRolesState({ saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setRolesState({ error: e.message, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(false, e);\r\n    }\r\n}\r\nfunction* updateRole(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setRolesState({ saving: true }));\r\n    try {\r\n        const role = yield call(api.roles.updateRole, body);\r\n        yield put(actions.loadRolesAndPermissions({ silentLoading: true }));\r\n        yield put(actions.setRolesState({ saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(role);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setRolesState({ error: e.message, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* attachPermissionsToRole(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setRolesState({ saving: true }));\r\n    try {\r\n        const role = yield call(api.roles.attachPermissionsToRole, body);\r\n        yield put(actions.loadRolesAndPermissions({ silentLoading: true }));\r\n        yield put(actions.setRolesState({ saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(role);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setRolesState({ error: e.message, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* attachPermissionToRoles(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setRolesState({ saving: true }));\r\n    try {\r\n        const permission = yield call(api.roles.attachPermissionToRoles, body);\r\n        yield put(actions.loadRolesAndPermissions({ silentLoading: true }));\r\n        yield put(actions.setRolesState({ saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(permission);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setRolesState({ error: e.message, saving: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* rolesSagas() {\r\n    yield takeLeading(actions.loadRolesAndPermissions, loadRolesAndPermissions);\r\n    yield takeEvery(actions.addRole, addRole);\r\n    yield takeEvery(actions.deleteRole, deleteRole);\r\n    yield takeEvery(actions.updateRole, updateRole);\r\n    yield takeEvery(actions.attachPermissionsToRole, attachPermissionsToRole);\r\n    yield takeEvery(actions.attachPermissionToRoles, attachPermissionToRoles);\r\n}\n\nfunction* resetPhoneNumber(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setResetPhoneNumberState({ loading: true }));\r\n    try {\r\n        const res = yield call(api.auth.resetPhoneNumber, body);\r\n        yield put(actions.setResetPhoneNumberState({ loading: false, error: undefined, resetPhoneNumberToken: res.resetPhoneNumberToken, step: ResetPhoneNumberStep.VerifyResetPhoneNumber }));\r\n        yield put(actions.setLoginState({ email: body.email }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setResetPhoneNumberState({ loading: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* verifyResetPhoneNumber(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setResetPhoneNumberState({ loading: true }));\r\n    try {\r\n        const res = yield call(api.auth.verifyResetPhoneNumber, body);\r\n        yield put(actions.setResetPhoneNumberState({ loading: false, error: undefined, changePhoneNumberToken: res.changePhoneNumberToken, step: ResetPhoneNumberStep.ChangePhoneNumber }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setResetPhoneNumberState({ loading: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* changePhoneNumber(_a) {\r\n    var _b = _a.payload, { callback } = _b, body = __rest(_b, [\"callback\"]);\r\n    yield put(actions.setResetPhoneNumberState({ loading: true }));\r\n    try {\r\n        const { onRedirectTo, routes } = yield select(({ auth: { onRedirectTo, routes } }) => ({ onRedirectTo, routes }));\r\n        yield call(api.auth.changePhoneNumber, { phoneNumber: body.phoneNumber, changePhoneNumberToken: body.changePhoneNumberToken });\r\n        yield put(actions.setLoginState({ step: LoginStep.loginWithSmsOtc }));\r\n        yield put(actions.passwordlessPreLogin({\r\n            type: AuthStrategyEnum.SmsCode,\r\n            email: body.email,\r\n            recaptchaToken: body.recaptchaToken,\r\n        }));\r\n        onRedirectTo(routes.loginUrl);\r\n        yield put(actions.setResetPhoneNumberState({ loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setResetPhoneNumberState({ loading: false, error: e.message }));\r\n        callback === null || callback === void 0 ? void 0 : callback(null, e);\r\n    }\r\n}\r\nfunction* resetPhoneNumberSagas() {\r\n    yield takeLeading(actions.resetPhoneNumber, resetPhoneNumber);\r\n    yield takeLeading(actions.verifyResetPhoneNumber, verifyResetPhoneNumber);\r\n    yield takeLeading(actions.changePhoneNumber, changePhoneNumber);\r\n}\n\nfunction* loadCurrentUserSessions() {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    try {\r\n        const sessions = yield call(api.auth.getCurrentUserSessions);\r\n        yield put(actions.setSessionsState({ sessions, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSessionsState({ error: e, loading: false }));\r\n    }\r\n}\r\nfunction* loadCurrentUserSession() {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    try {\r\n        const session = yield call(api.auth.getCurrentUserSession);\r\n        yield put(actions.setSessionsState({ currentSession: session, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSessionsState({ error: e, loading: false }));\r\n    }\r\n}\r\nfunction* deleteUserSession({ payload: { id } }) {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    try {\r\n        yield call(api.auth.deleteSessionForUser, id);\r\n        yield put(actions.loadUserSessions());\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSessionsState({ error: e, loading: false }));\r\n    }\r\n}\r\nfunction* revokeUserSessions({ payload: { callback, userId } }) {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    try {\r\n        yield call(api.auth.revokeSessionsForUser, userId);\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSessionsState({ error: e, loading: false }));\r\n        callback === null || callback === void 0 ? void 0 : callback(false);\r\n    }\r\n}\r\nfunction* deleteAllUserSessions() {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    try {\r\n        yield call(api.auth.deleteAllSessionsForUser);\r\n        yield put(actions.loadUserSessions());\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSessionsState({ error: e, loading: false }));\r\n    }\r\n}\r\nfunction* sessionsSaga() {\r\n    yield takeLatest(actions.loadUserSessions, loadCurrentUserSessions);\r\n    yield takeLatest(actions.deleteUserSession, deleteUserSession);\r\n    yield takeLatest(actions.deleteAllUserSessions, deleteAllUserSessions);\r\n    yield takeLatest(actions.loadCurrentUserSession, loadCurrentUserSession);\r\n    yield takeEvery(actions.revokeUserSessions, revokeUserSessions);\r\n}\r\n/*********************************\r\n *  Preview Sagas\r\n *********************************/\r\nfunction* loadCurrentUserSessionsMock() {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    yield put(actions.setSessionsState({ sessions: sessionsMock, loading: false }));\r\n}\r\nfunction* deleteUserSessionMock({ payload: { id } }) {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    const currentSessions = yield select((state) => { var _a; return (_a = state.auth.sessionsState.sessions) !== null && _a !== void 0 ? _a : []; });\r\n    const newSessions = currentSessions.filter(s => s.id !== id);\r\n    yield put(actions.setSessionsState({ sessions: newSessions, loading: false }));\r\n}\r\nfunction* deleteAllUserSessionsMock() {\r\n    yield put(actions.setSessionsState({ loading: true, error: null }));\r\n    const newSessions = sessionsMock.filter(s => s.current);\r\n    yield put(actions.setSessionsState({ sessions: newSessions, loading: false }));\r\n}\r\nfunction* sessionsSagaMock() {\r\n    yield takeLatest(actions.loadUserSessions, loadCurrentUserSessionsMock);\r\n    yield takeLatest(actions.deleteUserSession, deleteUserSessionMock);\r\n    yield takeLatest(actions.deleteAllUserSessions, deleteAllUserSessionsMock);\r\n}\n\nfunction* loadSessionPolicyState() {\r\n    yield put(actions.setSessionsPolicyState({ loading: true, error: null }));\r\n    try {\r\n        const sessionsPolicy = yield call(api.auth.getSessionConfigurations);\r\n        yield put(actions.setSessionsPolicyState({ configurations: sessionsPolicy, loading: false }));\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSessionsState({ error: e, loading: false }));\r\n    }\r\n}\r\nfunction* createOrUpdateSessionsPolicy({ payload }) {\r\n    yield put(actions.setSessionsPolicyState({ loading: true, error: null, }));\r\n    try {\r\n        const { callback } = payload, rest = __rest(payload, [\"callback\"]);\r\n        yield call(api.auth.createOrUpdateSessionConfigrations, rest);\r\n        yield put(actions.loadSessionsPolicy());\r\n        callback === null || callback === void 0 ? void 0 : callback(true);\r\n    }\r\n    catch (e) {\r\n        yield put(actions.setSessionsPolicyState({ error: e, loading: false }));\r\n    }\r\n}\r\nfunction* sessionsPolicySaga() {\r\n    yield takeLeading(actions.loadSessionsPolicy, loadSessionPolicyState);\r\n    yield takeLatest(actions.createOrUpdateSessionsPolicy, createOrUpdateSessionsPolicy);\r\n}\r\nfunction* loadSessionPolicyStateMock() {\r\n    yield put(actions.setSessionsPolicyState({ loading: true, error: null }));\r\n    yield put(actions.setSessionsPolicyState({ configurations: sessionsConfigDummies, loading: false }));\r\n}\r\nfunction* createOrUpdateSessionsPolicyMock({ payload }) {\r\n    yield put(actions.setSessionsPolicyState({ loading: true, error: null, }));\r\n    const { callback } = payload, rest = __rest(payload, [\"callback\"]);\r\n    callback === null || callback === void 0 ? void 0 : callback(true);\r\n    yield put(actions.setSessionsPolicyState({ configurations: rest, loading: false }));\r\n}\r\nfunction* sessionsPolicySagaMock() {\r\n    yield takeLeading(actions.loadSessionsPolicy, loadSessionPolicyStateMock);\r\n    yield takeLatest(actions.createOrUpdateSessionsPolicy, createOrUpdateSessionsPolicyMock);\r\n}\n\nfunction* sagas() {\r\n    yield all([\r\n        call(loginSagas),\r\n        call(activateSagas),\r\n        call(acceptInvitationSagas),\r\n        call(forgotPasswordSagas),\r\n        call(resetPhoneNumberSagas),\r\n        call(ssoSagas$1),\r\n        call(ssoSagas),\r\n        call(profileSagas),\r\n        call(mfaSagas),\r\n        call(teamSagas),\r\n        call(socialLoginsSaga),\r\n        call(signUpSaga),\r\n        call(apiTokensSaga),\r\n        call(securityPolicySagas),\r\n        call(accountSettingsSaga),\r\n        call(tenantsSagas),\r\n        call(rolesSagas),\r\n        call(sessionsSaga),\r\n        call(sessionsPolicySaga),\r\n    ]);\r\n}\r\nfunction* mockSagas() {\r\n    yield all([\r\n        call(loginSagasMock),\r\n        // call(activateSagas),\r\n        // call(acceptInvitationSagas),\r\n        // call(forgotPasswordSagas),\r\n        // call(socialLoginsSaga),\r\n        // call(signUpSaga),\r\n        call(ssoSagasMock),\r\n        call(profileSagasMock),\r\n        call(mfaSagasMock),\r\n        call(teamSagasMock),\r\n        call(apiTokensSagaMock),\r\n        call(securityPolicySagasMock),\r\n        call(sessionsSagaMock),\r\n        call(accountSettingsSagaMock),\r\n        call(tenantsSagasMock),\r\n        call(sessionsPolicySagaMock),\r\n    ]);\r\n}\n\n// export store\r\nvar authStore = {\r\n    sagas,\r\n    mockSagas,\r\n    storeName: authStoreName,\r\n    initialState,\r\n    reducer,\r\n    actions,\r\n};\n\nexport { AcceptInvitationStep, ActivateAccountStep, AdminPortalPages, AdminPortalPagesForEvents, ApiStateKeys, AuthenticationTypes, ForgotPasswordStep, LoginFlow, LoginStep, MFAStep, QuickLoginStrategy, ResetPhoneNumberStep, SSOStateKeys, SamlVendors, SignUpStage, TeamStateKeys, UserVeirifedOriginTypes, actions$g as acceptInvitationActions, reducers$f as acceptInvitationReducers, acceptInvitationState, actions$5 as accountSettingsActions, reducers$4 as accountSettingsReducers, accountSettingsState, actions$h as activateAccountActions, reducers$g as activateAccountReducers, activateState, actions$7 as apiTokensActions, reducers$6 as apiTokensReducers, apiTokensState, actions as authActions, initialState as authInitialState, mockSagas as authMockSagas, reducer as authReducers, sagas as authSagas, authStore as default, actions$f as forgotPasswordActions, reducers$e as forgotPasswordReducers, forgotPasswordState, actions$i as loginActions, reducers$h as loginReducers, loginState, actions$b as mfaActions, reducers$a as mfaReducers, mfaState, actions$c as profileActions, reducers$b as profileReducers, profileState, actions$e as resetPhoneNumberActions, reducers$d as resetPhoneNumberReducers, resetPhoneNumberState, actions$3 as rolesActions, reducers$2 as rolesReducers, rolesState, actions$6 as securityPolicyActions, reducers$5 as securityPolicyReducers, securityPolicyState, actions$2 as sessionsActions, actions$1 as sessionsPolicyActions, reducers as sessionsPolicyReducers, sessionsPolicyState, reducers$1 as sessionsReducers, sessionsState, actions$8 as signUpActions, reducers$7 as signUpReducers, signUpState, socialLoginState, actions$9 as socialLoginsActions, reducers$8 as socialLoginsReducer, actions$d as ssoActions, reducers$c as ssoReducers, ssoState, actions$a as teamActions, reducers$9 as teamReducers, teamState, actions$4 as tenantsActions, reducers$3 as tenantsReducers, tenantsState };\n"]},"metadata":{},"sourceType":"module"}